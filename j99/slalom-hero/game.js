!function(p){"use strict";function i(){return $i.__string_rec(this,"")}var l,t={},b=b||{};function e(e,t){var i=Object.create(e);for(var s in t)i[s]=t[s];return t.toString!==Object.prototype.toString&&(i.toString=t.toString),i}function g(e,t){this.r=new RegExp(e,t.split("u").join(""))}(t.EReg=g).__name__="EReg",g.prototype={match:function(e){return this.r.global&&(this.r.lastIndex=0),this.r.m=this.r.exec(e),this.r.s=e,null!=this.r.m},matched:function(e){if(null!=this.r.m&&0<=e&&e<this.r.m.length)return this.r.m[e];throw Ci.thrown("EReg::matched")},split:function(e){var t="#__delim__#";return e.replace(this.r,t).split(t)},__class__:g};function I(){}(t.HxOverrides=I).__name__="HxOverrides",I.strDate=function(e){switch(e.length){case 8:var t=e.split(":"),i=new Date;return i.setTime(0),i.setUTCHours(t[0]),i.setUTCMinutes(t[1]),i.setUTCSeconds(t[2]),i;case 10:t=e.split("-");return new Date(t[0],t[1]-1,t[2],0,0,0);case 19:var s=(t=e.split(" "))[0].split("-"),n=t[1].split(":");return new Date(s[0],s[1]-1,s[2],n[0],n[1],n[2]);default:throw Ci.thrown("Invalid date format : "+e)}},I.cca=function(e,t){var i=e.charCodeAt(t);if(i==i)return i},I.substr=function(e,t,i){if(null==i)i=e.length;else if(i<0){if(0!=t)return"";i=e.length+i}return e.substr(t,i)},I.remove=function(e,t){var i=e.indexOf(t);return-1!=i&&(e.splice(i,1),!0)},I.now=function(){return Date.now()};function f(){}(t.Lambda=f).__name__="Lambda",f.has=function(e,t){for(var i=ys(e);i.hasNext();){if(i.next()==t)return!0}return!1},f.exists=function(e,t){for(var i=ys(e);i.hasNext();){if(t(i.next()))return!0}return!1},Math.__name__="Math";function T(){}(t.Reflect=T).__name__="Reflect",T.field=function(e,t){try{return e[t]}catch(e){return null}},T.getProperty=function(e,t){var i;if(null==e)return null;var s=!!e.__properties__&&(i=e.__properties__["get_"+t]);return s?e[i]():e[t]},T.setProperty=function(e,t,i){var s,n=!!e.__properties__&&(s=e.__properties__["set_"+t]);n?e[s](i):e[t]=i},T.fields=function(e){var t=[];if(null!=e){var i=Object.prototype.hasOwnProperty;for(var s in e)"__id__"!=s&&"hx__closures__"!=s&&i.call(e,s)&&t.push(s)}return t},T.isFunction=function(e){return"function"==typeof e&&!(e.__name__||e.__ename__)},T.compareMethods=function(e,t){return e==t||!(!T.isFunction(e)||!T.isFunction(t))&&(e.scope==t.scope&&e.method==t.method&&null!=e.method)},T.deleteField=function(e,t){return!!Object.prototype.hasOwnProperty.call(e,t)&&(delete e[t],!0)};function U(){}(t.Std=U).__name__="Std",U.string=function(e){return $i.__string_rec(e,"")},U.parseInt=function(e){if(null!=e)for(var t=0,i=e.length;t<i;){var s=t++,n=e.charCodeAt(s);if(n<=8||14<=n&&32!=n&&45!=n){var r=e.charCodeAt(1+s),a=parseInt(e,120==r||88==r?16:10);return isNaN(a)?null:a}}return null},U.random=function(e){return e<=0?0:Math.floor(Math.random()*e)};function P(){this.b=""}(t.StringBuf=P).__name__="StringBuf",P.prototype={__class__:P};function c(){}(t.StringTools=c).__name__="StringTools",c.htmlEscape=function(e,t){for(var i="",s=0,n=e;s<n.length;){var r=s++,a=(e=n).charCodeAt(r);55296<=a&&a<=56319&&(a=a-55232<<10|1023&e.charCodeAt(1+r)),65536<=a&&++s;var _=a;switch(_){case 34:i+=t?"&quot;":String.fromCodePoint(_);break;case 38:i+="&amp;";break;case 39:i+=t?"&#039;":String.fromCodePoint(_);break;case 60:i+="&lt;";break;case 62:i+="&gt;";break;default:i+=String.fromCodePoint(_)}}return i},c.isSpace=function(e,t){var i=I.cca(e,t);return 8<i&&i<14||32==i},c.ltrim=function(e){for(var t=e.length,i=0;i<t&&c.isSpace(e,i);)++i;return 0<i?I.substr(e,i,t-i):e},c.rtrim=function(e){for(var t=e.length,i=0;i<t&&c.isSpace(e,t-i-1);)++i;return 0<i?I.substr(e,0,t-i):e},c.trim=function(e){return c.ltrim(c.rtrim(e))},c.replace=function(e,t,i){return e.split(t).join(i)},c.hex=function(e,t){for(var i="";i="0123456789ABCDEF".charAt(15&e)+i,0<(e>>>=4););if(null!=t)for(;i.length<t;)i="0"+i;return i};function k(){}var s=b.ValueType={__ename__:"ValueType",__constructs__:["TNull","TInt","TFloat","TBool","TObject","TFunction","TClass","TEnum","TUnknown"],TNull:{_hx_index:0,__enum__:"ValueType",toString:i},TInt:{_hx_index:1,__enum__:"ValueType",toString:i},TFloat:{_hx_index:2,__enum__:"ValueType",toString:i},TBool:{_hx_index:3,__enum__:"ValueType",toString:i},TObject:{_hx_index:4,__enum__:"ValueType",toString:i},TFunction:{_hx_index:5,__enum__:"ValueType",toString:i},TClass:((l=function(e){return{_hx_index:6,c:e,__enum__:"ValueType",toString:i}}).__params__=["c"],l),TEnum:((l=function(e){return{_hx_index:7,e:e,__enum__:"ValueType",toString:i}}).__params__=["e"],l),TUnknown:{_hx_index:8,__enum__:"ValueType",toString:i}};(t.Type=k).__name__="Type",k.getEnum=function(e){return null==e?null:b[e.__enum__]},k.createEnum=function(e,t,i){var s=T.field(e,t);if(null==s)throw Ci.thrown("No such constructor "+t);if(T.isFunction(s)){if(null==i)throw Ci.thrown("Constructor "+t+" need parameters");return s.apply(e,i)}if(null!=i&&0!=i.length)throw Ci.thrown("Constructor "+t+" does not need parameters");return s},k.createEnumIndex=function(e,t,i){var s=e.__constructs__[t];if(null==s)throw Ci.thrown(t+" is not a valid enum constructor index");return k.createEnum(e,s,i)},k.typeof=function(e){switch(typeof e){case"boolean":return s.TBool;case"function":return e.__name__||e.__ename__?s.TObject:s.TFunction;case"number":return Math.ceil(e)==e%2147483648?s.TInt:s.TFloat;case"object":if(null==e)return s.TNull;var t=e.__enum__;if(null!=t)return s.TEnum(b[t]);var i=$i.getClass(e);return null!=i?s.TClass(i):s.TObject;case"string":return s.TClass(String);case"undefined":return s.TNull;default:return s.TUnknown}},k.enumEq=function(e,t){if(e==t)return!0;try{var i=e.__enum__;if(null==i||i!=t.__enum__)return!1;if(e._hx_index!=t._hx_index)return!1;for(var s=b[i],n=s[s.__constructs__[e._hx_index]].__params__,r=0;r<n.length;){var a=n[r];if(++r,!k.enumEq(e[a],t[a]))return!1}}catch(r){return!1}return!0},k.enumParameters=function(e){var t=b[e.__enum__],i=t[t.__constructs__[e._hx_index]].__params__;if(null==i)return[];for(var s=[],n=0;n<i.length;){var r=i[n];++n,s.push(e[r])}return s};function R(e){this.nodeType=e,this.children=[],this.attributeMap=new zi}var D={toString:function(e){switch(e){case 0:return"Element";case 1:return"PCData";case 2:return"CData";case 3:return"Comment";case 4:return"DocType";case 5:return"ProcessingInstruction";case 6:return"Document"}}};(t.Xml=R).__name__="Xml",R.parse=function(e){return Zi.parse(e)},R.createElement=function(e){var t=new R(R.Element);if(t.nodeType!=R.Element)throw Ci.thrown("Bad node type, expected Element but found "+(null==t.nodeType?"null":D.toString(t.nodeType)));return t.nodeName=e,t},R.createPCData=function(e){var t=new R(R.PCData);if(t.nodeType==R.Document||t.nodeType==R.Element)throw Ci.thrown("Bad node type, unexpected "+(null==t.nodeType?"null":D.toString(t.nodeType)));return t.nodeValue=e,t},R.createCData=function(e){var t=new R(R.CData);if(t.nodeType==R.Document||t.nodeType==R.Element)throw Ci.thrown("Bad node type, unexpected "+(null==t.nodeType?"null":D.toString(t.nodeType)));return t.nodeValue=e,t},R.createComment=function(e){var t=new R(R.Comment);if(t.nodeType==R.Document||t.nodeType==R.Element)throw Ci.thrown("Bad node type, unexpected "+(null==t.nodeType?"null":D.toString(t.nodeType)));return t.nodeValue=e,t},R.createDocType=function(e){var t=new R(R.DocType);if(t.nodeType==R.Document||t.nodeType==R.Element)throw Ci.thrown("Bad node type, unexpected "+(null==t.nodeType?"null":D.toString(t.nodeType)));return t.nodeValue=e,t},R.createProcessingInstruction=function(e){var t=new R(R.ProcessingInstruction);if(t.nodeType==R.Document||t.nodeType==R.Element)throw Ci.thrown("Bad node type, unexpected "+(null==t.nodeType?"null":D.toString(t.nodeType)));return t.nodeValue=e,t},R.createDocument=function(){return new R(R.Document)},R.prototype={get:function(e){if(this.nodeType!=R.Element)throw Ci.thrown("Bad node type, expected Element but found "+(null==this.nodeType?"null":D.toString(this.nodeType)));return this.attributeMap.h[e]},set:function(e,t){if(this.nodeType!=R.Element)throw Ci.thrown("Bad node type, expected Element but found "+(null==this.nodeType?"null":D.toString(this.nodeType)));this.attributeMap.h[e]=t},exists:function(e){if(this.nodeType!=R.Element)throw Ci.thrown("Bad node type, expected Element but found "+(null==this.nodeType?"null":D.toString(this.nodeType)));return Object.prototype.hasOwnProperty.call(this.attributeMap.h,e)},attributes:function(){if(this.nodeType!=R.Element)throw Ci.thrown("Bad node type, expected Element but found "+(null==this.nodeType?"null":D.toString(this.nodeType)));return zi.keysIterator(this.attributeMap.h)},elements:function(){if(this.nodeType!=R.Document&&this.nodeType!=R.Element)throw Ci.thrown("Bad node type, expected Element or Document but found "+(null==this.nodeType?"null":D.toString(this.nodeType)));for(var e=[],t=0,i=this.children;t<i.length;){var s=i[t];++t,s.nodeType==R.Element&&e.push(s)}return new Qi(e)},firstElement:function(){if(this.nodeType!=R.Document&&this.nodeType!=R.Element)throw Ci.thrown("Bad node type, expected Element or Document but found "+(null==this.nodeType?"null":D.toString(this.nodeType)));for(var e=0,t=this.children;e<t.length;){var i=t[e];if(++e,i.nodeType==R.Element)return i}return null},addChild:function(e){if(this.nodeType!=R.Document&&this.nodeType!=R.Element)throw Ci.thrown("Bad node type, expected Element or Document but found "+(null==this.nodeType?"null":D.toString(this.nodeType)));null!=e.parent&&e.parent.removeChild(e),this.children.push(e),e.parent=this},removeChild:function(e){if(this.nodeType!=R.Document&&this.nodeType!=R.Element)throw Ci.thrown("Bad node type, expected Element or Document but found "+(null==this.nodeType?"null":D.toString(this.nodeType)));return!!I.remove(this.children,e)&&!(e.parent=null)},toString:function(){return qi.print(this)},__class__:R};function n(){}(t["awe6.interfaces.IPauseable"]=n).__name__="awe6.interfaces.IPauseable",n.__isInterface__=!0,n.prototype={__class__:n};function r(){}(t["awe6.interfaces.IDisposable"]=r).__name__="awe6.interfaces.IDisposable",r.__isInterface__=!0,r.prototype={__class__:r};function a(){}(t["awe6.interfaces.IUpdateable"]=a).__name__="awe6.interfaces.IUpdateable",a.__isInterface__=!0,a.prototype={__class__:a};function _(){}(t["awe6.interfaces.IProcess"]=_).__name__="awe6.interfaces.IProcess",_.__isInterface__=!0,_.__interfaces__=[n,r,a];function o(e){this._kernel=e,this._tools=this._kernel.tools,this._isEntity=$i.__implements(this,y),this._init()}(t["awe6.core.Process"]=o).__name__="awe6.core.Process",o.__interfaces__=[_],o.prototype={_init:function(){this._isIsActiveSetterBypassed=!0,this.set_isActive(!0),this.isDisposed=!1,this._age=0,this._updates=0},dispose:function(){this.isDisposed||(this.isDisposed=!0,this.set_isActive(!1),this._disposer())},_disposer:function(){},getAge:function(e){return null==e&&(e=!0),e?this._age:this._updates},update:function(e){null==e&&(e=0),this.isActive&&!this.isDisposed&&(this._age+=e,this._updates++,this._updater(e))},_updater:function(e){null==e&&(e=0)},set_isActive:function(e){return this.isDisposed?this.isActive=!1:(e!=this.isActive&&(this._isIsActiveSetterBypassed?this.isActive=e:e?this.isActive||this.isDisposed||(this._resumer(),this._isIsActiveSetterBypassed=!0,this.set_isActive(!0),this._isEntity&&this._kernel.messenger.sendMessage(it.RESUME,this,!0,!0,!0)):this.isActive&&!this.isDisposed&&(this._pauser(),this._isIsActiveSetterBypassed=!0,this.set_isActive(!1),this._isEntity&&this._kernel.messenger.sendMessage(it.PAUSE,this,!0,!0,!0))),this._isIsActiveSetterBypassed=!1,this.isActive)},pause:function(){this.isActive&&!this.isDisposed&&(this._pauser(),this._isIsActiveSetterBypassed=!0,this.set_isActive(!1),this._isEntity&&this._kernel.messenger.sendMessage(it.PAUSE,this,!0,!0,!0))},_pauser:function(){},resume:function(){this.isActive||this.isDisposed||(this._resumer(),this._isIsActiveSetterBypassed=!0,this.set_isActive(!0),this._isEntity&&this._kernel.messenger.sendMessage(it.RESUME,this,!0,!0,!0))},_resumer:function(){},__class__:o,__properties__:{set_isActive:"set_isActive"}};function h(){}(t["awe6.interfaces.IAgendaManager"]=h).__name__="awe6.interfaces.IAgendaManager",h.__isInterface__=!0,h.prototype={__class__:h};function u(){}(t["awe6.interfaces.IEntityCollection"]=u).__name__="awe6.interfaces.IEntityCollection",u.__isInterface__=!0,u.__interfaces__=[h],u.prototype={__class__:u};function d(){}(t["awe6.interfaces.IViewable"]=d).__name__="awe6.interfaces.IViewable",d.__isInterface__=!0,d.prototype={__class__:d,__properties__:{get_view:"get_view"}};var y=function(){};(t["awe6.interfaces.IEntity"]=y).__name__="awe6.interfaces.IEntity",y.__isInterface__=!0,y.__interfaces__=[u,d,_],y.prototype={__class__:y,__properties__:{get_parent:"get_parent"}};function m(e,t,i){null==this.get_view()&&(this.view=new Ye(e,i,0,this)),this.set_id(null==t?e.tools.createGuid():t),o.call(this,e)}(t["awe6.core.Entity"]=m).__name__="awe6.core.Entity",m.__interfaces__=[y],m.__super__=o,m.prototype=e(o.prototype,{_init:function(){o.prototype._init.call(this),this.agenda=Je.ALWAYS,this._entityAgendaPairs=new Gi,this._isAgendaDirty=!0,this._cachedEntities=[]},_updater:function(e){null==e&&(e=0),o.prototype._updater.call(this,e),this._isAgendaDirty&&(this._cachedEntities=this._getEntities(this.get_agenda()),k.enumEq(this.get_agenda(),Je.ALWAYS)||(this._cachedEntities=this._cachedEntities.concat(this._getEntities(Je.ALWAYS))),this._isAgendaDirty=!1);for(var t=0,i=this._cachedEntities;t<i.length;){var s=i[t];++t,s.update(e)}},_disposer:function(){this.remove(),this._kernel.messenger.removeSubscribers(this),this._kernel.messenger.removeSubscribers(null,null,null,this,null);var e=this._getEntities();e.reverse();for(var t=0;t<e.length;){var i=e[t];++t,i.dispose()}for(i=this._entityAgendaPairs.iterator();i.hasNext();){var s=i.next();this._entityAgendaPairs.remove(s)}this.get_view().dispose(),o.prototype._disposer.call(this)},addEntity:function(e,t,i,s){if(null==s&&(s=0),null==i&&(i=!1),this.isDisposed||null==e)return null;null==t&&(t=Je.ALWAYS);for(var n=this._entityAgendaPairs.iterator();n.hasNext();){var r=n.next();if(r.entity==e&&k.enumEq(r.agenda,t))return e}this._isAgendaDirty=!0,e.get_parent()!=this&&(e.remove(i),e instanceof m&&e._setParent(this));var a=new A(e,t),_=this._entityAgendaPairs;return _.head=new Fi(a,_.head),i&&(k.enumEq(t,this.get_agenda())||t==Je.ALWAYS?this.get_view().addChild(e.get_view(),s):(e.get_view().set_priority(s),a.isAddedToView=!0)),e},removeEntity:function(e,t,i){if(null==i&&(i=!1),!this.isDisposed&&null!=e){for(var s=!1,n=this._entityAgendaPairs.iterator();n.hasNext();){var r=n.next();r.entity!=e||null!=t&&!k.enumEq(r.agenda,t)||(this._entityAgendaPairs.remove(r),s=!0)}s&&(this._isAgendaDirty=!0,e instanceof m&&e._setParent(null),i&&e.get_view().remove())}},remove:function(e){null==e&&(e=!1),null!=this.get_parent()&&this.get_parent().removeEntity(this,null,e)},getEntities:function(e){return this._getEntities(e)},_getEntities:function(e){if(!this._isAgendaDirty&&(null==e||k.enumEq(e,this.get_agenda())))return this._cachedEntities;for(var t=[],i=this._entityAgendaPairs.iterator();i.hasNext();){var s=i.next();null!=e&&!k.enumEq(e,s.agenda)||t.push(s.entity)}return t.reverse(),t},getEntitiesByClass:function(e,t,i,s,n){if(null==n&&(n=!1),null==s&&(s=!1),null==i&&(i=!1),n&&null!=this._kernel.scenes.get_scene())return this._kernel.scenes.get_scene().getEntitiesByClass(e,t,!0);for(var r=[],a=this._getEntities(t),_=0;_<a.length;){var o=a[_];++_,$i.__instanceof(o,e)&&r.push(o),i&&(r=r.concat(o.getEntitiesByClass(e,t,!0)))}return s&&null!=this.get_parent()&&(r=r.concat(this.get_parent().getEntitiesByClass(e,t,!1,!0))),r},setAgenda:function(e){if(null==e&&(e=Je.ALWAYS),k.enumEq(this.get_agenda(),e))return!1;this._isAgendaDirty=!0;for(var t=this._entityAgendaPairs.iterator();t.hasNext();){var i=t.next(),s=k.enumEq(this.get_agenda(),i.agenda)&&i.entity.get_view().get_parent()==this.get_view();s&&i.entity.get_view().remove(),i.isAddedToView=i.isAddedToView||s}this.agenda=e;for(t=this._entityAgendaPairs.iterator();t.hasNext();){(i=t.next()).isAddedToView&&(k.enumEq(Je.ALWAYS,i.agenda)||k.enumEq(this.get_agenda(),i.agenda))&&this.get_view().addChild(i.entity.get_view())}return!0},_setParent:function(e){this.parent=e},set_id:function(e){return this.id=e,this.id},get_agenda:function(){return this.agenda},get_parent:function(){return this.parent},get_view:function(){return this.view},__class__:m,__properties__:e(o.prototype.__properties__,{get_view:"get_view",get_parent:"get_parent",get_agenda:"get_agenda",set_id:"set_id"})});function E(){}(t["awe6.interfaces.IPositionable"]=E).__name__="awe6.interfaces.IPositionable",E.__isInterface__=!0,E.prototype={__class__:E,__properties__:{set_y:"set_y",set_x:"set_x"}};function w(e,t,i,s,n,r,a,_,o,h,l){null==a&&(a=0),null==r&&(r=0),null==n&&(n=20),null==s&&(s=100),this._stateUp=new v(e,t),this._stateOver=new v(e,i),this.x=r,this.y=a,this.set_width(s),this.set_height(n),this._keyType=_,this.onClickCallback=o,this.onRollOverCallback=h,this.onRollOutCallback=l,m.call(this,e)}(t["awe6.core.BasicButton"]=w).__name__="awe6.core.BasicButton",w.__interfaces__=[E],w.__super__=m,w.prototype=e(m.prototype,{_init:function(){m.prototype._init.call(this),this.get_view().set_x(this.x),this.get_view().set_y(this.y),this.isOver=!1,this.addEntity(this._stateUp,Je.SUB_TYPE(x.UP),!0),this.addEntity(this._stateOver,Je.SUB_TYPE(x.OVER),!0),this.setAgenda(Je.SUB_TYPE(x.UP))},_updater:function(e){null==e&&(e=0),m.prototype._updater.call(this,e);var t=this._kernel.inputs.mouse,i=this._isPointInsideRectangle(t.x+this.get_view().x-this.get_view().globalX,t.y+this.get_view().y-this.get_view().globalY,this.x,this.y,this.width,this.height);i&&t.set_cursorType(nt.BUTTON),i&&!this.isOver&&this.onRollOver(),!i&&this.isOver&&(t.set_cursorType(nt.AUTO),this.onRollOut()),this.isOver=i,this.isOver&&t.getIsButtonDown()&&this.setAgenda(Je.SUB_TYPE(x.OVER)),this.isOver&&t.getIsButtonRelease()&&this.onClick(),null!=this._keyType&&this._kernel.inputs.keyboard.getIsKeyRelease(this._keyType)&&this.onClick()},_isPointInsideRectangle:function(e,t,i,s,n,r){return!(e<i)&&(!(t<s)&&(!(i+n<e)&&!(s+r<t)))},onClick:function(){this.setAgenda(Je.SUB_TYPE(x.UP)),null!=this.onClickCallback&&this.onClickCallback()},onRollOver:function(){this.setAgenda(Je.SUB_TYPE(x.OVER)),null!=this.onRollOverCallback&&this.onRollOverCallback()},onRollOut:function(){this.setAgenda(Je.SUB_TYPE(x.UP)),null!=this.onRollOutCallback&&this.onRollOutCallback()},setPosition:function(e,t){this.set_x(e),this.set_y(t)},set_x:function(e){return this.x=e,null!=this.get_view()&&this.get_view().set_x(this.x),this.x},set_y:function(e){return this.y=e,null!=this.get_view()&&this.get_view().set_y(this.y),this.y},set_width:function(e){return this.width=e,this.width},set_height:function(e){return this.height=e,this.height},__class__:w,__properties__:e(m.prototype.__properties__,{set_height:"set_height",set_width:"set_width",set_y:"set_y",set_x:"set_x"})});var v=function(e,t){m.call(this,e),this.view=t};(t["awe6.core._BasicButton._HelperState"]=v).__name__="awe6.core._BasicButton._HelperState",v.__super__=m,v.prototype=e(m.prototype,{__class__:v});function S(){}var x=b["awe6.core._BasicButton._HelperEState"]={__ename__:"awe6.core._BasicButton._HelperEState",__constructs__:["UP","OVER"],UP:{_hx_index:0,__enum__:"awe6.core._BasicButton._HelperEState",toString:i},OVER:{_hx_index:1,__enum__:"awe6.core._BasicButton._HelperEState",toString:i}};(t["awe6.interfaces.IEncrypter"]=S).__name__="awe6.interfaces.IEncrypter",S.__isInterface__=!0,S.prototype={__class__:S};function C(e){this._defaultSecret=e}(t["awe6.core.Encrypter"]=C).__name__="awe6.core.Encrypter",C.__interfaces__=[S],C.prototype={decrypt:function(e,t){null==t&&(t="");var i=""!=t?t:this._defaultSecret;return this._xor(e,i)},_xor:function(e,t){for(var i=new Mi(new ArrayBuffer(e.length)),s=0,n=0,r=i.length;n<r;){var a=n++;i.b[a]=e.b[a]^I.cca(t,s),++s>=t.length&&(s=0)}return i},__class__:C};var A=function(e,t){this.entity=e,this.agenda=t,this.isAddedToView=!1};(t["awe6.core._Entity._HelperEntityAgendaPair"]=A).__name__="awe6.core._Entity._HelperEntityAgendaPair",A.prototype={__class__:A};function N(){}(t["awe6.interfaces.IInputJoypad"]=N).__name__="awe6.interfaces.IInputJoypad",N.__isInterface__=!0,N.prototype={__class__:N};function M(e,t,i,s,n,r,a,_,o,h,l,c,u,d){this._kernel=e,this._keyUp=null!=t?t:tt.UP,this._keyRight=null!=i?i:tt.RIGHT,this._keyDown=null!=s?s:tt.DOWN,this._keyLeft=null!=n?n:tt.LEFT,this._keyPrimary=null!=r?r:tt.SPACE,this._keySecondary=null!=a?a:tt.Z,this._keyUpAlt=null!=_?_:tt.W,this._keyRightAlt=null!=o?o:tt.D,this._keyDownAlt=null!=h?h:tt.S,this._keyLeftAlt=null!=l?l:tt.A,this._keyPrimaryAlt=null!=c?c:tt.Q,this._keySecondaryAlt=null!=u?u:tt.E,this._joypadTouchType=null!=d?d:this._kernel.factory.joypadTouchType,this._isTouchEnabled=this._kernel.factory.joypadTouchType!=et.DISABLED,this._joypadStateCache={age:0,isFire:!1,isUp:!1,isRight:!1,isDown:!1,isLeft:!1,isPrevFire:!1,isPrevUp:!1,isPrevRight:!1,isPrevDown:!1,isPrevLeft:!1}}(t["awe6.core.InputJoypad"]=M).__name__="awe6.core.InputJoypad",M.__interfaces__=[N],M.prototype={_checkKeyboard:function(e,t){switch(e._hx_index){case 0:return!!this._checkKeyboard($e.PRIMARY,t)||this._checkKeyboard($e.SECONDARY,t);case 1:return!!t(this._keyUp)||t(this._keyUpAlt);case 2:return!!t(this._keyRight)||t(this._keyRightAlt);case 3:return!!t(this._keyDown)||t(this._keyDownAlt);case 4:return!!t(this._keyLeft)||t(this._keyLeftAlt);case 5:return!!t(this._keyPrimary)||t(this._keyPrimaryAlt);case 6:return!!t(this._keySecondary)||t(this._keySecondaryAlt)}},getIsButtonDown:function(e){return!!this._checkKeyboard(e,ms(l=this._kernel.inputs.keyboard,l.getIsKeyDown))||!!this._isTouchEnabled&&this._checkTouchIsDown(e)},_getTouchButtonPosition:function(e){switch(e._hx_index){case 1:return{x:.5*this._kernel.factory.width,y:.25*this._kernel.factory.height};case 2:return{x:.75*this._kernel.factory.width,y:.5*this._kernel.factory.height};case 3:return{x:.5*this._kernel.factory.width,y:.75*this._kernel.factory.height};case 4:return{x:.25*this._kernel.factory.width,y:.5*this._kernel.factory.height};case 0:case 5:case 6:return{x:.5*this._kernel.factory.width,y:.5*this._kernel.factory.height}}},_getClosestTouchButton:function(e,t){null==e&&(e=this._mouse.x),null==t&&(t=this._mouse.y);var i=99999999,s=$e.FIRE,n=$e.FIRE,r=this._getTouchButtonPosition(n),a=this._kernel.tools.distance(e,t,r.x,r.y,!0);a<i&&(i=a,s=n);n=$e.UP,r=this._getTouchButtonPosition(n);(a=this._kernel.tools.distance(e,t,r.x,r.y,!0))<i&&(i=a,s=n);n=$e.RIGHT,r=this._getTouchButtonPosition(n);(a=this._kernel.tools.distance(e,t,r.x,r.y,!0))<i&&(i=a,s=n);n=$e.DOWN,r=this._getTouchButtonPosition(n);(a=this._kernel.tools.distance(e,t,r.x,r.y,!0))<i&&(i=a,s=n);n=$e.LEFT,r=this._getTouchButtonPosition(n);(a=this._kernel.tools.distance(e,t,r.x,r.y,!0))<i&&(i=a,s=n);n=$e.PRIMARY,r=this._getTouchButtonPosition(n);return(a=this._kernel.tools.distance(e,t,r.x,r.y,!0))<i&&(i=a,s=n),s},_getTouchState:function(){var e=null!=this._mouse||this._kernel.inputs.mouse instanceof Me&&(this._mouse=$i.__cast(this._kernel.inputs.mouse,Me),!0);if(!e||this._mouse.getAge()==this._joypadStateCache.age)return this._joypadStateCache;var t={age:this._mouse.getAge(),isFire:!1,isUp:!1,isRight:!1,isDown:!1,isLeft:!1,isPrevFire:this._joypadStateCache.isFire,isPrevUp:this._joypadStateCache.isUp,isPrevRight:this._joypadStateCache.isRight,isPrevDown:this._joypadStateCache.isDown,isPrevLeft:this._joypadStateCache.isLeft},i=this._joypadTouchType;switch(i._hx_index){case 1:var s=this._getClosestTouchButton();t.isFire=s==$e.FIRE&&this._mouse.getIsButtonRelease()&&this._mouse.getButtonDownDuration(null,!0,!0)<200,this._mouse.getIsButtonDown()&&(t.isUp=s==$e.UP,t.isRight=s==$e.RIGHT,t.isDown=s==$e.DOWN,t.isLeft=s==$e.LEFT);break;case 2:var n=i.distance;null==n&&(n=20),t.isFire=this._mouse.getIsButtonRelease()&&this._mouse.getButtonDownDuration(null,!0,!0)<200,t.isUp=this._mouse.getButtonDragHeight()<-n,t.isRight=this._mouse.getButtonDragWidth()>n,t.isDown=this._mouse.getButtonDragHeight()>n,t.isLeft=this._mouse.getButtonDragWidth()<-n;break;case 3:var r,a,_=i.speed;t.isFire=this._mouse.getIsButtonRelease()&&this._mouse.getButtonDownDuration(null,!0,!0)<200,this._kernel.inputs.mouse.getIsButtonDown()&&(null==_&&(_=100),r=this._mouse.getDeltaX(),a=this._mouse.getDeltaY(),t.isUp=a<-_,t.isRight=_<r,t.isDown=_<a,t.isLeft=r<-_)}return this._joypadStateCache=t,this._joypadStateCache},_checkTouchIsDown:function(e){var t=this._getTouchState();switch(e._hx_index){case 1:return t.isUp;case 2:return t.isRight;case 3:return t.isDown;case 4:return t.isLeft;case 0:case 5:case 6:return t.isFire}},__class__:M};function B(){}(t["awe6.interfaces.IResettable"]=B).__name__="awe6.interfaces.IResettable",B.__isInterface__=!0,B.prototype={__class__:B};function L(){}(t["awe6.interfaces.IInputManager"]=L).__name__="awe6.interfaces.IInputManager",L.__isInterface__=!0,L.__interfaces__=[B],L.prototype={__class__:L};function O(e){o.call(this,e)}(t["awe6.core.InputManager"]=O).__name__="awe6.core.InputManager",O.__interfaces__=[L],O.__super__=o,O.prototype=e(o.prototype,{_init:function(){o.prototype._init.call(this),this.joypad=this.createJoypad(),this.keyboard=this._inputKeyboard=new Ne(this._kernel),this.mouse=this._inputMouse=new Me(this._kernel)},_updater:function(e){null==e&&(e=0),o.prototype._updater.call(this,e);var t=this._inputKeyboard,i=e;null==i&&(i=0),t.isActive&&!t.isDisposed&&(t._age+=i,t._updates++,t._updater(i)),null==(i=e)&&(i=0),(t=this._inputMouse).isActive&&!t.isDisposed&&(t._age+=i,t._updates++,t._updater(i))},_disposer:function(){var e=this._inputKeyboard;e.isDisposed||(e.isDisposed=!0,e.set_isActive(!1),e._disposer()),(e=this._inputMouse).isDisposed||(e.isDisposed=!0,e.set_isActive(!1),e._disposer()),o.prototype._disposer.call(this)},createJoypad:function(e,t,i,s,n,r,a,_,o,h,l,c,u){return new M(this._kernel,e,t,i,s,n,r,a,_,o,h,l,c,u)},reset:function(){var e=this._inputKeyboard;return e.isDisposed||(e.isDisposed=!0,e.set_isActive(!1),e._disposer()),(e=this._inputMouse).isDisposed||(e.isDisposed=!0,e.set_isActive(!1),e._disposer()),this._init(),!0},__class__:O});function F(){}(t["awe6.interfaces.IMessageManager"]=F).__name__="awe6.interfaces.IMessageManager",F.__isInterface__=!0,F.__interfaces__=[B],F.prototype={__class__:F};function G(e){o.call(this,e)}(t["awe6.core.MessageManager"]=G).__name__="awe6.core.MessageManager",G.__interfaces__=[F],G.__super__=o,G.prototype=e(o.prototype,{_init:function(){o.prototype._init.call(this),this._isVerbose=!1,this._subscriptions=new Gi,this._messageQueue=new Hi},addSubscriber:function(e,t,i,s,n,r){null==r&&(r=!1);var a=new V(e,t,i,s,n,r),_=this._subscriptions;_.head=new Fi(a,_.head)},removeSubscribers:function(e,t,i,s,n){for(var r=this._getSubscriptions(e,t,i,s,n,!0).iterator();r.hasNext();){var a=r.next();this._subscriptions.remove(a),this._isVerbose&&Ai.trace("Removing "+U.string(a.sender)+":"+U.string(a.message),{fileName:"awe6/core/MessageManager.hx",lineNumber:80,className:"awe6.core.MessageManager",methodName:"removeSubscribers"})}},sendMessage:function(e,t,i,s,n){null==n&&(n=!1),null==s&&(s=!1),null==i&&(i=!1),this._sendMessage(e,t,t,i,s,n)},reset:function(){return this.removeSubscribers(),this._messageQueue=new Hi,!0},_updater:function(e){if(null==e&&(e=0),o.prototype._updater.call(this,e),this._isOkToSendMessage())for(var t=this._messageQueue.h;null!=t;){var i=t.item,t=t.next,s=i;this._sendMessage(s.message,s.sender,s.target,s.isBubbleDown,s.isBubbleUp,s.isBubbleEverywhere),this._messageQueue.remove(s)}},_isOkToSendMessage:function(){return null!=this._kernel.scenes.get_scene()},_sendMessage:function(e,t,i,s,n,r){if(null==r&&(r=!1),null==n&&(n=!1),null==s&&(s=!1),this._isVerbose&&Ai.trace("Sending message: "+U.string(e)+" from "+t.id+"("+U.string($i.getClass(t))+") via "+i.id+" ("+U.string($i.getClass(i))+")",{fileName:"awe6/core/MessageManager.hx",lineNumber:119,className:"awe6.core.MessageManager",methodName:"_sendMessage"}),this._isOkToSendMessage()){if(r){var a=this._kernel.scenes.get_scene().getEntities()[0];if(null!=a&&null!=a.get_parent())return void this._sendMessage(e,t,this._kernel.scenes.get_scene().getEntities()[0].get_parent(),!0)}for(var _=this._getSubscriptions(i,e,null,t).iterator();_.hasNext();){var o=_.next();if(!this._send(o,e,t))return}if(s)for(var h=i.getEntities(),l=0;l<h.length;){var c=h[l];++l,this._sendMessage(e,t,c,!0)}n&&null!=i.get_parent()&&$i.__implements(i.get_parent(),y)&&this._sendMessage(e,t,i.get_parent(),!1,!0)}else this._messageQueue.push(new H(e,t,i,s,n,r))},_send:function(e,t,i){var s=e.handler.apply(e.subscriber,[t,i]);return e.isRemovedAfterFirstSend&&this._subscriptions.remove(e),s},_getSubscriptions:function(e,t,i,s,n,r){null==r&&(r=!1);for(var a=new Gi,_=this._subscriptions.iterator();_.hasNext();){var o=_.next();if(null==e||e==o.subscriber||e==o.sender){if(null!=t&&!$i.__instanceof(t,o.messageClass)){var h=k.typeof(t);if(7==h._hx_index){var l;h.e;if(k.getEnum(t)!=k.getEnum(o.message)||(l=o.message,b[t.__enum__].__constructs__[t._hx_index]!=b[l.__enum__].__constructs__[l._hx_index])||k.enumParameters(t).toString()!=k.enumParameters(o.message).toString())continue}else if(t!=o.message)continue}if(null==i||T.compareMethods(o.handler,i)){if(null!=s){if(r){if(null!=o.senderClassType)continue;if(null==o.sender)continue}if(null!=o.senderClassType&&!$i.__instanceof(s,o.senderClassType))continue;if(null!=o.sender&&o.sender!=s)continue}a.head=new Fi(o,a.head)}}}return a},__class__:G});var V=function(e,t,i,s,n,r){null==r&&(r=!1),this.subscriber=e,this.message=t,this.handler=i,this.sender=s,this.senderClassType=n,this.isRemovedAfterFirstSend=r,this.messageClass=$i.getClass(t)};(t["awe6.core._MessageManager._HelperSubscription"]=V).__name__="awe6.core._MessageManager._HelperSubscription",V.prototype={__class__:V};var H=function(e,t,i,s,n,r){null==r&&(r=!1),null==n&&(n=!1),null==s&&(s=!1),this.message=e,this.sender=t,this.target=i,this.isBubbleDown=s,this.isBubbleUp=n,this.isBubbleEverywhere=r};(t["awe6.core._MessageManager._HelperMessage"]=H).__name__="awe6.core._MessageManager._HelperMessage",H.prototype={__class__:H};function Y(){}(t["awe6.interfaces.IScene"]=Y).__name__="awe6.interfaces.IScene",Y.__isInterface__=!0,Y.__interfaces__=[d,u,_],Y.prototype={__class__:Y};function j(e,t,i,s,n){null==n&&(n=!1),null==s&&(s=!0),null==i&&(i=!1),this.type=t,this.isPauseable=i,this.isMuteable=s,this.isSessionSavedOnNext=n,o.call(this,e)}(t["awe6.core.Scene"]=j).__name__="awe6.core.Scene",j.__interfaces__=[Y],j.__super__=o,j.prototype=e(o.prototype,{_init:function(){o.prototype._init.call(this),this.isDisposable=!0,this._entity=new m(this._kernel),this.view=this._entity.get_view()},_updater:function(e){null==e&&(e=0),o.prototype._updater.call(this,e),this._entity.update(e)},_disposer:function(){this._entity.dispose(),this.get_view().dispose(),o.prototype._disposer.call(this)},addEntity:function(e,t,i,s){return null==s&&(s=0),null==i&&(i=!1),this._entity.addEntity(e,t,i,s)},removeEntity:function(e,t,i){null==i&&(i=!1),this._entity.removeEntity(e,t,i)},getEntities:function(e){return this._entity.getEntities(e)},getEntitiesByClass:function(e,t,i,s,n){return null==n&&(n=!1),null==s&&(s=!1),null==i&&(i=!1),this._entity.getEntitiesByClass(e,t,i,s,!1)},get_view:function(){return this.view},setAgenda:function(e){return this._entity.setAgenda(e)},__class__:j,__properties__:e(o.prototype.__properties__,{get_view:"get_view"})});function z(){}(t["awe6.interfaces.ISceneManager"]=z).__name__="awe6.interfaces.ISceneManager",z.__isInterface__=!0,z.prototype={__class__:z,__properties__:{get_scene:"get_scene"}};function W(e){o.call(this,e)}(t["awe6.core.SceneManager"]=W).__name__="awe6.core.SceneManager",W.__interfaces__=[z],W.__super__=o,W.prototype=e(o.prototype,{_init:function(){o.prototype._init.call(this),this.view=new Ye(this._kernel)},_updater:function(e){null==e&&(e=0),o.prototype._updater.call(this,e),null!=this.get_scene()&&this.get_scene().update(e),null!=this._sceneTransition&&this._sceneTransition.update(e)},_disposer:function(){null!=this.get_scene()&&this.get_scene().dispose(),null!=this._sceneTransition&&this._sceneTransition.dispose(),this.view.dispose(),o.prototype._disposer.call(this)},setScene:function(e){var t,i=null;null!=this.get_scene()&&(i=this.get_scene().type,t=this._kernel.factory.createSceneTransition(e,i),null!=this._sceneTransition&&this._sceneTransition.dispose(),this._sceneTransition=t,this._kernel.inputs.reset(),this.get_scene().isDisposable&&(this.get_scene().dispose(),this._kernel.messenger.reset()),this.scene=null),this._kernel.overlay.hideButtons(),this.scene=this._kernel.factory.createScene(e),this._kernel.overlay.showButton(rt.BACK,null!=this._kernel.factory.getBackSceneType(this.get_scene().type)),this._kernel.overlay.showButton(rt.MUTE,this.get_scene().isMuteable&&!this._kernel.audio.isMute),this._kernel.overlay.showButton(rt.UNMUTE,this.get_scene().isMuteable&&this._kernel.audio.isMute),this._kernel.overlay.showButton(rt.PAUSE,this.get_scene().isPauseable&&this._kernel.isActive),this._kernel.overlay.showButton(rt.UNPAUSE,this.get_scene().isPauseable&&!this._kernel.isActive),this.view.addChild(this.get_scene().get_view()),null!=this._sceneTransition&&this.get_scene().get_view().addChild(this._sceneTransition.get_view(),this._tools.BIG_NUMBER+1)},back:function(){var e=this._kernel.factory.getBackSceneType(this.get_scene().type);null!=e&&this.setScene(e)},next:function(){this.get_scene().isSessionSavedOnNext&&null!=this._kernel.get_session()&&this._kernel.get_session().save();var e=this._kernel.factory.getNextSceneType(this.get_scene().type);null!=e&&this.setScene(e)},get_scene:function(){return this.scene},__class__:W,__properties__:e(o.prototype.__properties__,{get_scene:"get_scene"})});function K(){}(t["awe6.interfaces.ITextStyle"]=K).__name__="awe6.interfaces.ITextStyle",K.__isInterface__=!0,K.prototype={__class__:K};function X(e,t,i,s,n,r,a,_,o,h){null==o&&(o=0),null==n&&(n=!1),null==s&&(s=!1),this.font=null!=e?e:"_sans",this.size=null!=t?t:12,this.color=null!=i?i:0,this.isBold=s,this.isItalic=n,this.align=null!=r?r:_t.LEFT,this.spacingHorizontal=null!=a?a:0,this.spacingVertical=null!=_?_:0,this.thickness=o,this.filters=h}(t["awe6.core.TextStyle"]=X).__name__="awe6.core.TextStyle",X.__interfaces__=[K],X.prototype={toString:function(){return U.string(this.font+","+this.size+","+this.color+","+U.string(this.isBold)+","+U.string(this.isItalic)+","+U.string(this.align)+","+this.spacingHorizontal+","+this.spacingVertical+","+this.thickness+","+U.string(this.filters))},clone:function(){return new X(this.font,this.size,this.color,this.isBold,this.isItalic,this.align,this.spacingHorizontal,this.spacingVertical,this.thickness,this.filters)},__class__:X};function Q(){}(t["awe6.interfaces.ITools"]=Q).__name__="awe6.interfaces.ITools",Q.__isInterface__=!0,Q.__interfaces__=[S],Q.prototype={__class__:Q};function J(e){this._kernel=e,this.BIG_NUMBER=9999998,this._encrypter=this._kernel.factory.createEncrypter()}(t["awe6.core.Tools"]=J).__name__="awe6.core.Tools",J.__interfaces__=[Q],J.prototype={createGuid:function(e,t){return null==t&&(t=""),null==e&&(e=!1),e?t+I.substr(this._randomCharacter()+this._randomCharacter()+this._randomCharacter(),0,10):t+(this._randomCharacter()+this._randomCharacter()+"-"+this._randomCharacter()+"-"+this._randomCharacter()+"-"+this._randomCharacter()+"-"+this._randomCharacter()+this._randomCharacter()+this._randomCharacter())},_randomCharacter:function(){return I.substr(c.hex(65536*(1+Math.random())|0,1),1,null)},sortByPriority:function(e,t){var i=e.get_priority(),s=t.get_priority();return i<s?-1:s<i?1:0},_isCamelCase:function(e){return e.toUpperCase()!=e&&(!(-1<e.indexOf(" "))&&!(-1<e.indexOf("_")))},_isConstCase:function(e){return e.toUpperCase()==e&&!(-1<e.indexOf(" "))},fromCamelCase:function(e){if(null==e||""==e)return"";for(var t="",i=e.split(""),s="",n=0;n<i.length;){var r=i[n];++n,r.toLowerCase()!=r&&(t+=s),t+=r,s=" "}return t},toConstCase:function(e){if(null==e||""==e)return"";if(this._isConstCase(e))return e;this._isCamelCase(e)&&(e=this.fromCamelCase(e));return e=c.replace(e,"     "," "),e=c.replace(e,"    "," "),e=c.replace(e,"   "," "),e=c.replace(e,"  "," "),(e=c.replace(e," ","_")).toUpperCase()},limit:function(e,t,i){return i<e?i:e<t?t:e},getRandomType:function(e){return k.createEnumIndex(e,U.random(e.__constructs__.slice().length))},distance:function(e,t,i,s,n){null==n&&(n=!1);var r=i-e,a=s-t,_=r*r+a*a;return n?_:Math.sqrt(_)},shuffle:function(e){for(var t=e.slice(),i=t.length;1<i;){var s=U.random(i),n=t[--i];t[i]=t[s],t[s]=n}return t},convertUpdatesToFormattedTime:function(e,t){var i=Math.round(1e3*e/this._kernel.factory.targetFramerate);return this.convertAgeToFormattedTime(i,t)},convertAgeToFormattedTime:function(e,t){if(null==t&&(t="'"),e<0)return"99"+t+"99"+t+"99";for(var i=e/1e3,s=Math.floor(i),n=U.string(Math.floor(100*(i-s))),r=0;59<s;)++r,s-=60;for(99<r&&(r=99);n.length<2;)n="0"+n;var a=null==s?"null":""+s;s<10&&(a="0"+a);var _=null==r?"null":""+r;return r<10&&(_="0"+_),0==s&&(a="00"),0==r&&(_="00"),U.string(_+t+a+t+n)},serialize:function(e){return Ui.run(e)},unserialize:function(e){return Di.run(e)},decrypt:function(e,t){return null==t&&(t=""),this._encrypter.decrypt(e,t)},__class__:J};function Z(){}(t["awe6.interfaces.IAssetManager"]=Z).__name__="awe6.interfaces.IAssetManager",Z.__isInterface__=!0,Z.prototype={__class__:Z};function q(){}(t["awe6.interfaces.IAssetManagerProcess"]=q).__name__="awe6.interfaces.IAssetManagerProcess",q.__isInterface__=!0,q.__interfaces__=[_,Z];function $(e){o.call(this,e)}(t["awe6.core.drivers.AAssetManager"]=$).__name__="awe6.core.drivers.AAssetManager",$.__interfaces__=[q],$.__super__=o,$.prototype=e(o.prototype,{_init:function(){this._packageId=this._kernel.getConfig("settings.assets.packages.default"),null==this._packageId&&(this._packageId="assets"),o.prototype._init.call(this)},getAsset:function(e,t,i){return null==t&&(t=this._packageId),this._driverGetAsset(e,t,i)},_driverGetAsset:function(e,t,i){return null},__class__:$});function ee(){}(t["awe6.interfaces.IAudioManager"]=ee).__name__="awe6.interfaces.IAudioManager",ee.__isInterface__=!0,ee.prototype={__class__:ee,__properties__:{set_isMute:"set_isMute"}};function te(e){o.call(this,e)}(t["awe6.core.drivers.AAudioManager"]=te).__name__="awe6.core.drivers.AAudioManager",te.__interfaces__=[ee],te.__super__=o,te.prototype=e(o.prototype,{_init:function(){o.prototype._init.call(this),this._sounds=[],this._packageId=this._kernel.getConfig("settings.assets.packages.audio"),null==this._packageId&&(this._packageId=this._kernel.getConfig("settings.assets.packages.default")),null==this._packageId&&(this._packageId="assets.audio"),this.set_isMute(!1)},_updater:function(e){null==e&&(e=0),o.prototype._updater.call(this,e);for(var t=0,i=this._sounds;t<i.length;){var s=i[t];++t,s.isDisposed&&I.remove(this._sounds,s)}},_disposer:function(){for(var e=0,t=this._sounds;e<t.length;){var i=t[e];++e,i.dispose()}this.set_isMute(!1),o.prototype._disposer.call(this)},start:function(e,t,i,s,n,r,a,_){if((null==a&&(a=!1),null==r&&(r=0),null==n&&(n=1),null==s&&(s=0),null==i&&(i=1),null==t&&(t=Ze.DEFAULT),a)&&0!=this._getSounds(e,t).length)return;this._sounds.push(this._driverSoundFactory(e,t,i,s,n,r,_))},_driverSoundFactory:function(e,t,i,s,n,r,a){return null==r&&(r=0),null==n&&(n=1),null==s&&(s=0),null==i&&(i=1),new ie(this._kernel,e,this._packageId,t,i,s,n,r,a)},stop:function(e,t){for(var i=this._getSounds(e,t),s=0;s<i.length;){var n=i[s];++s,n.stop()}},transform:function(e,t,i,s,n){null==n&&(n=!1),null==s&&(s=0),null==i&&(i=1);for(var r=this._getSounds(e,t),a=0;a<r.length;){var _=r[a];++a,_.transform(i,s,n)}},set_isMute:function(e){return this.isMute=e,this._driverSetIsMute(e),this.isMute},_driverSetIsMute:function(e){},_getSounds:function(e,t){var i=[];if(null==e&&null==t)i=this._sounds.slice();else if(null==t)for(var s=0,n=this._sounds;s<n.length;){var r=n[s];++s,r.id==e&&i.push(r)}else if(null==e)for(s=0,n=this._sounds;s<n.length;){r=n[s];++s,k.enumEq(r.audioChannelType,t)&&i.push(r)}else for(s=0,n=this._sounds;s<n.length;){r=n[s];++s,r.id==e&&k.enumEq(r.audioChannelType,t)&&i.push(r)}return i},__class__:te,__properties__:e(o.prototype.__properties__,{set_isMute:"set_isMute"})});var ie=function(e,t,i,s,n,r,a,_,o){null==_&&(_=0),null==a&&(a=1),null==r&&(r=0),null==n&&(n=1),this._kernel=e,this.isDisposed=!1,this.id=t,this._packageId=i,this.audioChannelType=null!=s?s:Ze.DEFAULT,-1==n&&(n=this._kernel.tools.BIG_NUMBER),this._loops=n,this._startTime=r,this._volume=a,this._pan=_,this._onCompleteCallback=o,this._init()};(t["awe6.core.drivers._AHelperSound"]=ie).__name__="awe6.core.drivers._AHelperSound",ie.__interfaces__=[r],ie.prototype={_init:function(){this._driverInit()},_driverInit:function(){},transform:function(e,t,i){null==i&&(i=!1),null==t&&(t=0),null==e&&(e=1),this.isDisposed||(i?(this._volume=e,this._pan=t):(this._volume=this._kernel.tools.limit(e,0,1),this._pan=this._kernel.tools.limit(t,-1,1)),this._driverTransform(i))},_driverTransform:function(e){null==e&&(e=!1)},stop:function(){this._driverStop(),this.dispose()},_driverStop:function(){},dispose:function(){this.isDisposed||(this.isDisposed=!0,this._driverStop())},__class__:ie};function se(){}(t["awe6.interfaces.IFactory"]=se).__name__="awe6.interfaces.IFactory",se.__isInterface__=!0,se.prototype={__class__:se};function ne(e,t,i){null==t&&(t=!1),this._context=e,this.isDebug=t,this._config=i,this.config=new zi;var s=!0;null==s&&(s=!1),s&&(this.id="awe6",this.version="0.0.1",this.author="unknown",this.isDecached=!1,this.isEyeCandyOptionEnabled=!0,this.isFullScreenOptionEnabled=!0,this.isResetSessionsOptionEnabled=!0,this.width=600,this.height=400,this.bgColor=16711680,this.fullScreenType=qe.SCALE_ASPECT_RATIO_PRESERVE,this.joypadTouchType=et.DISABLED,this.secret="YouMustOverrideThis",this.targetFramerate=25,this.isFixedUpdates=!0,this.startingSceneType=at.GAME,this.keyPause=tt.P,this.keyMute=tt.M,this.keyNext=tt.SPACE,this.keyBack=tt.ESCAPE,this.keySpecial=tt.CONTROL),this._configurer(s),this._driverInit()}(t["awe6.core.drivers.AFactory"]=ne).__name__="awe6.core.drivers.AFactory",ne.__interfaces__=[r,se],ne.prototype={_driverInit:function(){null!=this._config&&"<?xml"==I.substr(this._config,0,5)&&this._traverseElements(R.parse(this._config).firstElement().elements(),""),this._launchKernel()},_traverseElements:function(e,t){0!=t.length&&(t+=".");for(var i=e;i.hasNext();){var s=i.next();if(s.nodeType!=R.Element)throw Ci.thrown("Bad node type, expected Element but found "+(null==s.nodeType?"null":D.toString(s.nodeType)));var n,r=t+s.nodeName;if(s.elements().hasNext()&&this._traverseElements(s.elements(),r),s.nodeType!=R.Document&&s.nodeType!=R.Element)throw Ci.thrown("Bad node type, expected Element or Document but found "+(null==s.nodeType?"null":D.toString(s.nodeType)));if(null!=s.children[0]){if(s.nodeType!=R.Document&&s.nodeType!=R.Element)throw Ci.thrown("Bad node type, expected Element or Document but found "+(null==s.nodeType?"null":D.toString(s.nodeType)));n="<![CDATA["==I.substr(qi.print(s.children[0]),0,9)}else n=!1;if(n){if(s.nodeType!=R.Document&&s.nodeType!=R.Element)throw Ci.thrown("Bad node type, expected Element or Document but found "+(null==s.nodeType?"null":D.toString(s.nodeType)));var a=s.children[0];if(s.nodeType!=R.Document&&s.nodeType!=R.Element)throw Ci.thrown("Bad node type, expected Element or Document but found "+(null==s.nodeType?"null":D.toString(s.nodeType)));var _=qi.print(s.children[0]).split("<![CDATA[").join("").split("]]>").join("");if(a.nodeType==R.Document||a.nodeType==R.Element)throw Ci.thrown("Bad node type, unexpected "+(null==a.nodeType?"null":D.toString(a.nodeType)));a.nodeValue=_}if(s.nodeType!=R.Document&&s.nodeType!=R.Element)throw Ci.thrown("Bad node type, expected Element or Document but found "+(null==s.nodeType?"null":D.toString(s.nodeType)));if(null==s.children[0])this.config.h[r]="";else{if(s.nodeType!=R.Document&&s.nodeType!=R.Element)throw Ci.thrown("Bad node type, expected Element or Document but found "+(null==s.nodeType?"null":D.toString(s.nodeType)));var o=s.children[0].nodeType;if(o!=R.Element&&o!=R.Document){var h,l=this.config;if(s.nodeType!=R.Document&&s.nodeType!=R.Element)throw Ci.thrown("Bad node type, expected Element or Document but found "+(null==s.nodeType?"null":D.toString(s.nodeType)));if(null==s.children[0])h="";else{if(s.nodeType!=R.Document&&s.nodeType!=R.Element)throw Ci.thrown("Bad node type, expected Element or Document but found "+(null==s.nodeType?"null":D.toString(s.nodeType)));var c=s.children[0];if(c.nodeType==R.Document||c.nodeType==R.Element)throw Ci.thrown("Bad node type, unexpected "+(null==c.nodeType?"null":D.toString(c.nodeType)));h=c.nodeValue}l.h[r]=h}else this.config.h[r]=""}for(var u=s.attributes();u.hasNext();){var d=u.next(),p=r+"."+d,g=this.config,f=s.get(d);g.h[p]=f}}},_configurer:function(e){null==e&&(e=!1)},_launchKernel:function(){var e;null==this._concreteKernel&&(null==(e=!1)&&(e=!1),e&&(this.id="awe6",this.version="0.0.1",this.author="unknown",this.isDecached=!1,this.isEyeCandyOptionEnabled=!0,this.isFullScreenOptionEnabled=!0,this.isResetSessionsOptionEnabled=!0,this.width=600,this.height=400,this.bgColor=16711680,this.fullScreenType=qe.SCALE_ASPECT_RATIO_PRESERVE,this.joypadTouchType=et.DISABLED,this.secret="YouMustOverrideThis",this.targetFramerate=25,this.isFixedUpdates=!0,this.startingSceneType=at.GAME,this.keyPause=tt.P,this.keyMute=tt.M,this.keyNext=tt.SPACE,this.keyBack=tt.ESCAPE,this.keySpecial=tt.CONTROL),this._configurer(e),this._concreteKernel=new Be(this,this._context))},_getAssetUrls:function(){for(var e=[],t=0;t<1e3;){var i="settings.assets.url"+t++;Object.prototype.hasOwnProperty.call(this.config.h,i)&&e.push(U.string(this.config.h[i]))}return e},onInitComplete:function(e){null==this._kernel&&null!=e&&(this._kernel=e,this._tools=this._kernel.tools,this.id=I.substr(this._tools.toConstCase(c.trim(this.id)),0,16),this.version=I.substr(c.trim(this.version),0,16),this.author=I.substr(c.trim(this.author),0,16))},createAssetManager:function(){return $i.__implements(this._kernel.assets,q)?$i.__cast(this._kernel.assets,q):new Ue(this._kernel)},createEncrypter:function(){return new C(this.secret)},createLogger:function(){return null},createOverlay:function(){return new Le(this._kernel)},createPreloader:function(){return new Oe(this._kernel,this._getAssetUrls(),this.isDecached)},createScene:function(e){return null==e&&(e=this.startingSceneType),new j(this._kernel,e)},createSceneTransition:function(e,t){return new Ge(this._kernel)},createSession:function(e){return new ke(this._kernel,e)},createTextStyle:function(e){return new X},getBackSceneType:function(e){return null},getNextSceneType:function(e){return null},dispose:function(){var e;this.isDisposed||null==this._concreteKernel||(this.isDisposed=!0,this._driverDisposer(),(e=this._concreteKernel).isDisposed||(e.isDisposed=!0,e.set_isActive(!1),e._disposer()),this._concreteKernel=null,this._kernel=null,this.config=null)},_driverDisposer:function(){},__class__:ne};function re(){}(t["awe6.interfaces.IInputKeyboard"]=re).__name__="awe6.interfaces.IInputKeyboard",re.__isInterface__=!0,re.prototype={__class__:re};function ae(e){o.call(this,e)}(t["awe6.core.drivers.AInputKeyboard"]=ae).__name__="awe6.core.drivers.AInputKeyboard",ae.__interfaces__=[re],ae.__super__=o,ae.prototype=e(o.prototype,{_init:function(){o.prototype._init.call(this),this._driverInit(),this._reset()},_driverInit:function(){},_updater:function(e){null==e&&(e=0),o.prototype._updater.call(this,e);for(var t=Object.create(null),i=[],s=0,n=this._buffer;s<n.length;){var r=n[s];++s;var a=null==r.keyCode?"null":""+r.keyCode;Object.prototype.hasOwnProperty.call(t,a)?i.push(r):r.isDown?this._keys[r.keyCode].isDown||(this._onDown(r.keyCode),t[a]=!0):this._keys[r.keyCode].isDown&&(this._onUp(r.keyCode),t[a]=!0)}this._buffer=i.slice();for(s=0,n=this._keys;s<n.length;){r=n[s];++s,r.isDown?r.updatesDown++:r.updatesUp++,r.isDown?r.timeDown+=e:r.timeUp+=e}},_disposer:function(){this._keys=null,o.prototype._disposer.call(this)},_addEvent:function(e,t){this._buffer.push(new oe(e,t))},_onDown:function(e){var t=this._keys[e];t.isUsed=!0,t.isDown=!0,t.timeUpPrevious=t.timeUp,t.updatesUpPrevious=t.updatesUp,t.updatesUp=0,t.timeUp=0},_onUp:function(e){var t=this._keys[e];t.isDown=!1,t.timeDownPrevious=t.timeDown,t.updatesDownPrevious=t.updatesDown,t.updatesDown=0,t.timeDown=0},_reset:function(e){this._buffer=[],this._keys=[];for(var t=0;t<256;){var i=t++;this._keys[i]=new _e(this._kernel)}},getIsKeyDown:function(e){if(null==e)return!1;var t=this.getKeyCode(e);return this._keys[t].isDown},getIsKeyPress:function(e){if(null==e)return!1;var t=this.getKeyCode(e);return 1==this._keys[t].updatesDown},getIsKeyRelease:function(e){if(null==e)return!1;var t=this.getKeyCode(e);return!!this._keys[t].isUsed&&1==this._keys[t].updatesUp},getKeyCode:function(e){switch(e._hx_index){case 0:return 144;case 1:return 12;case 2:return 47;case 3:return 18;case 4:return 8;case 5:return 20;case 6:return 17;case 7:return 46;case 8:return 40;case 9:return 35;case 10:return 13;case 11:return 27;case 12:return 112;case 13:return 121;case 14:return 122;case 15:return 123;case 16:return 124;case 17:return 125;case 18:return 126;case 19:return 113;case 20:return 114;case 21:return 115;case 22:return 116;case 23:return 117;case 24:return 118;case 25:return 119;case 26:return 120;case 27:return 36;case 28:return 45;case 29:return 37;case 30:return 96;case 31:return 97;case 32:return 98;case 33:return 99;case 34:return 100;case 35:return 101;case 36:return 102;case 37:return 103;case 38:return 104;case 39:return 105;case 40:return 107;case 41:return 110;case 42:return 111;case 43:return 108;case 44:return 106;case 45:return 109;case 46:return 34;case 47:return 33;case 48:return 39;case 49:return 16;case 50:return 32;case 51:return 9;case 52:return 38;case 53:return 65;case 54:return 66;case 55:return 67;case 56:return 68;case 57:return 69;case 58:return 70;case 59:return 71;case 60:return 72;case 61:return 73;case 62:return 74;case 63:return 75;case 64:return 76;case 65:return 77;case 66:return 78;case 67:return 79;case 68:return 80;case 69:return 81;case 70:return 82;case 71:return 83;case 72:return 84;case 73:return 85;case 74:return 86;case 75:return 87;case 76:return 88;case 77:return 89;case 78:return 90;case 79:return 48;case 80:return 49;case 81:return 50;case 82:return 51;case 83:return 52;case 84:return 53;case 85:return 54;case 86:return 55;case 87:return 56;case 88:return 57;case 89:return 186;case 90:return 187;case 91:return 189;case 92:return 191;case 93:return 222;case 94:return 219;case 95:return 221;case 96:return 220;case 97:return 192;case 98:return 223;case 99:return 0|e.value}},getKey:function(e){var t=tt.__constructs__.slice();t.pop();for(var i=0;i<t.length;){var s=t[i];++i;var n=k.createEnum(tt,s);if(this.getKeyCode(n)==e)return n}return tt.SUB_TYPE(e)},__class__:ae});var _e=function(e){this.isDown=!1,this.updatesDown=0,this.updatesUp=e.tools.BIG_NUMBER,this.timeDown=0,this.timeUp=e.tools.BIG_NUMBER,this.updatesDownPrevious=0,this.updatesUpPrevious=e.tools.BIG_NUMBER,this.timeDownPrevious=0,this.timeUpPrevious=e.tools.BIG_NUMBER};(t["awe6.core.drivers._AInputKeyboard._HelperKey"]=_e).__name__="awe6.core.drivers._AInputKeyboard._HelperKey",_e.prototype={__class__:_e};var oe=function(e,t){this.keyCode=e,this.isDown=t};(t["awe6.core.drivers._AInputKeyboard._HelperKeyEvent"]=oe).__name__="awe6.core.drivers._AInputKeyboard._HelperKeyEvent",oe.prototype={__class__:oe};function he(){}(t["awe6.interfaces.IInputMouse"]=he).__name__="awe6.interfaces.IInputMouse",he.__isInterface__=!0,he.prototype={__class__:he,__properties__:{set_cursorType:"set_cursorType"}};function le(e){o.call(this,e)}(t["awe6.core.drivers.AInputMouse"]=le).__name__="awe6.core.drivers.AInputMouse",le.__interfaces__=[he],le.__super__=o,le.prototype=e(o.prototype,{_init:function(){o.prototype._init.call(this),this._driverInit(),this.x=this.y=this._xPrev=this._yPrev=this._deltaX=this._deltaY=this.scroll=this._deltaScroll=0,this.relativeX=this.relativeY=this.relativeCentralisedX=this.relativeCentralisedY=0,this.isMoving=!1,this._buffer=[],this._getPosition(),this.isMoving=!1,this.set_isVisible(!0),this.scroll=0,this.set_cursorType(nt.AUTO),this._scrollPrev=0,this._stillUpdates=0,this._stillDuration=0,this._reset()},_driverInit:function(){},_updater:function(e){null==e&&(e=0),this._deltaTimePrev=e,o.prototype._updater.call(this,e),this._xPrev=this.x,this._yPrev=this.y,this._getPosition(),this._handleButton(st.LEFT,0<this._buffer.length?this._buffer.shift():this._buttonLeft.isDown,e),this._handleButton(st.MIDDLE,this._isMiddleDown(),e),this._handleButton(st.RIGHT,this._isRightDown(),e),this._deltaScroll=this.scroll-this._scrollPrev,this._scrollPrev=this.scroll,this._deltaX=this.x-this._xPrev,this._deltaY=this.y-this._yPrev,this.isMoving=this.x!=this._xPrev||this.y!=this._yPrev,this.isMoving?this._stillUpdates=this._stillDuration=0:(this._stillUpdates++,this._stillDuration+=e),this.relativeX=this.x/this._kernel.factory.width,this.relativeY=this.y/this._kernel.factory.height,this.relativeCentralisedX=2*(this.relativeX-.5),this.relativeCentralisedY=2*(this.relativeY-.5),this.isWithinBounds=this._isWithinBounds()},_isMiddleDown:function(){return!1},_isRightDown:function(){return!1},_isWithinBounds:function(){return!0},_getPosition:function(){this.x=0,this.y=0},_handleButton:function(e,t,i){null==i&&(i=0);var s=this._getButton(e);t?(s.isDown||(s.timeUpPrevious=s.timeUp,s.updatesUpPrevious=s.updatesUp,s.timeUp=s.updatesUp=0,s.clickX=this.x,s.clickY=this.y),s.timeDown+=i,s.updatesDown++,s.isDown=!0):(s.isDown&&(s.timeDownPrevious=s.timeDown,s.updatesDownPrevious=s.updatesDown,s.timeDown=s.updatesDown=0),s.timeUp+=i,s.updatesUp++,s.isDown=!1)},_disposer:function(){o.prototype._disposer.call(this)},_reset:function(e){this._buffer=[],this._buttonLeft=new ce(this._kernel),this._buttonMiddle=new ce(this._kernel),this._buttonRight=new ce(this._kernel)},_getButton:function(e){switch(null==e&&(e=st.LEFT),e._hx_index){case 0:return this._buttonLeft;case 1:return this._buttonMiddle;case 2:return this._buttonRight}},getDeltaX:function(e){null==e&&(e=!0);var t=this._deltaX;return e&&(t*=1e3/this._deltaTimePrev),Math.round(t)},getDeltaY:function(e){null==e&&(e=!0);var t=this._deltaY;return e&&(t*=1e3/this._deltaTimePrev),Math.round(t)},getIsButtonDown:function(e){return this._getButton(e).isDown},getIsButtonRelease:function(e){return 1==this._getButton(e).updatesUp},getButtonDownDuration:function(e,t,i){null==i&&(i=!1),null==t&&(t=!0);var s=this._getButton(e);return i?t?s.timeDownPrevious:s.updatesDownPrevious:t?s.timeDown:s.updatesDown},getButtonUpDuration:function(e,t,i){null==i&&(i=!1),null==t&&(t=!0);var s=this._getButton(e);return i?t?s.timeUpPrevious:s.updatesUpPrevious:t?s.timeUp:s.updatesUp},getButtonDragWidth:function(e){var t=this._getButton(e);return t.isDown?this.x-t.clickX:0},getButtonDragHeight:function(e){var t=this._getButton(e);return t.isDown?this.y-t.clickY:0},set_isVisible:function(e){return this.isVisible=e,this.isVisible},set_cursorType:function(e){return this.cursorType=e,this.cursorType},__class__:le,__properties__:e(o.prototype.__properties__,{set_cursorType:"set_cursorType",set_isVisible:"set_isVisible"})});var ce=function(e){this.isDown=!1,this.updatesDown=0,this.updatesUp=e.tools.BIG_NUMBER,this.timeDown=0,this.timeUp=e.tools.BIG_NUMBER,this.updatesDownPrevious=0,this.updatesUpPrevious=e.tools.BIG_NUMBER,this.timeDownPrevious=0,this.timeUpPrevious=e.tools.BIG_NUMBER};(t["awe6.core.drivers._AInputMouse._HelperButton"]=ce).__name__="awe6.core.drivers._AInputMouse._HelperButton",ce.prototype={__class__:ce};function ue(){}(t["awe6.interfaces.ILogger"]=ue).__name__="awe6.interfaces.ILogger",ue.__isInterface__=!0,ue.prototype={__class__:ue};function de(){}(t["awe6.interfaces.IKernel"]=de).__name__="awe6.interfaces.IKernel",de.__isInterface__=!0,de.__interfaces__=[ue,n],de.prototype={__class__:de,__properties__:{set_session:"set_session",get_session:"get_session",set_isFullScreen:"set_isFullScreen",set_isEyeCandy:"set_isEyeCandy"}};function pe(e,t){this.factory=e,this._context=t,this.tools=this._tools=new J(this),o.call(this,this)}(t["awe6.core.drivers.AKernel"]=pe).__name__="awe6.core.drivers.AKernel",pe.__interfaces__=[de],pe.__super__=o,pe.prototype=e(o.prototype,{_init:function(){o.prototype._init.call(this),this._view=new Ye(this,this._context,0,this),this._processes=new Hi,this._helperFramerate=new ge(this.factory.targetFramerate),this._isPreloaded=!1,this.isDebug=this.factory.isDebug,this.isLocal=this._driverGetIsLocal(),this._driverInit(),this.assets=this._assetManagerProcess=new Ue(this._kernel),this.audio=this._audioManager=new Pe(this._kernel),this.inputs=this._inputManager=new O(this._kernel),this.scenes=this._sceneManager=new W(this._kernel),this.messenger=this._messageManager=new G(this._kernel),this._view.addChild(this._sceneManager.view,1),this._addProcess(this._assetManagerProcess),this._addProcess(this._inputManager),this._addProcess(this._sceneManager),this._addProcess(this._messageManager),this._addProcess(this._audioManager),this.set_isEyeCandy(!0),this.set_isFullScreen(!1),this.factory.onInitComplete(this),this.set_session(this.factory.createSession()),this.get_session().reset(),this._preloader=this.factory.createPreloader(),this._addProcess(this._preloader),this._view.addChild(this._preloader.get_view(),2)},_driverGetIsLocal:function(){return!1},_driverInit:function(){},_driverDisposer:function(){},onPreloaderComplete:function(e){this._isPreloaded=!0,this._removeProcess(this._preloader),this._preloader=null,this._logger=this.factory.createLogger();var t=this.factory.createAssetManager();t!=this._assetManagerProcess&&(this._removeProcess(this._assetManagerProcess),this.assets=this._assetManagerProcess=t,this._addProcess(this._assetManagerProcess,!1)),this.overlay=this._overlayProcess=this.factory.createOverlay(),this._addProcess(this._overlayProcess,!0),this._view.addChild(this._overlayProcess.get_view(),3),this.isDebug&&(this._addProcess(this._profiler=new Fe(this)),this._view.addChild(this._profiler.get_view(),this._tools.BIG_NUMBER)),this.scenes.setScene(this.factory.startingSceneType),this.overlay.flash()},_updater:function(e){null==e&&(e=0),this._helperFramerate.update();var t=this.factory.isFixedUpdates?1e3/this.factory.targetFramerate|0:this._helperFramerate.timeInterval;o.prototype._updater.call(this,t);for(var i=this._processes.h;null!=i;){var s=i.item,i=i.next;s.update(t)}var n=this._view;null==(e=t)&&(e=0),n.isActive&&!n.isDisposed&&(n._age+=e,n._updates++,n._updater(e))},_disposer:function(){for(var e=this._processes.h;null!=e;){var t=e.item,e=e.next;this._removeProcess(t)}$i.__implements(this.factory,r)&&$i.__cast(this.factory,r).dispose(),this.factory=null;var i=this._view;i.isDisposed||(i.isDisposed=!0,i.set_isActive(!1),i._disposer()),this._view=null,this._driverDisposer(),this.assets=this._assetManagerProcess=null,this.audio=this._audioManager=null,this.inputs=this._inputManager=null,this.scenes=this._sceneManager=null,this.messenger=this._messageManager=null,this.overlay=this._overlayProcess=null,this.tools=this._tools=null,this._logger=null,this._preloader=null,this.set_session(null),o.prototype._disposer.call(this)},getConfig:function(e){return Object.prototype.hasOwnProperty.call(this.factory.config.h,e)?this.factory.config.h[e]:null},log:function(e){null!=this._logger?this._logger.log(e):this.isDebug&&Ai.trace("LOG: "+U.string(e),{fileName:"awe6/core/drivers/AKernel.hx",lineNumber:248,className:"awe6.core.drivers.AKernel",methodName:"log"})},getFramerate:function(e){return null==e&&(e=!0),e?this._helperFramerate.framerate:this.factory.targetFramerate},_addProcess:function(e,t){null==t&&(t=!0),null!=e&&(t?this._processes.add(e):this._processes.push(e))},_removeProcess:function(e){return null!=e&&(e.dispose(),this._processes.remove(e))},set_isEyeCandy:function(e){return this.factory.isEyeCandyOptionEnabled?(this.isEyeCandy=e,this._driverSetIsEyeCandy(e)):this.isEyeCandy=!0,this.isEyeCandy},_driverSetIsEyeCandy:function(e){},set_isFullScreen:function(e){return!this.factory.isFullScreenOptionEnabled||k.enumEq(this.factory.fullScreenType,qe.DISABLED)?this.isFullScreen=!1:(this.isFullScreen=e,this._driverSetIsFullScreen(e)),this.isFullScreen},_driverSetIsFullScreen:function(e){},_pauser:function(){o.prototype._pauser.call(this),null!=this.scenes.get_scene()&&this.scenes.get_scene().pause()},_resumer:function(){o.prototype._resumer.call(this),null!=this.scenes.get_scene()&&this.scenes.get_scene().resume()},get_session:function(){return this.session},set_session:function(e){return this.session=e,this.get_session()},__class__:pe,__properties__:e(o.prototype.__properties__,{set_session:"set_session",get_session:"get_session",set_isFullScreen:"set_isFullScreen",set_isEyeCandy:"set_isEyeCandy"})});var ge=function(e){this.framerate=e,this._timeAtLastUpdate=I.now()/1e3*1e3|0};(t["awe6.core.drivers._AKernel._HelperFramerate"]=ge).__name__="awe6.core.drivers._AKernel._HelperFramerate",ge.prototype={update:function(){this.timeInterval=(I.now()/1e3*1e3|0)-this._timeAtLastUpdate,this.framerate=1e3/this.timeInterval,this._timeAtLastUpdate=I.now()/1e3*1e3|0},__class__:ge};function fe(){}(t["awe6.interfaces.IOverlay"]=fe).__name__="awe6.interfaces.IOverlay",fe.__isInterface__=!0,fe.prototype={__class__:fe,__properties__:{get_pauseEntity:"get_pauseEntity"}};function ye(){}(t["awe6.interfaces.IOverlayProcess"]=ye).__name__="awe6.interfaces.IOverlayProcess",ye.__isInterface__=!0,ye.__interfaces__=[d,_,fe];function me(e,t,i,s,n,r,a,_,o,h,l,c,u,d,p,g,f){null==f&&(f=.35),null==g&&(g=0),null==p&&(p=8),null==i&&(i=30),null==t&&(t=30),null==s&&(s=new Ye(e)),null==n&&(n=new Ye(e)),null==r&&(r=new Ye(e)),null==a&&(a=new Ye(e)),null==_&&(_=new Ye(e)),null==o&&(o=new Ye(e)),null==h&&(h=new Ye(e)),null==l&&(l=new Ye(e)),null==c&&(c=new Ye(e)),null==u&&(u=new Ye(e)),null==d&&(d=new Ye(e)),this._borderView=s,this._buttonBack=new w(e,n,r,t,i),this._buttonMute=new w(e,a,_,t,i),this._buttonUnmute=new w(e,o,h,t,i),this._buttonPause=new w(e,l,c,t,i),this._buttonUnpause=new w(e,u,d,t,i),this._pauseBlur=p,this._pauseColor=g,this._pauseAlpha=f,this._context=new createjs.Container,m.call(this,e,null,this._context)}(t["awe6.core.drivers.AOverlay"]=me).__name__="awe6.core.drivers.AOverlay",me.__interfaces__=[ye],me.__super__=m,me.prototype=e(m.prototype,{_init:function(){m.prototype._init.call(this),this.get_view().addChild(this._borderView,4),this._wasMute=this._kernel.audio.isMute,this._driverInit(),this._progressView=new Ye(this._kernel,this._progressContext),this._progressView.set_isVisible(!1),this._pauseView=new Ye(this._kernel,this._pauseContext),this._pauseView.set_isVisible(!1),this._flashView=new Ye(this._kernel,this._flashContext),this._flashView.set_isVisible(!1),this._flashStartingAlpha=1,this._flashAsTime=!0,this._flashDuration=this._flashStartingDuration=100;var e=ms(this,this.activateButton),t=rt.BACK,i=function(){e(t)};this._buttonBack.onClickCallback=i;var s=ms(this,this.activateButton),n=rt.MUTE,i=function(){s(n)};this._buttonMute.onClickCallback=i;var r=ms(this,this.activateButton),a=rt.PAUSE,i=function(){r(a)};this._buttonPause.onClickCallback=i;var _=ms(this,this.activateButton),o=rt.UNMUTE,i=function(){_(o)};this._buttonUnmute.onClickCallback=i;var h=ms(this,this.activateButton),l=rt.UNPAUSE,i=function(){h(l)};this._buttonUnpause.onClickCallback=i,this.get_view().addChild(this._flashView,1),this.get_view().addChild(this._pauseView,2),this.get_view().addChild(this._progressView,3),this.addEntity(this._buttonBack,null,!0,21),this.addEntity(this._buttonUnmute,null,!0,22),this.addEntity(this._buttonMute,null,!0,23),this.addEntity(this._buttonUnpause,null,!0,24),this.addEntity(this._buttonPause,null,!0,25);var c=this._buttonBack.height,u=this._buttonBack.width,d=this._kernel.factory.width-4*u,p=c;this.positionButton(rt.BACK,d,p),this.positionButton(rt.MUTE,d+=u,p),this.positionButton(rt.UNMUTE,d,p),this.positionButton(rt.PAUSE,d+=u,p),this.positionButton(rt.UNPAUSE,d,p)},_driverInit:function(){this._progressContext=new createjs.Container,this._pauseContext=new createjs.Container,this._flashContext=new createjs.Container},_updater:function(e){var t;null==e&&(e=0),m.prototype._updater.call(this,e),0<this._flashDuration&&(this._flashDuration-=this._flashAsTime?e:1,t=this._flashStartingAlpha*(this._flashDuration/this._flashStartingDuration),this._flashAlpha=1<t?1:t<0?0:t),this._flashView.set_isVisible(0<this._flashAlpha),null!=this._kernel.factory.keyBack&&this._kernel.inputs.keyboard.getIsKeyPress(this._kernel.factory.keyBack)&&this.activateButton(this._kernel.isActive?rt.BACK:rt.UNPAUSE),null!=this._kernel.factory.keyPause&&this._kernel.inputs.keyboard.getIsKeyPress(this._kernel.factory.keyPause)&&this.activateButton(this._kernel.isActive?rt.PAUSE:rt.UNPAUSE),null!=this._kernel.factory.keyMute&&this._kernel.inputs.keyboard.getIsKeyPress(this._kernel.factory.keyMute)&&this.activateButton(this._kernel.audio.isMute?rt.UNMUTE:rt.MUTE),null==this.get_pauseEntity()||this._kernel.isActive||(this.get_pauseEntity().update(e),this._pauseView.update(e))},_disposer:function(){null!=this.get_pauseEntity()&&this.get_pauseEntity().dispose(),this.get_view().dispose(),m.prototype._disposer.call(this)},_getButton:function(e){switch(e._hx_index){case 0:return this._buttonBack;case 1:return this._buttonMute;case 2:return this._buttonUnmute;case 3:return this._buttonPause;case 4:return this._buttonUnpause;case 5:e.value;return null}},showButton:function(e,t){null==t&&(t=!0);var i=this._getButton(e);null!=i&&(t?this.addEntity(i,null,!0):this.removeEntity(i,null,!0))},positionButton:function(e,t,i,s,n){var r=this._getButton(e);null!=r&&(r.set_x(t),r.set_y(i),null!=s&&r.set_width(s),null!=n&&r.set_height(n))},hideButtons:function(){this.showButton(rt.BACK,!1),this.showButton(rt.MUTE,!1),this.showButton(rt.UNMUTE,!1),this.showButton(rt.PAUSE,!1),this.showButton(rt.UNPAUSE,!1)},flash:function(e,t,i,s){null==s&&(s=16777215),null==i&&(i=1),null==t&&(t=!0),null==e&&(e=t?500:.5*this._kernel.factory.targetFramerate),this._flashDuration=this._flashStartingDuration=e,this._flashAsTime=t,this._flashAlpha=this._flashStartingAlpha=1<i?1:i<0?0:i},activateButton:function(e){switch(e._hx_index){case 0:this._buttonBack.get_view().get_isInViewStack()&&(this._kernel.isActive||this.activateButton(rt.UNPAUSE),this._drawPause(!1),this._kernel.resume(),this._kernel.scenes.back());break;case 1:this._buttonMute.get_view().get_isInViewStack()&&(this.showButton(rt.MUTE,!1),this.showButton(rt.UNMUTE,!0),this._kernel.audio.set_isMute(!0));break;case 2:this._buttonUnmute.get_view().get_isInViewStack()&&!this._buttonUnpause.get_view().get_isInViewStack()&&(this.showButton(rt.MUTE,!0),this.showButton(rt.UNMUTE,!1),this._kernel.audio.set_isMute(!1));break;case 3:this._buttonPause.get_view().get_isInViewStack()&&(this._kernel.pause(),this._drawPause(!0),this._wasMute=this._kernel.audio.isMute,this.showButton(rt.PAUSE,!1),this.showButton(rt.UNPAUSE,!0),this.activateButton(rt.MUTE));break;case 4:this._buttonUnpause.get_view().get_isInViewStack()&&(this.showButton(rt.PAUSE,!0),this.showButton(rt.UNPAUSE,!1),this.activateButton(this._wasMute?rt.MUTE:rt.UNMUTE),this._kernel.resume(),this._drawPause(!1));break;case 5:e.value}},_drawPause:function(e){null==e&&(e=!0),this._pauseView.set_isVisible(e)},get_pauseEntity:function(){return this.pauseEntity},set_pauseEntity:function(e){return null!=this.get_pauseEntity()&&this.get_pauseEntity().get_view().remove(),this.pauseEntity=e,this._pauseView.addChild(this.get_pauseEntity().get_view()),this.get_pauseEntity()},__class__:me,__properties__:e(m.prototype.__properties__,{set_pauseEntity:"set_pauseEntity",get_pauseEntity:"get_pauseEntity"})});function Ee(){}(t["awe6.interfaces.IProgress"]=Ee).__name__="awe6.interfaces.IProgress",Ee.__isInterface__=!0;function we(){}(t["awe6.interfaces.IPreloader"]=we).__name__="awe6.interfaces.IPreloader",we.__isInterface__=!0,we.__interfaces__=[Ee,d,_];function ve(e,t,i){null==i&&(i=!1),this._assets=t,this._isDecached=i,o.call(this,e)}(t["awe6.core.drivers.APreloader"]=ve).__name__="awe6.core.drivers.APreloader",ve.__interfaces__=[we],ve.__super__=o,ve.prototype=e(o.prototype,{_init:function(){o.prototype._init.call(this),this.progress=0,null==this.get_view()&&(this.view=new Ye(this._kernel)),this._encrypter=this._tools,this._currentProgress=0,this._currentAsset=0,this._isComplete=!1,0<this._assets.length&&this._next()},_next:function(){if(this._currentAsset++,this._currentAsset>this._assets.length){if(!this._isComplete){try{var e=ms(l=this._kernel,l.onPreloaderComplete),t=this;Pi.delay(function(){e(t)},100)}catch(e){}this._isComplete=!0}}else this._driverLoad(this._assets[this._currentAsset-1]),this._currentProgress=0},_driverLoad:function(e){},_updater:function(e){null==e&&(e=0),o.prototype._updater.call(this,e),0==this._assets.length&&this._kernel.onPreloaderComplete(this),this.get_view().set_isVisible(100<this._age)},_disposer:function(){this.get_view().dispose(),this._driverDisposer(),o.prototype._disposer.call(this)},_driverDisposer:function(){},get_view:function(){return this.view},__class__:ve,__properties__:e(o.prototype.__properties__,{get_view:"get_view"})});function Se(e){this._context=new createjs.Container,m.call(this,e,null,this._context)}(t["awe6.core.drivers.AProfiler"]=Se).__name__="awe6.core.drivers.AProfiler",Se.__super__=m,Se.prototype=e(m.prototype,{_init:function(){m.prototype._init.call(this),this._marginHeight=25,this._marginColor=128,this._backgroundColor=-2147483520,this._fpsColor=16777215,this._memoryColor=16744448,this._fpsLabel="FPS",this._memoryLabel="MBs",this._width=60,this._height=50,this._agePrev=0},_updater:function(e){null==e&&(e=0),m.prototype._updater.call(this,e),this._age<this._agePrev+250||(this._agePrev=this._age,this._driverUpdate())},_driverUpdate:function(){},__class__:Se});function xe(){}(t["awe6.interfaces.ISceneTransition"]=xe).__name__="awe6.interfaces.ISceneTransition",xe.__isInterface__=!0,xe.__interfaces__=[d,Ee,_];function be(e,t){null==t&&(t=500),this._duration=t,this._context=new createjs.Container,m.call(this,e,null,this._context)}(t["awe6.core.drivers.ASceneTransition"]=be).__name__="awe6.core.drivers.ASceneTransition",be.__interfaces__=[xe],be.__super__=m,be.prototype=e(m.prototype,{_init:function(){m.prototype._init.call(this)},_updater:function(e){null==e&&(e=0),m.prototype._updater.call(this,e),this._age>this._duration&&(this.isDisposed||(this.isDisposed=!0,this.set_isActive(!1),this._disposer()))},get_progress:function(){var e=this._age/this._duration;return 1<e?1:e<0?0:e},__class__:be,__properties__:e(m.prototype.__properties__,{get_progress:"get_progress"})});function Te(){}(t["awe6.interfaces.ISession"]=Te).__name__="awe6.interfaces.ISession",Te.__isInterface__=!0,Te.prototype={__class__:Te};var ke=function(e,t){null==t&&(t=""),this._kernel=e,""==t&&(t="DEBUG_AWE6"),this.id=t,this._tools=this._kernel.tools,this._version=1,this._init()};(t["awe6.core.drivers.ASession"]=ke).__name__="awe6.core.drivers.ASession",ke.__interfaces__=[Te],ke.prototype={_init:function(){this._driverLoad(),T.field(this._savedData,"_____VERSION")!=this._version&&this._driverReset();var e=null!=T.field(this._savedData,this.id);this._data={},this._resetter(),this._setter(),e&&(this._data=T.field(this._savedData,this.id),this._getter(),this.loadCount++)},_driverLoad:function(){this._savedData={}},_driverSave:function(){},_driverReset:function(){this._savedData={}},_getter:function(){this.loadCount=this._data.loadCount,this.saveCount=this._data.saveCount},_setter:function(){this._data.loadCount=this.loadCount,this._data.saveCount=this.saveCount},_resetter:function(){this.loadCount=0,this.saveCount=0},reset:function(e){null==e&&(e=!1),this._data={},this._resetter(),this._setter(),e&&(this.saveCount++,this._setter(),this._savedData._____VERSION=this._version,this._savedData[this.id]=this._data,this._driverSave())},save:function(){this.saveCount++,this._setter(),this._savedData._____VERSION=this._version,this._savedData[this.id]=this._data,this._driverSave()},__class__:ke};function Ce(){}(t["awe6.interfaces.IPriority"]=Ce).__name__="awe6.interfaces.IPriority",Ce.__isInterface__=!0,Ce.prototype={__class__:Ce,__properties__:{set_priority:"set_priority",get_priority:"get_priority"}};function Ae(){}(t["awe6.interfaces.IView"]=Ae).__name__="awe6.interfaces.IView",Ae.__isInterface__=!0,Ae.__interfaces__=[a,r,E,Ce],Ae.prototype={__class__:Ae,__properties__:{get_isInViewStack:"get_isInViewStack",set_isVisible:"set_isVisible",get_parent:"get_parent"}};function Ie(e,t,i,s){null==i&&(i=0),this.context=t,this.set_priority(i),this.owner=s,o.call(this,e)}(t["awe6.core.drivers.AView"]=Ie).__name__="awe6.core.drivers.AView",Ie.__interfaces__=[Ae],Ie.__super__=o,Ie.prototype=e(o.prototype,{_init:function(){o.prototype._init.call(this),this.globalX=0,this.globalY=0,this.set_x(0),this.set_y(0),this.set_isVisible(!0),this._isDirty=!0,this._children=[]},addChild:function(e,t){return null==t&&(t=0),this.isDisposed||null==e?null:(e.get_parent()!=this&&(e.remove(),e instanceof Ie&&(i=e,this._children.push(i),i._setParent(this))),0!=t&&e.set_priority(t),this._isDirty=!0,e);var i},removeChild:function(e){if(!this.isDisposed&&null!=e){if(e instanceof Ie){var t=e;if(t.get_parent()!=this)return;I.remove(this._children,t),t._setParent(null)}this._isDirty=!0}},remove:function(){null!=this.get_parent()&&this.get_parent().removeChild(this)},clear:function(){for(var e=0,t=this._children;e<t.length;){var i=t[e];++e,this.removeChild(i)}},_updater:function(e){null==e&&(e=0),o.prototype._updater.call(this,e);for(var t=0,i=this._children;t<i.length;){var s=i[t];++t;var n=e;null==n&&(n=0),s.isActive&&!s.isDisposed&&(s._age+=n,s._updates++,s._updater(n))}this._isDirty&&this._draw(),this.globalX=null==this.get_parent()?this.x:this.x+this.get_parent().globalX,this.globalY=null==this.get_parent()?this.y:this.y+this.get_parent().globalY},_disposer:function(){this.remove(),this._driverDisposer(),this.clear(),o.prototype._disposer.call(this)},_driverDisposer:function(){},_draw:function(){this.isDisposed||(this._children.sort(ms(l=this._tools,l.sortByPriority)),this._driverDraw(),this._isDirty=!1)},_driverDraw:function(){},_setParent:function(e){this.parent=e},get_priority:function(){return this.priority},set_priority:function(e){return e==this.get_priority()||(this.priority=e,this.get_parent()instanceof Ie&&(null!=(t=this.get_parent())&&(t._isDirty=!0))),this.get_priority();var t},set_isVisible:function(e){return e==this.isVisible||(this.isVisible=e,this.get_parent()instanceof Ie&&(null!=(t=this.get_parent())&&t._draw())),this.isVisible;var t},get_parent:function(){return this.parent},get_isInViewStack:function(){return!!this.isVisible&&(this.owner==this._kernel||null!=this.get_parent()&&this.get_parent().get_isInViewStack())},set_x:function(e){return this.x=e,this.globalX=null==this.get_parent()?this.x:this.x+this.get_parent().globalX,this.x},set_y:function(e){return this.y=e,this.globalY=null==this.get_parent()?this.y:this.y+this.get_parent().globalY,this.y},__class__:Ie,__properties__:e(o.prototype.__properties__,{get_parent:"get_parent",get_isInViewStack:"get_isInViewStack",set_isVisible:"set_isVisible",set_y:"set_y",set_x:"set_x",set_priority:"set_priority",get_priority:"get_priority"})});var Ue=function(e){$.call(this,e)};(t["awe6.core.drivers.createjs.AssetManager"]=Ue).__name__="awe6.core.drivers.createjs.AssetManager",Ue.__super__=$,Ue.prototype=e($.prototype,{_driverGetAsset:function(e,t,i){var s=null;return null!=Ue.loadQueue&&(s=Ue.loadQueue.getResult(e)),s},__class__:Ue});var Pe=function(e){te.call(this,e)};(t["awe6.core.drivers.createjs.AudioManager"]=Pe).__name__="awe6.core.drivers.createjs.AudioManager",Pe.__super__=te,Pe.prototype=e(te.prototype,{_init:function(){te.prototype._init.call(this),this._visibilityWasMute=this.isMute,window.document.addEventListener("visibilitychange",ms(this,this._onVisibilityChange))},_disposer:function(){window.document.removeEventListener("visibilitychange",ms(this,this._onVisibilityChange)),te.prototype._disposer.call(this)},_driverSoundFactory:function(e,t,i,s,n,r,a){return null==r&&(r=0),null==n&&(n=1),null==s&&(s=0),null==i&&(i=1),new Re(this._kernel,e,this._packageId,t,i,s,n,r,a)},_driverSetIsMute:function(e){try{createjs.Sound.muted=e}catch(e){}try{createjs.Sound.setMute(e)}catch(e){}},_onVisibilityChange:function(e){this._getVisibilityPropery()?(this._visibilityWasMute=this.isMute,this.set_isMute(!0)):this.set_isMute(this._visibilityWasMute)},_getVisibilityPropery:function(){for(var e=["hidden","mozHidden","msHidden","oHidden","webkitHidden"],t=0;t<e.length;){var i=e[t];++t;var s=window.document;if(Object.prototype.hasOwnProperty.call(s,i))return T.field(window.document,i)}return window.document.hidden},__class__:Pe});var Re=function(e,t,i,s,n,r,a,_,o){null==_&&(_=0),null==a&&(a=1),null==r&&(r=0),null==n&&(n=1),ie.call(this,e,t,i,s,1==n?0:n,r,a,_,o)};(t["awe6.core.drivers.createjs._HelperSound"]=Re).__name__="awe6.core.drivers.createjs._HelperSound",Re.__super__=ie,Re.prototype=e(ie.prototype,{_driverInit:function(){try{this._sound=createjs.Sound.play("assets.audio."+this.id,null,0,this._startTime,this._loops,this._volume,this._pan),createjs.WebAudioPlugin.context&&"suspended"==createjs.WebAudioPlugin.context.state&&createjs.WebAudioPlugin.context.resume()}catch(e){}null!=this._sound?(this._sound.addEventListener("complete",ms(this,this._onSoundComplete)),this._driverTransform()):this.dispose()},_driverTransform:function(e){null==e&&(e=!1),null!=this._sound&&(e&&(this._volume*=this._sound.volume,this._pan*=this._sound.pan),this._sound.volume=this._volume,this._sound.pan=this._pan)},_driverStop:function(){if(null!=this._sound)try{this._sound.stop()}catch(e){}},_onSoundComplete:function(e){null!=this._onCompleteCallback&&this._onCompleteCallback.apply(this,[]),this.dispose()},__class__:Re});function De(e,t,i){ne.call(this,e,t,i)}(t["awe6.core.drivers.createjs.Factory"]=De).__name__="awe6.core.drivers.createjs.Factory",De.__super__=ne,De.prototype=e(ne.prototype,{_driverInit:function(){this.isDebug||(Ai.trace=function(e,t){window.console.log(e)});var e,t,i=new createjs.Container;this._context.addChild(i),this._context=i,this._countConfigsLoaded=0,this._countConfigsToLoad=0,""!=this._config?(e=null!=this._config?this._config:"assets/__Config.xml",null!=(t=this._context.getStage().canvas.getAttribute("config"))&&""!=t&&(e=t),this._loadConfig(e)):this._launchKernel()},_launchKernel:function(){this._displayCredits();var e=!0;Object.prototype.hasOwnProperty.call(this.config.h,"settings.nativeExperience")&&(e="true"==this.config.h["settings.nativeExperience"]);var t=this._context.getStage().canvas.getAttribute("nativeExperience");null!=t&&""!=t&&(e="true"==t),this.isNativeExperience=e,ne.prototype._launchKernel.call(this);var i=this._concreteKernel.system.isDesktop,s="default";Object.prototype.hasOwnProperty.call(this.config.h,"settings.fullScreen")&&(s=this.config.h["settings.fullScreen"]);var n=this._context.getStage().canvas.getAttribute("fullScreen");null!=n&&""!=n&&(s=n),this._kernel.set_isFullScreen(i&&("desktop"==s||"all"==s)||!i&&("mobile"==s||"all"==s||"default"==s)),this._kernel.isFullScreen&&this.isNativeExperience&&!i&&(this._concreteKernel.system.requestFullScreen(),this._concreteKernel.system.requestLockScreen())},_displayCredits:function(){Ai.trace(Object.prototype.hasOwnProperty.call(this.config.h,"settings.asciiArt")?this.config.h["settings.asciiArt"]:"",{fileName:"awe6/core/drivers/createjs/Factory.hx",lineNumber:127,className:"awe6.core.drivers.createjs.Factory",methodName:"_displayCredits"}),Ai.trace(this.id+" v"+this.version+" by "+this.author,{fileName:"awe6/core/drivers/createjs/Factory.hx",lineNumber:128,className:"awe6.core.drivers.createjs.Factory",methodName:"_displayCredits"}),Ai.trace("Powered by awe6 (http://awe6.org)",{fileName:"awe6/core/drivers/createjs/Factory.hx",lineNumber:129,className:"awe6.core.drivers.createjs.Factory",methodName:"_displayCredits"}),this.isDecached&&Ai.trace("Note: decaching is currently enabled",{fileName:"awe6/core/drivers/createjs/Factory.hx",lineNumber:132,className:"awe6.core.drivers.createjs.Factory",methodName:"_displayCredits"}),Ai.trace("",{fileName:"awe6/core/drivers/createjs/Factory.hx",lineNumber:134,className:"awe6.core.drivers.createjs.Factory",methodName:"_displayCredits"})},_loadConfig:function(e){if("<?xml"==I.substr(e,0,5))this._parseXml(e);else{this.isDecached&&(e+="?dc="+U.random(99999));try{var t=new Ki(e);t.onError=ms(this,this._onIOError),t.onData=ms(this,this._onComplete),t.request()}catch(e){var i=Ci.caught(e).unwrap();return void this._onIOError(U.string(i))}this._countConfigsToLoad++}},_parseXml:function(e){if(this._traverseElements(R.parse(e).firstElement().elements(),""),Object.prototype.hasOwnProperty.call(this.config.h,"settings.joinXml")&&this._countConfigsLoaded<100){var t=this.config.h["settings.joinXml"],i=this.config;Object.prototype.hasOwnProperty.call(i.h,"settings.joinXml")&&delete i.h["settings.joinXml"];for(var s=t.split(","),n=0;n<s.length;){var r=s[n];++n,this._loadConfig(r)}}this._countConfigsLoaded==this._countConfigsToLoad&&this._launchKernel()},_onIOError:function(e){Ai.trace("IO Errors Occurred During Config Loading:"+e,{fileName:"awe6/core/drivers/createjs/Factory.hx",lineNumber:188,className:"awe6.core.drivers.createjs.Factory",methodName:"_onIOError"}),Ai.trace("Double check your Config path.  Cross domain (or local) file loading of Config is a security risk and is, therefore, disabled on this browser.",{fileName:"awe6/core/drivers/createjs/Factory.hx",lineNumber:189,className:"awe6.core.drivers.createjs.Factory",methodName:"_onIOError"}),null!=this._config&&"<?xml"==I.substr(this._config,0,5)?(Ai.trace("Embedded Config detected, using that to continue ...",{fileName:"awe6/core/drivers/createjs/Factory.hx",lineNumber:192,className:"awe6.core.drivers.createjs.Factory",methodName:"_onIOError"}),this._countConfigsLoaded=this._countConfigsToLoad,this._parseXml(this._config)):(Ai.trace("Use a web server (or local server) to run over http and serve all files from the same domain.  Or embed the Config directlty in the code (e.g. as a Resource).",{fileName:"awe6/core/drivers/createjs/Factory.hx",lineNumber:198,className:"awe6.core.drivers.createjs.Factory",methodName:"_onIOError"}),Ai.trace("Unable to continue without Config.",{fileName:"awe6/core/drivers/createjs/Factory.hx",lineNumber:199,className:"awe6.core.drivers.createjs.Factory",methodName:"_onIOError"}))},_onComplete:function(e){var t;this._countConfigsLoaded++,""!=e?("<?xml"!=I.substr(t=e,0,5)&&(t=this.createEncrypter().decrypt(Mi.ofString(t)).toString()),this._parseXml(t)):this._onIOError(e)},_getAssetUrls:function(){for(var e=["bin/assets/audio/Applause.m4a","bin/assets/audio/Applause.ogg","bin/assets/audio/ButtonOver.m4a","bin/assets/audio/ButtonOver.ogg","bin/assets/audio/Carve1.m4a","bin/assets/audio/Carve1.ogg","bin/assets/audio/Carve2.m4a","bin/assets/audio/Carve2.ogg","bin/assets/audio/Carve3.m4a","bin/assets/audio/Carve3.ogg","bin/assets/audio/Carve4.m4a","bin/assets/audio/Carve4.ogg","bin/assets/audio/Coin.m4a","bin/assets/audio/Coin.ogg","bin/assets/audio/Collision1.m4a","bin/assets/audio/Collision1.ogg","bin/assets/audio/Collision2.m4a","bin/assets/audio/Collision2.ogg","bin/assets/audio/Cowbells.m4a","bin/assets/audio/Cowbells.ogg","bin/assets/audio/GameOver.m4a","bin/assets/audio/GameOver.ogg","bin/assets/audio/GameStart.m4a","bin/assets/audio/GameStart.ogg","bin/assets/audio/Medal1.m4a","bin/assets/audio/Medal1.ogg","bin/assets/audio/Medal2.m4a","bin/assets/audio/Medal2.ogg","bin/assets/audio/Medal3.m4a","bin/assets/audio/Medal3.ogg","bin/assets/audio/MissGate.m4a","bin/assets/audio/MissGate.ogg","bin/assets/audio/MusicMenu.m4a","bin/assets/audio/MusicMenu.ogg","bin/assets/audio/Player.m4a","bin/assets/audio/Player.ogg","bin/assets/audio/Silence.m4a","bin/assets/audio/Silence.ogg","bin/assets/audio/Transition.m4a","bin/assets/audio/Transition.ogg","bin/assets/Blank.png","bin/assets/fonts/__Exo2-extrabolditalic-webfont.eot","bin/assets/fonts/__Exo2-extrabolditalic-webfont.svg","bin/assets/fonts/__Exo2-extrabolditalic-webfont.ttf","bin/assets/fonts/__Exo2-extrabolditalic-webfont.woff","bin/assets/gui/Action.png","bin/assets/gui/AvatarUnitA.png","bin/assets/gui/AvatarUnitB.png","bin/assets/gui/BgAbstract1.png","bin/assets/gui/BgAbstract2.png","bin/assets/gui/BgAbstract3.png","bin/assets/gui/BgAbstract4.png","bin/assets/gui/BgDetail.jpg","bin/assets/gui/BgGradient1.png","bin/assets/gui/BgGradient2.png","bin/assets/gui/BgGradient3.png","bin/assets/gui/Burst.jpg","bin/assets/gui/Buttons.png","bin/assets/gui/HeroMedals.png","bin/assets/gui/HeroUnitA.png","bin/assets/gui/HeroUnitB.png","bin/assets/gui/Hud.png","bin/assets/gui/InstructionsA.png","bin/assets/gui/InstructionsB.png","bin/assets/gui/PanelBigBg.png","bin/assets/gui/PanelBigFg.png","bin/assets/gui/PanelLevel.png","bin/assets/gui/PanelLevelBg.png","bin/assets/gui/PanelResult.png","bin/assets/gui/PanelShop.png","bin/assets/gui/PanelSmallBg.png","bin/assets/gui/PanelSmallFg.png","bin/assets/gui/PanelUnit.png","bin/assets/gui/PauseBg.png","bin/assets/gui/SceneFgFooter1.png","bin/assets/gui/SceneFgFooter2.png","bin/assets/gui/SceneFgHeader1.png","bin/assets/gui/SceneFgHeader2.png","bin/assets/gui/Vignette.png","bin/assets/location/Boost.png","bin/assets/location/FinishLine.png","bin/assets/location/Horizon.jpg","bin/assets/location/LensFlares.jpg","bin/assets/location/Roads.png","bin/assets/location/Scenery.png","bin/assets/location/Streaks.png","bin/assets/location/UnitA.png","bin/assets/location/UnitB.png","bin/assets/__Config.xml","bin/assets/__Icon128.png","bin/assets/__Icon196.png","bin/assets/__Icon256.png","bin/assets/__PreloaderBg.png"],t=[],i=0,s=e.length;i<s;){e[n=i++]=I.substr(e[n],4,null),("__"==I.substr(e[n],0,2)||-1<e[n].indexOf("/__"))&&t.push(e[n])}for(i=0;i<t.length;){var n=t[i];++i,I.remove(e,n)}return e},_driverDisposer:function(){null!=this._context.parent&&this._context.parent.removeChild(this._context)},preventDefaultForKeys:function(e){this._kernel.inputs.keyboard.preventDefaultForKeys(e)},allowDefaultForKeys:function(e){this._kernel.inputs.keyboard.allowDefaultForKeys(e)},__class__:De});var Ne=function(e){ae.call(this,e)};(t["awe6.core.drivers.createjs.InputKeyboard"]=Ne).__name__="awe6.core.drivers.createjs.InputKeyboard",Ne.__super__=ae,Ne.prototype=e(ae.prototype,{_driverInit:function(){this._document=window.document,this._preventDefaultKeyCodes=[],this._document.addEventListener("keydown",ms(this,this._onKeyDown)),this._document.addEventListener("keyup",ms(this,this._onKeyUp))},_disposer:function(){this._document.removeEventListener("keydown",ms(this,this._onKeyDown)),this._document.removeEventListener("keyup",ms(this,this._onKeyUp)),ae.prototype._disposer.call(this)},_onKeyDown:function(e){this.isActive&&(-1!=this._preventDefaultKeyCodes.indexOf(e.keyCode)&&e.preventDefault(),this._addEvent(e.keyCode,!0))},_onKeyUp:function(e){this.isActive&&(-1!=this._preventDefaultKeyCodes.indexOf(e.keyCode)&&e.preventDefault(),this._addEvent(e.keyCode,!1))},preventDefaultForKeys:function(e){if(null!=e)for(var t=0;t<e.length;){var i=e[t];++t;var s=this.getKeyCode(i);f.has(this._preventDefaultKeyCodes,s)||this._preventDefaultKeyCodes.push(s)}},allowDefaultForKeys:function(e){if(null!=e)for(var t=0;t<this._preventDefaultKeyCodes.length;){var i=this.getKey(this._preventDefaultKeyCodes[t]);f.has(e,i)?this._preventDefaultKeyCodes.splice(t,1):++t}},__class__:Ne});var Me=function(e){le.call(this,e)};(t["awe6.core.drivers.createjs.InputMouse"]=Me).__name__="awe6.core.drivers.createjs.InputMouse",Me.__super__=le,Me.prototype=e(le.prototype,{_driverInit:function(){this._stage=this._kernel._stage,this._isTouch=createjs.Touch.isSupported()&&!this._kernel.system.isDesktop,this._isTouch?(createjs.Touch.enable(this._stage,!0),this._touchX=this._touchY=0,this._stage.canvas.addEventListener("touchstart",ms(this,this._onTouchStart)),this._stage.canvas.addEventListener("touchmove",ms(this,this._onTouch)),this._stage.canvas.addEventListener("touchend",ms(this,this._onTouchEnd))):(this._stage.addEventListener("stagemousedown",ms(this,this._onMouseDown)),this._stage.addEventListener("stagemouseup",ms(this,this._onMouseUp))),window.focus()},_disposer:function(){this._isTouch?(createjs.Touch.disable(this._stage),this._stage.canvas.removeEventListener("touchstart",ms(this,this._onTouchStart)),this._stage.canvas.removeEventListener("touchmove",ms(this,this._onTouch)),this._stage.canvas.removeEventListener("touchend",ms(this,this._onTouchEnd))):(this._stage.removeEventListener("stagemousedown",ms(this,this._onMouseDown)),this._stage.removeEventListener("stagemouseup",ms(this,this._onMouseUp))),le.prototype._disposer.call(this)},_isWithinBounds:function(){return this._stage.mouseInBounds},_getPosition:function(){var e,t;this._isTouch?(this.x=this._touchX,this.y=this._touchY):(e=this._stage.mouseX/this._stage.scaleX,t=this._kernel.factory.width,this.x=0|(t<e?t:e<0?0:e),e=this._stage.mouseY/this._stage.scaleY,t=this._kernel.factory.height,this.y=0|(t<e?t:e<0?0:e)),this.x=this.x==this._kernel.factory.width?this._xPrev:this.x,this.y=this.y==this._kernel.factory.height?this._yPrev:this.y},_onTouchStart:function(e){this._onMouseDown(e),this._onTouch(e),this.x=this._touchX,this.y=this._touchY},_onTouchEnd:function(e){this._onMouseUp(e),this._onTouch(e),Me._isSoundTriggered||(this._kernel.audio.start("Silence"),Me._isSoundTriggered=!0,this._kernel.isFullScreen&&this._kernel.factory.isNativeExperience&&(this._kernel.system.requestFullScreen(),this._kernel.system.requestLockScreen()))},_onTouch:function(e){try{var t=(e.targetTouches[0].pageX-(0|this._stage.canvas.offsetLeft))/this._kernel._scaleX,i=this._kernel.factory.width;this._touchX=0|(i<t?i:t<0?0:t);t=(e.targetTouches[0].pageY-(0|this._stage.canvas.offsetTop))/this._kernel._scaleY,i=this._kernel.factory.height;this._touchY=0|(i<t?i:t<0?0:t)}catch(e){}this._stage.mouseInBounds&&e.preventDefault()},_onMouseDown:function(e){window.focus(),this.isActive&&(!this._isTouch&&2==e.nativeEvent.button||this._buffer.push(!0))},_onMouseUp:function(e){this.isActive&&(!this._isTouch&&2==e.nativeEvent.button||this._buffer.push(!1))},set_isVisible:function(e){return this._stage.cursor=e?"none":"auto",le.prototype.set_isVisible.call(this,e)},set_cursorType:function(e){switch(e._hx_index){case 0:t="crosshair";break;case 1:t="auto";break;case 2:case 3:t="pointer";break;case 4:t="text";break;case 5:var t=e.value}return this._stage.canvas.style.cursor=t,le.prototype.set_cursorType.call(this,e)},__class__:Me});var Be=function(e,t){pe.call(this,e,t)};(t["awe6.core.drivers.createjs.Kernel"]=Be).__name__="awe6.core.drivers.createjs.Kernel",Be.__super__=pe,Be.prototype=e(pe.prototype,{_driverGetIsLocal:function(){var e;switch(window.location.protocol){case"http:":case"https:":e=!1;break;default:e=!0}return e},_driverInit:function(){this.system=new He(this),this._scaleX=this._scaleY=1,this._stage=this._stageDynamic=this._context.getStage(),this._stage.canvas.style.setProperty("-ms-touch-action","none",""),this._stage.canvas.style.setProperty("image-rendering","-o-crisp-edges",""),this._stage.canvas.style.setProperty("image-rendering","optimize-contrast",""),this._stage.canvas.style.setProperty("-ms-interpolation-mode","nearest-neighbor",""),this._stage.canvas.style.setProperty("-webkit-tap-highlight-color","rgba(0,0,0,0)",""),this._stage.canvas.style.setProperty("-moz-tap-highlight-color","rgba(0,0,0,0)",""),this._stage.canvas.style.setProperty("tap-highlight-color","rgba(0,0,0,0)",""),this._stage.canvas.style.setProperty("user-select","none",""),this._stage.canvas.style.setProperty("-webkit-touch-callout","none",""),this._stage.canvas.style.setProperty("-webkit-user-select","none",""),this._stage.canvas.style.setProperty("-moz-user-select","none",""),this._stage.canvas.style.setProperty("-ms-user-select","none",""),this._stage.tickOnUpdate=!1,this._stage.mouseEnabled=!1,this._stage.canvas.width=this.factory.width,this._stage.canvas.height=this.factory.height;var e=new createjs.Shape;e.graphics.beginFill("#"+I.substr(c.hex(this.factory.bgColor,8),2,6)),e.graphics.drawRect(0,0,this.factory.width,this.factory.height),e.graphics.endFill(),this._stage.addChildAt(e,0),createjs.Ticker.setFPS(this.factory.targetFramerate),createjs.Ticker.timingMode=createjs.Ticker.RAF_SYNCHED,createjs.Ticker.addEventListener("tick",ms(this,this._onEnterFrame)),this._stage.canvas.addEventListener("contextmenu",ms(this,this._onContextMenu),!1),window.addEventListener("unload",ms(this,this._onUnload))},_onUnload:function(e){window.removeEventListener("unload",ms(this,this._onUnload)),this.get_session().save()},_onContextMenu:function(e){var t,i;e.preventDefault(),e.stopImmediatePropagation(),null!=this.overlay&&(t=ms(l=this.overlay,l.activateButton),i=rt.PAUSE,Pi.delay(function(){t(i)},100))},_driverDisposer:function(){this._stage.canvas.removeEventListener("contextmenu",ms(this,this._onContextMenu))},_onEnterFrame:function(e){null!=e.paused&&1==e.paused?this._stage.tickOnUpdate=!1:(this._updates++,this._updater(0),this._stage.tickOnUpdate=this.isActive,this._stageDynamic.update(e));var t=U.string(window.innerWidth)+":"+U.string(window.innerHeight);this._prevWindowSize!=t&&this._driverSetIsFullScreen(this.isFullScreen)},_driverSetIsEyeCandy:function(e){},_driverSetIsFullScreen:function(e){this._prevWindowSize=U.string(window.innerWidth)+":"+U.string(window.innerHeight),this._scaleX=this._scaleY=1;var t=this.factory.width,i=this.factory.height,s=window.innerWidth,n=window.innerHeight,r=t<i,a=s<n;this.system.isRotated=!this.system.isDesktop&&r!=a;var _=0,o=0;if(e){var h=Math.min(s/t,n/i),l=this.factory.fullScreenType;switch(l._hx_index){case 0:case 1:break;case 2:this._scaleX=s/t,this._scaleY=n/i;break;case 3:this._scaleX=this._scaleY=h;break;case 4:h=h<.5?.25:h<1?.5:Math.floor(h),this._scaleX=this._scaleY=h;break;case 5:var c,u,d,p=l.value;null!=p.bleedWidth&&null!=p.bleedHeight&&(c=t-2*U.parseInt(U.string(p.bleedWidth)+""),u=i-2*U.parseInt(U.string(p.bleedHeight)+""),d=Math.min(s/c,n/u),this._scaleX=this._scaleY=d)}_=Math.round((s-t*this._scaleX)/2),o=Math.round((n-i*this._scaleY)/2)}this._stage.canvas.style.setProperty("width",Math.round(t*this._scaleX)+"px",""),this._stage.canvas.style.setProperty("height",Math.round(i*this._scaleY)+"px",""),this._stage.canvas.style.setProperty("margin-left",_+"px",""),this._stage.canvas.style.setProperty("margin-top",o+"px","")},__class__:Be});var Le=function(e,t,i,s,n,r,a,_,o,h,l,c,u,d,p,g,f){me.call(this,e,t,i,s,n,r,a,_,o,h,l,c,u,d,p,g,f)};(t["awe6.core.drivers.createjs.Overlay"]=Le).__name__="awe6.core.drivers.createjs.Overlay",Le.__super__=me,Le.prototype=e(me.prototype,{_driverInit:function(){$i.__cast(this._borderView,Ye).context.mouseEnabled=!1,this._context.mouseEnabled=!1,this._pauseContext=new createjs.Container,this._pauseContext.mouseEnabled=!1;var e=new createjs.Shape;e.graphics.beginFill("#"+c.hex(this._pauseColor,6)),e.graphics.drawRect(0,0,this._kernel.factory.width,this._kernel.factory.height),e.alpha=this._pauseAlpha,this._pauseContext.addChild(e),this._flashContext=new createjs.Container,this._flashContext.mouseEnabled=!1},_updater:function(e){null==e&&(e=0),me.prototype._updater.call(this,e),this._flashContext.alpha=this._flashAlpha,this._flashContext.visible=0!=this._flashAlpha},flash:function(e,t,i,s){null==s&&(s=16777215),null==i&&(i=1),null==t&&(t=!0),this._flashContext.removeAllChildren();var n=new createjs.Shape;n.graphics.beginFill("#"+c.hex(s,6)),n.graphics.drawRect(0,0,this._kernel.factory.width,this._kernel.factory.height),this._flashContext.addChild(n),null==e&&(e=t?500:.5*this._kernel.factory.targetFramerate),this._flashDuration=this._flashStartingDuration=e,this._flashAsTime=t,this._flashAlpha=this._flashStartingAlpha=1<i?1:i<0?0:i},__class__:Le});var Oe=function(e,t,i){ve.call(this,e,t,i)};(t["awe6.core.drivers.createjs.Preloader"]=Oe).__name__="awe6.core.drivers.createjs.Preloader",Oe.__super__=ve,Oe.prototype=e(ve.prototype,{_init:function(){this._context=new createjs.Container,this.view=new Ye(this._kernel,this._context),ve.prototype._init.call(this),this._system=this._kernel.system,this._isDesktop=this._system.isDesktop,this._audioHoldDelay=0,this._completedDelay=0;var e=this._isDecached?"?dc="+U.random(999999):"",t=["mp3","ogg","mpeg","wav","m4a","mp4","aiff","wma","mid"];null!=this._proprietaryAudioFormat&&""!=this._proprietaryAudioFormat&&f.has(t,this._proprietaryAudioFormat)||(this._proprietaryAudioFormat="mp3");var i=[];if(this._manifest=[],createjs.Sound.initializeDefaultPlugins()){this._audioHoldDelay=this._getAudioHoldDelay();var s=this._isSoundDisabled||this._system.isAndroid&&this._getIsStockAndroidBrowser();this._validSoundFormat=createjs.Sound.getCapability("ogg")?"ogg":createjs.Sound.getCapability(this._proprietaryAudioFormat)?this._proprietaryAudioFormat:"noValidFormat",this._activePlugin=createjs.Sound.activePlugin;for(var n=0,r=this._assets;n<r.length;){var a=r[n];++n;var _,o=I.substr(a,-3,null);f.has(t,o)&&(i.push(a),s||o!=this._validSoundFormat||(_="assets.audio."+I.substr(a.split("/").pop(),0,-4),this._isFastTestMode||this._manifest.push({src:a+e,id:_})))}}for(n=0;n<i.length;){a=i[n];++n,I.remove(this._assets,a)}for(n=0,r=this._assets;n<r.length;){a=r[n];++n,this._manifest.push({src:a+e,id:a})}this._loadQueue=new createjs.LoadQueue(!this._kernel.isLocal&&!this._isFastTestMode,""),this._loadQueue.setMaxConnections(10),this._loadQueue.installPlugin(createjs.Sound),this._manifest=this._tools.shuffle(this._manifest),this._loadQueue.addEventListener("complete",ms(this,this._onComplete)),this._loadQueue.addEventListener("fileerror",ms(this,this._onError)),this._loadQueue.addEventListener("error",ms(this,this._onError));var n=ms(l=this._loadQueue,l.loadManifest),h=this._manifest;Pi.delay(function(){n(h)},200)},_next:function(){},get_progress:function(){return this._loadQueue.progress},_onComplete:function(e){this._isComplete||(this._isComplete=!0,Ue.loadQueue=this._loadQueue,this._completedDelay=this._audioHoldDelay,this._loadQueue.removeEventListener("complete",ms(this,this._onComplete)),this._loadQueue.removeEventListener("fileerror",ms(this,this._onError)),this._loadQueue.removeEventListener("error",ms(this,this._onError)),0!=this._audioHoldDelay&&this._showAudioHoldMessage())},_onError:function(e){Ai.trace([e,e.title,e.message,e.data],{fileName:"awe6/core/drivers/createjs/Preloader.hx",lineNumber:148,className:"awe6.core.drivers.createjs.Preloader",methodName:"_onError"})},_showAudioHoldMessage:function(){},_updater:function(e){null==e&&(e=0),ve.prototype._updater.call(this,e),this._isComplete&&(this._completedDelay-=e,(0<=this._audioHoldDelay&&this._completedDelay<=0||this._kernel.inputs.keyboard.getIsKeyRelease(this._kernel.factory.keyNext)||this._kernel.inputs.mouse.getIsButtonRelease())&&(this._assets=[]))},_getIsStockAndroidBrowser:function(){var e=-1<this._system.userAgent.indexOf("Android")&&-1<this._system.userAgent.indexOf("Mozilla/5.0")&&-1<this._system.userAgent.indexOf("AppleWebKit"),t=new g("AppleWebKit/([\\d.]+)",""),i=t.match(this._system.userAgent),s=i?parseFloat(t.matched(1)):0,n=new g("Chrome/([\\d.]+)",""),r=n.match(this._system.userAgent),a=r?parseFloat(n.matched(1)):0;return e&&(!!(i&&s<537)||!!r&&a<37)},_getAudioHoldDelay:function(){if(this._isSoundDisabled)return 0;try{if("[WebAudioPlugin]"!=createjs.Sound.activePlugin||"suspended"!=createjs.Sound.activePlugin.context.state)return 0}catch(e){}var e=-1;Object.prototype.hasOwnProperty.call(this._kernel.factory.config.h,"settings.audioHoldDelay")&&(e=U.parseInt(this._kernel.factory.config.h["settings.audioHoldDelay"]));try{var t=this._kernel.factory._context.getStage().canvas.getAttribute("audioHoldDelay");null!=t&&""!=t&&(e=U.parseInt(t))}catch(e){}return e},__class__:Oe});var Fe=function(e){Se.call(this,e)};(t["awe6.core.drivers.createjs.Profiler"]=Fe).__name__="awe6.core.drivers.createjs.Profiler",Fe.__super__=Se,Fe.prototype=e(Se.prototype,{_init:function(){Se.prototype._init.call(this),this._isMemoryEnabled=null!=window.performance&&null!=window.performance.memory,this._width=75,this._height=24,this._marginHeight=12;var e=new createjs.Shape;this._context.addChild(e),e.alpha=.25,this._isMemoryEnabled&&(e.graphics.beginFill("#"+c.hex(this._backgroundColor,6)),e.graphics.drawRect(0,0,this._width,this._height),e.graphics.endFill()),e.graphics.beginFill("#"+c.hex(this._marginColor,6)),e.graphics.drawRect(0,0,this._width,this._marginHeight),e.graphics.endFill(),e.cache(0,0,this._width,this._height),this._fpsTextField=new createjs.Text("","","#"+c.hex(this._fpsColor,6)),this._context.addChild(this._fpsTextField),this._isMemoryEnabled&&(this._memoryTextField=new createjs.Text("","","#"+c.hex(this._memoryColor,6)),this._memoryTextField.y=12,this._context.addChild(this._memoryTextField))},_driverUpdate:function(){var e,t,i=0|this._kernel.getFramerate(!0);Math.min(this._height,this._height/this._kernel.factory.targetFramerate*i);this._fpsTextField.text=this._fpsLabel+": "+i+" / "+this._kernel.factory.targetFramerate,this._isMemoryEnabled&&this._updates%this._kernel.factory.targetFramerate==0&&(e=Math.round(window.performance.memory.usedJSHeapSize/1024/1024),t=Math.round(window.performance.memory.jsHeapSizeLimit/1024/1024),this._memoryTextField.text=this._memoryLabel+": "+e+" / "+t)},__class__:Fe});var Ge=function(e,t){be.call(this,e,t)};(t["awe6.core.drivers.createjs.SceneTransition"]=Ge).__name__="awe6.core.drivers.createjs.SceneTransition",Ge.__super__=be,Ge.prototype=e(be.prototype,{_init:function(){be.prototype._init.call(this),this._kernel.scenes.get_scene().get_view().context.cache(0,0,this._kernel.factory.width,this._kernel.factory.height);var e=new createjs.Bitmap(this._kernel.scenes.get_scene().get_view().context.cacheCanvas);this._kernel.scenes.get_scene().get_view().context.uncache(),this._context.mouseEnabled=!1,this._context.addChild(e)},_updater:function(e){var t;null==e&&(e=0),be.prototype._updater.call(this,e),this.isDisposed||(t=this.get_progress(),this._context.alpha=1-t)},__class__:Ge});function Ve(e,t){ke.call(this,e,t)}(t["awe6.core.drivers.createjs.Session"]=Ve).__name__="awe6.core.drivers.createjs.Session",Ve.__super__=ke,Ve.prototype=e(ke.prototype,{_init:function(){var e=!0;null!=this._kernel.getConfig("settings.sessionSaved")&&(e="false"!=this._kernel.getConfig("settings.sessionSaved")),this._storage=e?es.getLocalStorage():es.getSessionStorage(),ke.prototype._init.call(this)},_driverLoad:function(){if(this._savedData={},null!=window.document.cookie&&ts.exists(this._kernel.factory.id)&&(this._savedData=this._tools.unserialize(ts.get(this._kernel.factory.id)),this._driverSave(),ts.remove(this._kernel.factory.id)),null!=this._storage)try{var e=this._storage.getItem(this._kernel.factory.id);null!=e&&(this._savedData=this._tools.unserialize(e))}catch(e){}},_driverReset:function(){if(null!=this._storage)try{this._storage.removeItem(this._kernel.factory.id)}catch(e){}this._savedData={}},_driverSave:function(){if(null!=this._storage)try{this._storage.setItem(this._kernel.factory.id,this._tools.serialize(this._savedData))}catch(e){}},__class__:Ve});var He=function(e){this._kernel=e,this.isRotated=!1,this.isAndroid=this.isChromeOs=this.isIos=this.isLinux=this.isMacOs=this.isSilk=this.isWindows=this.isWindowsPhone=this.isDesktop=!1,this.userAgent=p.navigator.userAgent,this.isSilk=new g("Silk","").match(this.userAgent),this.isKaiOs=new g("KAIOS","").match(this.userAgent),this.isCrosswalk=new g("Crosswalk","").match(this.userAgent),this.isCordova=null!=window.cordova,new g("Android","").match(this.userAgent)?this.isAndroid=!0:new g("CrOS","").match(this.userAgent)?this.isChromeOs=!0:new g("iP[ao]d|iPhone","i").match(this.userAgent)?this.isIos=!0:new g("Linux","").match(this.userAgent)?this.isLinux=!0:new g("Mac OS","").match(this.userAgent)?this.isMacOs=!0:new g("Windows","").match(this.userAgent)&&(this.isWindows=!0,new g("Windows Phone","i").match(this.userAgent)&&(this.isWindowsPhone=!0)),(this.isWindows||this.isMacOs||this.isLinux&&!this.isSilk)&&(this.isDesktop=!0),this.isWindowsPhone&&(this.isDesktop=!1)};(t["awe6.core.drivers.createjs.System"]=He).__name__="awe6.core.drivers.createjs.System",He.prototype={get_isWebGL:function(){return!1},get_isFullScreenSupported:function(){try{var e=window.document.documentElement;if(null!=e.requestFullscreen)return!0;if(null!=e.msRequestFullscreen)return!0;if(null!=e.mozRequestFullScreen)return!0;if(null!=e.webkitRequestFullscreen)return!0}catch(e){}return!1},requestFullScreen:function(){try{var e=window.document.documentElement;null!=e.requestFullscreen?e.requestFullscreen():null!=e.msRequestFullscreen?e.msRequestFullscreen():null!=e.mozRequestFullScreen?e.mozRequestFullScreen():null!=e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}catch(e){}},requestExitFullScreen:function(){try{var e=window.document;null!=e.exitFullscreen?e.exitFullscreen():null!=e.msExitFullscreen?e.msExitFullscreen():null!=e.mozCancelFullScreen?e.mozCancelFullScreen():null!=e.webkitExitFullscreen&&e.webkitExitFullscreen()}catch(e){}},requestLockScreen:function(){if(!this.isDesktop)try{var e=this._kernel.factory.width<this._kernel.factory.height?"portrait-primary":"landscape-primary",t=window.screen;null!=t.orientation?null!=t.orientation.lock?t.orientation.lock(e):null!=t.orientation.lockOrientation&&t.orientation.lockOrientation(e):null!=t.mozOrientation?t.mozLockOrientation(e):null!=t.msOrientation&&t.msLockOrientation(e)}catch(e){}},requestDeviceOrientation:function(){if(!this.isDesktop)try{null!=window.DeviceMotionEvent&&null!=window.DeviceMotionEvent.requestPermission&&window.DeviceMotionEvent.requestPermission()}catch(e){}},__class__:He,__properties__:{get_isFullScreenSupported:"get_isFullScreenSupported",get_isWebGL:"get_isWebGL"}};var Ye=function(e,t,i,s){Ie.call(this,e,t,i,s)};(t["awe6.core.drivers.createjs.View"]=Ye).__name__="awe6.core.drivers.createjs.View",Ye.__super__=Ie,Ye.prototype=e(Ie.prototype,{_init:function(){null==this.context&&(this.context=new createjs.Container),Ie.prototype._init.call(this)},_driverDisposer:function(){if(null!=this.context&&null!=this.context.parent)try{this.context.parent.removeChild(this.context)}catch(e){}},_driverDraw:function(){null!=this._container&&null!=this._container.parent&&this._container.parent.removeChild(this._container),this._container=new createjs.Container,this._container.mouseEnabled=!1,this.context.addChild(this._container);for(var e=this._children,t=0;t<e.length;){var i=e[t];++t,i.isVisible&&this._container.addChild(i.context)}},set_x:function(e){return this.context.x=e,Ie.prototype.set_x.call(this,e)},set_y:function(e){return this.context.y=e,Ie.prototype.set_y.call(this,e)},__class__:Ye});function je(e,t,i,s){var n;null==s&&(s=!0),null==i&&(i=100),null==t&&(t=100),this.isFlippedX=!1,this.isFlippedY=!1,this.width=t,this.height=i,this._context=new createjs.Container,this.setPosition(0,0),s&&((n=new createjs.Shape).graphics.beginFill("#FF0000"),n.graphics.drawRect(0,0,this.width,this.height),n.graphics.endFill(),n.visible=!1,this._context.addChild(n),this._context.mask=n),m.call(this,e,null,this._context)}(t["awe6.core.drivers.createjs.extras.gui.GuiEntity"]=je).__name__="awe6.core.drivers.createjs.extras.gui.GuiEntity",je.__interfaces__=[E],je.__super__=m,je.prototype=e(m.prototype,{setPosition:function(e,t){this.set_x(e),this.set_y(t)},set_x:function(e){return this.x=e,this._context.x=this.x,this.x},set_y:function(e){return this.y=e,this._context.y=this.y,this.y},__class__:je,__properties__:e(m.prototype.__properties__,{set_y:"set_y",set_x:"set_x"})});function ze(e,t,i,s,n,r,a){null==a&&(a=!1),null==r&&(r=!1),null==s&&(s=""),this.textStyle=n,this._isMultiline=r,this._isCached=a,je.call(this,e,t,i,!1),this.set_text(s)}(t["awe6.core.drivers.createjs.extras.gui.Text"]=ze).__name__="awe6.core.drivers.createjs.extras.gui.Text",ze.__super__=je,ze.prototype=e(je.prototype,{_init:function(){je.prototype._init.call(this),this._textField=new createjs.Text,this._textField.text=this.text,this._draw(),this._context.addChild(this._textField),this._isDirty=!1,this._prevTextStyle=this.textStyle.toString()},_updater:function(e){null==e&&(e=0),je.prototype._updater.call(this,e),this._isDirty=this._isDirty||this._prevTextStyle!=this.textStyle.toString(),this._isDirty&&this._draw(),this._prevTextStyle=this.textStyle.toString()},_draw:function(){if(this._textField.lineWidth=this.width,this._prevTextStyle!=this.textStyle.toString()){switch(this.textStyle.align._hx_index){case 0:case 1:this._textField.textAlign="left";break;case 2:this._textField.textAlign="center",this._textField.x=.5*this.width;break;case 3:this._textField.textAlign="right",this._textField.x=this.width}var e,t,i=c.hex(this.textStyle.color,6);this._textField.color="#"+i,this._textField.font=(this.textStyle.isBold?"bold ":"")+(this.textStyle.isItalic?"italic ":"")+this.textStyle.size+"px '"+this.textStyle.font+"'",this._textField.lineHeight=this.textStyle.spacingVertical,null!=this.textStyle.filters&&((e=this._textField).shadow=null,t=this.textStyle.filters.slice(),null!=this._textFieldOutline&&null!=this._textFieldOutline.parent&&this._textFieldOutline.parent.removeChild(this._textFieldOutline),this._textFieldOutline=null,2!=t.length&&6!=t.length||(this._textFieldOutline=this._textField.clone(),i=c.hex(t.shift(),6),this._textFieldOutline.color="#"+i,i=t.shift(),this._textFieldOutline.outline=2*i,this._context.addChildAt(this._textFieldOutline,0),e=this._textFieldOutline),4==t.length&&(e.shadow=new createjs.Shadow("#"+c.hex(t[0],6),t[1],t[2],t[3])))}this._isCached&&this._context.cache(0,0,this.width,this.height),this._isDirty=!1},set_text:function(e){return null==e&&(e=""),this.text==e||(this.text=e,this._textField.text=this.text,null!=this._textFieldOutline&&(this._textFieldOutline.text=this.text),this._isDirty=!0),this.text},__class__:ze,__properties__:e(je.prototype.__properties__,{set_text:"set_text"})});function We(e,t,i,s){Ie.call(this,e,t,i,s)}(t["awe6.core.drivers.flash.View"]=We).__name__="awe6.core.drivers.flash.View",We.__super__=Ie,We.prototype=e(Ie.prototype,{_init:function(){null==this.context&&(this.context=new createjs.Container),Ie.prototype._init.call(this)},_driverDisposer:function(){null!=this.context.parent&&this.context.parent.removeChild(this.context)},_driverDraw:function(){null!=this._container&&null!=this._container.parent&&this._container.parent.removeChild(this._container),this._container=new createjs.Container,this._container.mouseEnabled=!1,this.context.addChild(this._container);for(var e=this._children,t=0;t<e.length;){var i=e[t];++t,i.isVisible&&this._container.addChild(i.context)}},set_x:function(e){return this.context.x=e,Ie.prototype.set_x.call(this,e)},set_y:function(e){return this.context.y=e,Ie.prototype.set_y.call(this,e)},__class__:We});function Ke(e,t,i){null==i&&(i=1e3),this._callbackFunction=t,this._duration=i,m.call(this,e)}(t["awe6.extras.Delay"]=Ke).__name__="awe6.extras.Delay",Ke.__super__=m,Ke.prototype=e(m.prototype,{_updater:function(e){null==e&&(e=0),m.prototype._updater.call(this,e),this._duration-=e,this._duration<=0&&(null!=this._callbackFunction&&this._callbackFunction(),this.isDisposed||(this.isDisposed=!0,this.set_isActive(!1),this._disposer()))},__class__:Ke});function Xe(e,t,i,s,n,r,a,_,o,h,l){null==h&&(h=!1),null==o&&(o=!1),null==_&&(_=!1),null==i&&(i=1e3),null==t&&(t=0),this._delay=t,this._duration=i,this._object=s,this._field=n,this._originalValue=r,this._newValue=a,this._isRelative=_,this._isEaseIn=o,this._isEaseOut=h,this._callback=l,this._prevProgress=0,m.call(this,e),this._updater()}(t["awe6.extras.Easer"]=Xe).__name__="awe6.extras.Easer",Xe.__super__=m,Xe.prototype=e(m.prototype,{_updater:function(e){null==e&&(e=0),m.prototype._updater.call(this,e);var t,i,s,n=(this._age-this._delay)/this._duration,r=1<n?1:n<0?0:n;this._isEaseIn&&(r=1-Math.cos(.5*r*Math.PI)),this._isEaseOut&&(r=Math.sin(.5*r*Math.PI)),.99999<=r&&(r=1),this._isRelative?(t=this._prevProgress,i=this._originalValue*(1-t)+this._newValue*t,s=this._originalValue*(1-r)+this._newValue*r-i,T.setProperty(this._object,this._field,T.getProperty(this._object,this._field)+s)):T.setProperty(this._object,this._field,this._originalValue*(1-r)+this._newValue*r),1==(this._prevProgress=r)&&(null!=this._callback&&this._callback(),this.isDisposed||(this.isDisposed=!0,this.set_isActive(!1),this._disposer()))},__class__:Xe});function Qe(e){this._context=new createjs.Container,this._session=e.get_session(),this._assets=e.assets,this._factory=e.factory,this._system=e.system,this._context.mouseChildren=!1,this._context.mouseEnabled=!1,m.call(this,e,null,this._context)}var Je=b["awe6.interfaces.EAgenda"]={__ename__:"awe6.interfaces.EAgenda",__constructs__:["ALWAYS","BIRTH","DEATH","STANDARD","ATTACK","DEFEND","SUB_TYPE"],ALWAYS:{_hx_index:0,__enum__:"awe6.interfaces.EAgenda",toString:i},BIRTH:{_hx_index:1,__enum__:"awe6.interfaces.EAgenda",toString:i},DEATH:{_hx_index:2,__enum__:"awe6.interfaces.EAgenda",toString:i},STANDARD:{_hx_index:3,__enum__:"awe6.interfaces.EAgenda",toString:i},ATTACK:{_hx_index:4,__enum__:"awe6.interfaces.EAgenda",toString:i},DEFEND:{_hx_index:5,__enum__:"awe6.interfaces.EAgenda",toString:i},SUB_TYPE:((l=function(e){return{_hx_index:6,value:e,__enum__:"awe6.interfaces.EAgenda",toString:i}}).__params__=["value"],l)},Ze=b["awe6.interfaces.EAudioChannel"]={__ename__:"awe6.interfaces.EAudioChannel",__constructs__:["DEFAULT","EFFECTS","INTERFACE","MUSIC","SUB_TYPE"],DEFAULT:{_hx_index:0,__enum__:"awe6.interfaces.EAudioChannel",toString:i},EFFECTS:{_hx_index:1,__enum__:"awe6.interfaces.EAudioChannel",toString:i},INTERFACE:{_hx_index:2,__enum__:"awe6.interfaces.EAudioChannel",toString:i},MUSIC:{_hx_index:3,__enum__:"awe6.interfaces.EAudioChannel",toString:i},SUB_TYPE:((l=function(e){return{_hx_index:4,value:e,__enum__:"awe6.interfaces.EAudioChannel",toString:i}}).__params__=["value"],l)},qe=b["awe6.interfaces.EFullScreen"]={__ename__:"awe6.interfaces.EFullScreen",__constructs__:["DISABLED","NO_SCALE","SCALE_ASPECT_RATIO_IGNORE","SCALE_ASPECT_RATIO_PRESERVE","SCALE_NEAREST_MULTIPLE","SUB_TYPE"],DISABLED:{_hx_index:0,__enum__:"awe6.interfaces.EFullScreen",toString:i},NO_SCALE:{_hx_index:1,__enum__:"awe6.interfaces.EFullScreen",toString:i},SCALE_ASPECT_RATIO_IGNORE:{_hx_index:2,__enum__:"awe6.interfaces.EFullScreen",toString:i},SCALE_ASPECT_RATIO_PRESERVE:{_hx_index:3,__enum__:"awe6.interfaces.EFullScreen",toString:i},SCALE_NEAREST_MULTIPLE:{_hx_index:4,__enum__:"awe6.interfaces.EFullScreen",toString:i},SUB_TYPE:((l=function(e){return{_hx_index:5,value:e,__enum__:"awe6.interfaces.EFullScreen",toString:i}}).__params__=["value"],l)},$e=b["awe6.interfaces.EJoypadButton"]={__ename__:"awe6.interfaces.EJoypadButton",__constructs__:["FIRE","UP","RIGHT","DOWN","LEFT","PRIMARY","SECONDARY"],FIRE:{_hx_index:0,__enum__:"awe6.interfaces.EJoypadButton",toString:i},UP:{_hx_index:1,__enum__:"awe6.interfaces.EJoypadButton",toString:i},RIGHT:{_hx_index:2,__enum__:"awe6.interfaces.EJoypadButton",toString:i},DOWN:{_hx_index:3,__enum__:"awe6.interfaces.EJoypadButton",toString:i},LEFT:{_hx_index:4,__enum__:"awe6.interfaces.EJoypadButton",toString:i},PRIMARY:{_hx_index:5,__enum__:"awe6.interfaces.EJoypadButton",toString:i},SECONDARY:{_hx_index:6,__enum__:"awe6.interfaces.EJoypadButton",toString:i}},et=b["awe6.interfaces.EJoypadTouch"]={__ename__:"awe6.interfaces.EJoypadTouch",__constructs__:["DISABLED","DPAD","JOYSTICK","SWIPE"],DISABLED:{_hx_index:0,__enum__:"awe6.interfaces.EJoypadTouch",toString:i},DPAD:{_hx_index:1,__enum__:"awe6.interfaces.EJoypadTouch",toString:i},JOYSTICK:((l=function(e){return{_hx_index:2,distance:e,__enum__:"awe6.interfaces.EJoypadTouch",toString:i}}).__params__=["distance"],l),SWIPE:((l=function(e){return{_hx_index:3,speed:e,__enum__:"awe6.interfaces.EJoypadTouch",toString:i}}).__params__=["speed"],l)},tt=b["awe6.interfaces.EKey"]={__ename__:"awe6.interfaces.EKey",__constructs__:["NUM_LOCK","CLEAR","HELP","ALT","BACKSPACE","CAPS_LOCK","CONTROL","DELETE","DOWN","END","ENTER","ESCAPE","F1","F10","F11","F12","F13","F14","F15","F2","F3","F4","F5","F6","F7","F8","F9","HOME","INSERT","LEFT","NUMPAD_0","NUMPAD_1","NUMPAD_2","NUMPAD_3","NUMPAD_4","NUMPAD_5","NUMPAD_6","NUMPAD_7","NUMPAD_8","NUMPAD_9","NUMPAD_ADD","NUMPAD_DECIMAL","NUMPAD_DIVIDE","NUMPAD_ENTER","NUMPAD_MULTIPLY","NUMPAD_SUBTRACT","PAGE_DOWN","PAGE_UP","RIGHT","SHIFT","SPACE","TAB","UP","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","NUMBER_0","NUMBER_1","NUMBER_2","NUMBER_3","NUMBER_4","NUMBER_5","NUMBER_6","NUMBER_7","NUMBER_8","NUMBER_9","COLON","EQUALS","HYPHEN","SLASH","TILDE","SQUARELEFT","SQUARERIGHT","BACKSLASH","APOSTROPHE","TOPLEFT","SUB_TYPE"],NUM_LOCK:{_hx_index:0,__enum__:"awe6.interfaces.EKey",toString:i},CLEAR:{_hx_index:1,__enum__:"awe6.interfaces.EKey",toString:i},HELP:{_hx_index:2,__enum__:"awe6.interfaces.EKey",toString:i},ALT:{_hx_index:3,__enum__:"awe6.interfaces.EKey",toString:i},BACKSPACE:{_hx_index:4,__enum__:"awe6.interfaces.EKey",toString:i},CAPS_LOCK:{_hx_index:5,__enum__:"awe6.interfaces.EKey",toString:i},CONTROL:{_hx_index:6,__enum__:"awe6.interfaces.EKey",toString:i},DELETE:{_hx_index:7,__enum__:"awe6.interfaces.EKey",toString:i},DOWN:{_hx_index:8,__enum__:"awe6.interfaces.EKey",toString:i},END:{_hx_index:9,__enum__:"awe6.interfaces.EKey",toString:i},ENTER:{_hx_index:10,__enum__:"awe6.interfaces.EKey",toString:i},ESCAPE:{_hx_index:11,__enum__:"awe6.interfaces.EKey",toString:i},F1:{_hx_index:12,__enum__:"awe6.interfaces.EKey",toString:i},F10:{_hx_index:13,__enum__:"awe6.interfaces.EKey",toString:i},F11:{_hx_index:14,__enum__:"awe6.interfaces.EKey",toString:i},F12:{_hx_index:15,__enum__:"awe6.interfaces.EKey",toString:i},F13:{_hx_index:16,__enum__:"awe6.interfaces.EKey",toString:i},F14:{_hx_index:17,__enum__:"awe6.interfaces.EKey",toString:i},F15:{_hx_index:18,__enum__:"awe6.interfaces.EKey",toString:i},F2:{_hx_index:19,__enum__:"awe6.interfaces.EKey",toString:i},F3:{_hx_index:20,__enum__:"awe6.interfaces.EKey",toString:i},F4:{_hx_index:21,__enum__:"awe6.interfaces.EKey",toString:i},F5:{_hx_index:22,__enum__:"awe6.interfaces.EKey",toString:i},F6:{_hx_index:23,__enum__:"awe6.interfaces.EKey",toString:i},F7:{_hx_index:24,__enum__:"awe6.interfaces.EKey",toString:i},F8:{_hx_index:25,__enum__:"awe6.interfaces.EKey",toString:i},F9:{_hx_index:26,__enum__:"awe6.interfaces.EKey",toString:i},HOME:{_hx_index:27,__enum__:"awe6.interfaces.EKey",toString:i},INSERT:{_hx_index:28,__enum__:"awe6.interfaces.EKey",toString:i},LEFT:{_hx_index:29,__enum__:"awe6.interfaces.EKey",toString:i},NUMPAD_0:{_hx_index:30,__enum__:"awe6.interfaces.EKey",toString:i},NUMPAD_1:{_hx_index:31,__enum__:"awe6.interfaces.EKey",toString:i},NUMPAD_2:{_hx_index:32,__enum__:"awe6.interfaces.EKey",toString:i},NUMPAD_3:{_hx_index:33,__enum__:"awe6.interfaces.EKey",toString:i},NUMPAD_4:{_hx_index:34,__enum__:"awe6.interfaces.EKey",toString:i},NUMPAD_5:{_hx_index:35,__enum__:"awe6.interfaces.EKey",toString:i},NUMPAD_6:{_hx_index:36,__enum__:"awe6.interfaces.EKey",toString:i},NUMPAD_7:{_hx_index:37,__enum__:"awe6.interfaces.EKey",toString:i},NUMPAD_8:{_hx_index:38,__enum__:"awe6.interfaces.EKey",toString:i},NUMPAD_9:{_hx_index:39,__enum__:"awe6.interfaces.EKey",toString:i},NUMPAD_ADD:{_hx_index:40,__enum__:"awe6.interfaces.EKey",toString:i},NUMPAD_DECIMAL:{_hx_index:41,__enum__:"awe6.interfaces.EKey",toString:i},NUMPAD_DIVIDE:{_hx_index:42,__enum__:"awe6.interfaces.EKey",toString:i},NUMPAD_ENTER:{_hx_index:43,__enum__:"awe6.interfaces.EKey",toString:i},NUMPAD_MULTIPLY:{_hx_index:44,__enum__:"awe6.interfaces.EKey",toString:i},NUMPAD_SUBTRACT:{_hx_index:45,__enum__:"awe6.interfaces.EKey",toString:i},PAGE_DOWN:{_hx_index:46,__enum__:"awe6.interfaces.EKey",toString:i},PAGE_UP:{_hx_index:47,__enum__:"awe6.interfaces.EKey",toString:i},RIGHT:{_hx_index:48,__enum__:"awe6.interfaces.EKey",toString:i},SHIFT:{_hx_index:49,__enum__:"awe6.interfaces.EKey",toString:i},SPACE:{_hx_index:50,__enum__:"awe6.interfaces.EKey",toString:i},TAB:{_hx_index:51,__enum__:"awe6.interfaces.EKey",toString:i},UP:{_hx_index:52,__enum__:"awe6.interfaces.EKey",toString:i},A:{_hx_index:53,__enum__:"awe6.interfaces.EKey",toString:i},B:{_hx_index:54,__enum__:"awe6.interfaces.EKey",toString:i},C:{_hx_index:55,__enum__:"awe6.interfaces.EKey",toString:i},D:{_hx_index:56,__enum__:"awe6.interfaces.EKey",toString:i},E:{_hx_index:57,__enum__:"awe6.interfaces.EKey",toString:i},F:{_hx_index:58,__enum__:"awe6.interfaces.EKey",toString:i},G:{_hx_index:59,__enum__:"awe6.interfaces.EKey",toString:i},H:{_hx_index:60,__enum__:"awe6.interfaces.EKey",toString:i},I:{_hx_index:61,__enum__:"awe6.interfaces.EKey",toString:i},J:{_hx_index:62,__enum__:"awe6.interfaces.EKey",toString:i},K:{_hx_index:63,__enum__:"awe6.interfaces.EKey",toString:i},L:{_hx_index:64,__enum__:"awe6.interfaces.EKey",toString:i},M:{_hx_index:65,__enum__:"awe6.interfaces.EKey",toString:i},N:{_hx_index:66,__enum__:"awe6.interfaces.EKey",toString:i},O:{_hx_index:67,__enum__:"awe6.interfaces.EKey",toString:i},P:{_hx_index:68,__enum__:"awe6.interfaces.EKey",toString:i},Q:{_hx_index:69,__enum__:"awe6.interfaces.EKey",toString:i},R:{_hx_index:70,__enum__:"awe6.interfaces.EKey",toString:i},S:{_hx_index:71,__enum__:"awe6.interfaces.EKey",toString:i},T:{_hx_index:72,__enum__:"awe6.interfaces.EKey",toString:i},U:{_hx_index:73,__enum__:"awe6.interfaces.EKey",toString:i},V:{_hx_index:74,__enum__:"awe6.interfaces.EKey",toString:i},W:{_hx_index:75,__enum__:"awe6.interfaces.EKey",toString:i},X:{_hx_index:76,__enum__:"awe6.interfaces.EKey",toString:i},Y:{_hx_index:77,__enum__:"awe6.interfaces.EKey",toString:i},Z:{_hx_index:78,__enum__:"awe6.interfaces.EKey",toString:i},NUMBER_0:{_hx_index:79,__enum__:"awe6.interfaces.EKey",toString:i},NUMBER_1:{_hx_index:80,__enum__:"awe6.interfaces.EKey",toString:i},NUMBER_2:{_hx_index:81,__enum__:"awe6.interfaces.EKey",toString:i},NUMBER_3:{_hx_index:82,__enum__:"awe6.interfaces.EKey",toString:i},NUMBER_4:{_hx_index:83,__enum__:"awe6.interfaces.EKey",toString:i},NUMBER_5:{_hx_index:84,__enum__:"awe6.interfaces.EKey",toString:i},NUMBER_6:{_hx_index:85,__enum__:"awe6.interfaces.EKey",toString:i},NUMBER_7:{_hx_index:86,__enum__:"awe6.interfaces.EKey",toString:i},NUMBER_8:{_hx_index:87,__enum__:"awe6.interfaces.EKey",toString:i},NUMBER_9:{_hx_index:88,__enum__:"awe6.interfaces.EKey",toString:i},COLON:{_hx_index:89,__enum__:"awe6.interfaces.EKey",toString:i},EQUALS:{_hx_index:90,__enum__:"awe6.interfaces.EKey",toString:i},HYPHEN:{_hx_index:91,__enum__:"awe6.interfaces.EKey",toString:i},SLASH:{_hx_index:92,__enum__:"awe6.interfaces.EKey",toString:i},TILDE:{_hx_index:93,__enum__:"awe6.interfaces.EKey",toString:i},SQUARELEFT:{_hx_index:94,__enum__:"awe6.interfaces.EKey",toString:i},SQUARERIGHT:{_hx_index:95,__enum__:"awe6.interfaces.EKey",toString:i},BACKSLASH:{_hx_index:96,__enum__:"awe6.interfaces.EKey",toString:i},APOSTROPHE:{_hx_index:97,__enum__:"awe6.interfaces.EKey",toString:i},TOPLEFT:{_hx_index:98,__enum__:"awe6.interfaces.EKey",toString:i},SUB_TYPE:((l=function(e){return{_hx_index:99,value:e,__enum__:"awe6.interfaces.EKey",toString:i}}).__params__=["value"],l)},it=b["awe6.interfaces.EMessage"]={__ename__:"awe6.interfaces.EMessage",__constructs__:["DISPOSE","INIT","PAUSE","RESUME","SUB_TYPE"],DISPOSE:{_hx_index:0,__enum__:"awe6.interfaces.EMessage",toString:i},INIT:{_hx_index:1,__enum__:"awe6.interfaces.EMessage",toString:i},PAUSE:{_hx_index:2,__enum__:"awe6.interfaces.EMessage",toString:i},RESUME:{_hx_index:3,__enum__:"awe6.interfaces.EMessage",toString:i},SUB_TYPE:((l=function(e){return{_hx_index:4,value:e,__enum__:"awe6.interfaces.EMessage",toString:i}}).__params__=["value"],l)},st=b["awe6.interfaces.EMouseButton"]={__ename__:"awe6.interfaces.EMouseButton",__constructs__:["LEFT","MIDDLE","RIGHT"],LEFT:{_hx_index:0,__enum__:"awe6.interfaces.EMouseButton",toString:i},MIDDLE:{_hx_index:1,__enum__:"awe6.interfaces.EMouseButton",toString:i},RIGHT:{_hx_index:2,__enum__:"awe6.interfaces.EMouseButton",toString:i}},nt=b["awe6.interfaces.EMouseCursor"]={__ename__:"awe6.interfaces.EMouseCursor",__constructs__:["ARROW","AUTO","BUTTON","HAND","IBEAM","SUB_TYPE"],ARROW:{_hx_index:0,__enum__:"awe6.interfaces.EMouseCursor",toString:i},AUTO:{_hx_index:1,__enum__:"awe6.interfaces.EMouseCursor",toString:i},BUTTON:{_hx_index:2,__enum__:"awe6.interfaces.EMouseCursor",toString:i},HAND:{_hx_index:3,__enum__:"awe6.interfaces.EMouseCursor",toString:i},IBEAM:{_hx_index:4,__enum__:"awe6.interfaces.EMouseCursor",toString:i},SUB_TYPE:((l=function(e){return{_hx_index:5,value:e,__enum__:"awe6.interfaces.EMouseCursor",toString:i}}).__params__=["value"],l)},rt=b["awe6.interfaces.EOverlayButton"]={__ename__:"awe6.interfaces.EOverlayButton",__constructs__:["BACK","MUTE","UNMUTE","PAUSE","UNPAUSE","SUB_TYPE"],BACK:{_hx_index:0,__enum__:"awe6.interfaces.EOverlayButton",toString:i},MUTE:{_hx_index:1,__enum__:"awe6.interfaces.EOverlayButton",toString:i},UNMUTE:{_hx_index:2,__enum__:"awe6.interfaces.EOverlayButton",toString:i},PAUSE:{_hx_index:3,__enum__:"awe6.interfaces.EOverlayButton",toString:i},UNPAUSE:{_hx_index:4,__enum__:"awe6.interfaces.EOverlayButton",toString:i},SUB_TYPE:((l=function(e){return{_hx_index:5,value:e,__enum__:"awe6.interfaces.EOverlayButton",toString:i}}).__params__=["value"],l)},at=b["awe6.interfaces.EScene"]={__ename__:"awe6.interfaces.EScene",__constructs__:["SPLASH","INTRO","SELECT_SESSION","SELECT_STORY","SELECT_LEVEL","INSTRUCTIONS","SETTINGS","MENU","AVATAR","SHOP","REWARDS","LEADERBOARD","GAME","INTERSTITIAL","CINEMATIC","RESULTS","EXIT","TEST","SUB_TYPE"],SPLASH:{_hx_index:0,__enum__:"awe6.interfaces.EScene",toString:i},INTRO:{_hx_index:1,__enum__:"awe6.interfaces.EScene",toString:i},SELECT_SESSION:{_hx_index:2,__enum__:"awe6.interfaces.EScene",toString:i},SELECT_STORY:{_hx_index:3,__enum__:"awe6.interfaces.EScene",toString:i},SELECT_LEVEL:{_hx_index:4,__enum__:"awe6.interfaces.EScene",toString:i},INSTRUCTIONS:{_hx_index:5,__enum__:"awe6.interfaces.EScene",toString:i},SETTINGS:{_hx_index:6,__enum__:"awe6.interfaces.EScene",toString:i},MENU:{_hx_index:7,__enum__:"awe6.interfaces.EScene",toString:i},AVATAR:{_hx_index:8,__enum__:"awe6.interfaces.EScene",toString:i},SHOP:{_hx_index:9,__enum__:"awe6.interfaces.EScene",toString:i},REWARDS:{_hx_index:10,__enum__:"awe6.interfaces.EScene",toString:i},LEADERBOARD:{_hx_index:11,__enum__:"awe6.interfaces.EScene",toString:i},GAME:{_hx_index:12,__enum__:"awe6.interfaces.EScene",toString:i},INTERSTITIAL:{_hx_index:13,__enum__:"awe6.interfaces.EScene",toString:i},CINEMATIC:{_hx_index:14,__enum__:"awe6.interfaces.EScene",toString:i},RESULTS:{_hx_index:15,__enum__:"awe6.interfaces.EScene",toString:i},EXIT:{_hx_index:16,__enum__:"awe6.interfaces.EScene",toString:i},TEST:{_hx_index:17,__enum__:"awe6.interfaces.EScene",toString:i},SUB_TYPE:((l=function(e){return{_hx_index:18,value:e,__enum__:"awe6.interfaces.EScene",toString:i}}).__params__=["value"],l)},_t=b["awe6.interfaces.ETextAlign"]={__ename__:"awe6.interfaces.ETextAlign",__constructs__:["JUSTIFY","LEFT","CENTER","RIGHT"],JUSTIFY:{_hx_index:0,__enum__:"awe6.interfaces.ETextAlign",toString:i},LEFT:{_hx_index:1,__enum__:"awe6.interfaces.ETextAlign",toString:i},CENTER:{_hx_index:2,__enum__:"awe6.interfaces.ETextAlign",toString:i},RIGHT:{_hx_index:3,__enum__:"awe6.interfaces.ETextAlign",toString:i}},ot=b["awe6.interfaces.ETextStyle"]={__ename__:"awe6.interfaces.ETextStyle",__constructs__:["BUTTON","BODY","HEADLINE","SUBHEAD","SMALLPRINT","OVERSIZED","SUB_TYPE"],BUTTON:{_hx_index:0,__enum__:"awe6.interfaces.ETextStyle",toString:i},BODY:{_hx_index:1,__enum__:"awe6.interfaces.ETextStyle",toString:i},HEADLINE:{_hx_index:2,__enum__:"awe6.interfaces.ETextStyle",toString:i},SUBHEAD:{_hx_index:3,__enum__:"awe6.interfaces.ETextStyle",toString:i},SMALLPRINT:{_hx_index:4,__enum__:"awe6.interfaces.ETextStyle",toString:i},OVERSIZED:{_hx_index:5,__enum__:"awe6.interfaces.ETextStyle",toString:i},SUB_TYPE:((l=function(e){return{_hx_index:6,value:e,__enum__:"awe6.interfaces.ETextStyle",toString:i}}).__params__=["value"],l)};(t["b10ski.AEntity"]=Qe).__name__="b10ski.AEntity",Qe.__super__=m,Qe.prototype=e(m.prototype,{__class__:Qe});function ht(e){this._kernel=e,this._tools=this._kernel.tools,this._session=this._kernel.get_session(),this._assets=this._kernel.assets,this._factory=e.factory}(t["b10ski.AVo"]=ht).__name__="b10ski.AVo",ht.prototype={__class__:ht};function lt(e){Ue.call(this,e)}(t["b10ski.AssetManager"]=lt).__name__="b10ski.AssetManager",lt.__super__=Ue,lt.prototype=e(Ue.prototype,{_init:function(){Ue.prototype._init.call(this),this._factory=this._kernel.factory,this.overlayPauseUp=this._createView(ut.OVERLAY_PAUSE_UP),this.overlayPauseOver=this._createView(ut.OVERLAY_PAUSE_OVER)},get_buttonOver:function(){return this._createView(ut.BUTTON_OVER)},get_buttonUp:function(){return this._createView(ut.BUTTON_UP)},get_buttonSmallOver:function(){return this._createView(ut.BUTTON_SMALL_OVER)},get_buttonSmallUp:function(){return this._createView(ut.BUTTON_SMALL_UP)},_createView:function(e){var t,i=new createjs.Container,s=new createjs.Bitmap(this.getAsset("assets/gui/Buttons.png"));switch(e._hx_index){case 0:t=new createjs.Rectangle(0,0,200,65);break;case 1:t=new createjs.Rectangle(200,0,200,65);break;case 2:t=new createjs.Rectangle(400,65,100,30);break;case 3:t=new createjs.Rectangle(400,95,100,30);break;case 4:t=new createjs.Rectangle(0,65,65,65);break;case 5:t=new createjs.Rectangle(65,65,65,65);break;case 6:t=new createjs.Rectangle(130,65,65,65);break;case 7:t=new createjs.Rectangle(195,65,65,65);break;case 8:t=new createjs.Rectangle(400,0,50,50);break;case 9:t=new createjs.Rectangle(450,0,50,50)}return s.sourceRect=t,s.cache(0,0,s.sourceRect.width,s.sourceRect.height),i.addChild(s),new Ye(this._kernel,i)},__class__:lt,__properties__:e(Ue.prototype.__properties__,{get_buttonSmallUp:"get_buttonSmallUp",get_buttonSmallOver:"get_buttonSmallOver",get_buttonUp:"get_buttonUp",get_buttonOver:"get_buttonOver"})});function ct(e,t,i){this.COLOR_GREY=5789784,this.COLOR_BLACK=0,this.COLOR_WHITE=16777215,this.TEXTSTYLE_HUD_COINS=ot.SUB_TYPE("HUD_COINS"),this.TEXTSTYLE_HUD_TIMER=ot.SUB_TYPE("HUD_TIMER"),this.TEXTSTYLE_HUD_TITLE=ot.SUB_TYPE("HUD_TITLE"),this.TEXTSTYLE_PANEL_STATS=ot.SUB_TYPE("PANEL_STATS"),this.TEXTSTYLE_PANEL_MESSAGE=ot.SUB_TYPE("PANEL_MESSAGE"),this.TEXTSTYLE_PANEL_TITLE=ot.SUB_TYPE("PANEL_TITLE"),this.MESSAGE_FINISH_LINE=it.SUB_TYPE("FINISH_LINE"),De.call(this,e,t,i)}var ut=b["b10ski.EAsset"]={__ename__:"b10ski.EAsset",__constructs__:["BUTTON_UP","BUTTON_OVER","BUTTON_SMALL_UP","BUTTON_SMALL_OVER","BUTTON_TWITTER_UP","BUTTON_TWITTER_OVER","BUTTON_FACEBOOK_UP","BUTTON_FACEBOOK_OVER","OVERLAY_PAUSE_UP","OVERLAY_PAUSE_OVER"],BUTTON_UP:{_hx_index:0,__enum__:"b10ski.EAsset",toString:i},BUTTON_OVER:{_hx_index:1,__enum__:"b10ski.EAsset",toString:i},BUTTON_SMALL_UP:{_hx_index:2,__enum__:"b10ski.EAsset",toString:i},BUTTON_SMALL_OVER:{_hx_index:3,__enum__:"b10ski.EAsset",toString:i},BUTTON_TWITTER_UP:{_hx_index:4,__enum__:"b10ski.EAsset",toString:i},BUTTON_TWITTER_OVER:{_hx_index:5,__enum__:"b10ski.EAsset",toString:i},BUTTON_FACEBOOK_UP:{_hx_index:6,__enum__:"b10ski.EAsset",toString:i},BUTTON_FACEBOOK_OVER:{_hx_index:7,__enum__:"b10ski.EAsset",toString:i},OVERLAY_PAUSE_UP:{_hx_index:8,__enum__:"b10ski.EAsset",toString:i},OVERLAY_PAUSE_OVER:{_hx_index:9,__enum__:"b10ski.EAsset",toString:i}};(t["b10ski.Factory"]=ct).__name__="b10ski.Factory",ct.__super__=De,ct.prototype=e(De.prototype,{_configurer:function(e){var t;null==e&&(e=!1),e&&(this.id="b10ski",t="1",null!=Ii.getString("revision")&&(t=Ii.getString("revision").split("\r\n")[0]),this.version="1.1."+t+"-pok",this.author="https://b10b.com",this.isDecached=!1,this.width=720,this.height=405,this.joypadTouchType=et.DPAD,this.bgColor=0,this.startingSceneType=at.INTRO,this.targetFramerate=30,this.isFixedUpdates=!0)},_launchKernel:function(){De.prototype._launchKernel.call(this),this._kernel.set_session(this.createSession("defaultSessionId")),"true"==this._kernel.getConfig("settings.disableEyeCandy")&&this._kernel.set_isEyeCandy(!1)},createAssetManager:function(){return null==this._assets&&(this._assets=new lt(this._kernel)),this._assets},createLogger:function(){var e=U.string(this._kernel.getConfig("settings.googleAnalytics.id"));return""!=e?new dt(this._kernel,e):De.prototype.createLogger.call(this)},createOverlay:function(){return new ri(this._kernel)},createPreloader:function(){return new gt(this._kernel,this._getAssetUrls(),this.isDecached)},createScene:function(e){switch(this._kernel.log("scene: "+U.string(e)),e._hx_index){case 1:return new wi(this._kernel,e);case 4:return new bi(this._kernel,e);case 5:return new Ei(this._kernel,e);case 7:return new vi(this._kernel,e);case 8:return new yi(this._kernel,e);case 9:return new Ti(this._kernel,e);case 12:return new mi(this._kernel,e);case 15:return new Si(this._kernel,e)}return De.prototype.createScene.call(this,e)},createSceneTransition:function(e,t){return new xi(this._kernel)},createSession:function(e){return new ft(this._kernel,e)},createTextStyle:function(e){null==e&&(e=ot.BODY);var t,i=this._kernel.getConfig("settings.font.name");if(null==e)t=new X(i,12,8421504);else switch(e._hx_index){case 0:t=new X(i,18,this.COLOR_WHITE,!1,!1,_t.CENTER,0,0,0,[]);break;case 1:t=new X(i,16,this.COLOR_BLACK,!1,!1,_t.LEFT,0,18,0,[]);break;case 2:t=new X(i,22,this.COLOR_WHITE,!1,!1,_t.CENTER,0,0,0,[]);break;case 3:t=new X(i,22,this.COLOR_WHITE,!1,!1,_t.RIGHT,0,0,0,[]);break;case 4:t=new X("Arial",11,this.COLOR_GREY,!1,!1,_t.CENTER,0,0,0,[]);break;case 5:t=new X(i,44,this.COLOR_WHITE,!1,!1,_t.RIGHT,0,0,0,[]);break;case 6:switch(e.value){case"HUD_COINS":t=new X(i,22,this.COLOR_WHITE,!1,!1,_t.RIGHT,0,0,0,[]);break;case"HUD_TIMER":t=new X(i,45,this.COLOR_WHITE,!1,!1,_t.LEFT,0,0,0,[]);break;case"HUD_TITLE":t=new X(i,12,this.COLOR_WHITE,!1,!1,_t.RIGHT,0,0,0,[]);break;case"PANEL_MESSAGE":t=new X(i,12,this.COLOR_WHITE,!1,!1,_t.CENTER,0,0,0,[]);break;case"PANEL_STATS":t=new X(i,12,this.COLOR_WHITE,!1,!1,_t.RIGHT,0,0,0,[]);break;case"PANEL_TITLE":t=new X(i,19,this.COLOR_WHITE,!1,!1,_t.RIGHT,0,0,0,[]);break;case"PRELOADER":t=new X(i,14,this.COLOR_WHITE,!1,!1,_t.CENTER,0,0,0,[]);break;default:t=null}}return t},getBackSceneType:function(e){switch(e._hx_index){case 4:return at.AVATAR;case 12:return at.SELECT_LEVEL;case 5:case 8:case 9:case 13:case 15:return at.MENU}return De.prototype.getBackSceneType.call(this,e)},getNextSceneType:function(e){switch(e._hx_index){case 1:return at.MENU;case 4:return at.GAME;case 5:case 7:return at.AVATAR;case 8:case 9:return at.SELECT_LEVEL;case 12:return at.RESULTS;case 13:case 15:return at.SHOP}return De.prototype.getNextSceneType.call(this,e)},createCanvas:function(e,t){var i=window.document.createElement("canvas");return i.width=e,i.height=t,i},__class__:ct});var dt=function(e,t){if(this._kernel=e,this._id=t,this._factory=this._kernel.factory,this._isTrackerEnabled=!e.isLocal&&"true"==e.getConfig("settings.googleAnalytics.enabled"),this._isTrackerEnabled)try{this._gaLib=ga,this._gaLib("create",this._id,"auto"),this._gaLib("send","pageview"),Ai.trace("Google Analytics enabled with property ID "+this._id,{fileName:"src/b10ski/LoggerGoogleAnalytics.hx",lineNumber:39,className:"b10ski.LoggerGoogleAnalytics",methodName:"new"})}catch(e){this._isTrackerEnabled=!1,Ai.trace("Google Analytics failed with property ID "+this._id,{fileName:"src/b10ski/LoggerGoogleAnalytics.hx",lineNumber:44,className:"b10ski.LoggerGoogleAnalytics",methodName:"new"})}};(t["b10ski.LoggerGoogleAnalytics"]=dt).__name__="b10ski.LoggerGoogleAnalytics",dt.__interfaces__=[ue],dt.prototype={log:function(e){I.substr(U.string(e),0,25);var t=U.string(e).split(": ");this._isTrackerEnabled?this._gaLib("send",{hitType:"event",eventCategory:t[0],eventAction:t[1],eventLabel:t[2]}):Ai.trace("Logger:"+U.string([t[0],t[1],t[2]]),{fileName:"src/b10ski/LoggerGoogleAnalytics.hx",lineNumber:64,className:"b10ski.LoggerGoogleAnalytics",methodName:"log"})},__class__:dt};function pt(){}(t["b10ski.Main"]=pt).__name__="b10ski.Main",pt.main=function(){var e,t=window.document.getElementById("gameCanvas"),i=pt.getParams().h.lang;null!=i&&(e="assets/__Config_"+i+".xml",t.setAttribute("config",e));var s=new createjs.Stage(t),n=new createjs.Container;s.addChild(n),pt.factory=new ct(n,!1,Ii.getString("config"))},pt.getParams=function(){for(var e=I.substr(p.location.search,1,null),t=new zi,i=0,s=new g("[&;]","g").split(e);i<s.length;){var n=s[i];++i;var r,a,_,o,h=n.split("=");h.length<2||(r=h.shift(),a=decodeURIComponent(r.split("+").join(" ")),_=h.join("="),o=decodeURIComponent(_.split("+").join(" ")),t.h[a]=o)}return t};var gt=function(e,t,i){Oe.call(this,e,t,i)};(t["b10ski.Preloader"]=gt).__name__="b10ski.Preloader",gt.__super__=Oe,gt.prototype=e(Oe.prototype,{_init:function(){this._factory=this._kernel.factory,this._session=this._kernel.get_session(),this._proprietaryAudioFormat="m4a";var e=new createjs.Bitmap("assets/__PreloaderBg.png");Oe.prototype._init.call(this);this._bg=new createjs.Shape,this._bg.graphics.beginFill("#404040"),this._bg.graphics.drawRoundRect(-2,-2,204,14,4),this._bg.graphics.endFill(),this._fg=new createjs.Shape,this._fg.graphics.beginFill("#ffffff"),this._fg.graphics.drawRoundRect(0,0,200,10,4),this._fg.graphics.endFill(),this._bg.x=this._fg.x=.5*(this._kernel.factory.width-200),this._bg.y=this._fg.y=this._kernel.factory.height-20-10-2,this._context.addChild(e),this._context.addChild(this._bg),this._context.addChild(this._fg),this._session.get_poki().loadingStart()},_updater:function(e){null==e&&(e=0),Oe.prototype._updater.call(this,e),this._fg.scaleX=this.get_progress()},_showAudioHoldMessage:function(){var e=new ui(this._kernel,this._kernel.factory.width,20,U.string(this._kernel.getConfig("gui.audioHoldMessage")).toUpperCase(),this._kernel.factory.createTextStyle(ot.SUB_TYPE("PRELOADER")));e.setPosition(0,this._bg.y-6),this.get_view().addChild(e.get_view()),this._context.removeChild(this._bg),this._context.removeChild(this._fg)},_onComplete:function(e){this._session.get_poki().loadingStop(),Oe.prototype._onComplete.call(this,e)},__class__:gt});var ft=function(e,t){Ve.call(this,e,t)};(t["b10ski.Session"]=ft).__name__="b10ski.Session",ft.__super__=Ve,ft.prototype=e(Ve.prototype,{get_poki:function(){return ft._poki},_init:function(){this._version=3,Ve.prototype._init.call(this)},_getter:function(){Ve.prototype._getter.call(this),this._upgradeSpeedUnitA=this._getValidatedInteger(this._data.upgradeSpeedUnitA),this._upgradeSteeringUnitA=this._getValidatedInteger(this._data.upgradeSteeringUnitA),this._upgradeAccelerationUnitA=this._getValidatedInteger(this._data.upgradeAccelerationUnitA),this._upgradeBoostUnitA=this._getValidatedInteger(this._data.upgradeBoostUnitA),this._medalLevel1UnitA=this._getValidatedInteger(this._data.medalLevel1UnitA),this._medalLevel2UnitA=this._getValidatedInteger(this._data.medalLevel2UnitA),this._medalLevel3UnitA=this._getValidatedInteger(this._data.medalLevel3UnitA),this._coinsUnitA=this._getValidatedInteger(this._data.coinsUnitA),this._upgradeSpeedUnitB=this._getValidatedInteger(this._data.upgradeSpeedUnitB),this._upgradeSteeringUnitB=this._getValidatedInteger(this._data.upgradeSteeringUnitB),this._upgradeAccelerationUnitB=this._getValidatedInteger(this._data.upgradeAccelerationUnitB),this._upgradeBoostUnitB=this._getValidatedInteger(this._data.upgradeBoostUnitB),this._medalLevel1UnitB=this._getValidatedInteger(this._data.medalLevel1UnitB),this._medalLevel2UnitB=this._getValidatedInteger(this._data.medalLevel2UnitB),this._medalLevel3UnitB=this._getValidatedInteger(this._data.medalLevel3UnitB),this._coinsUnitB=this._getValidatedInteger(this._data.coinsUnitB)},_getValidatedInteger:function(e){return null==e||isNaN(e)?0:e},_setter:function(){Ve.prototype._setter.call(this),this._data.upgradeSpeedUnitA=this._upgradeSpeedUnitA,this._data.upgradeSteeringUnitA=this._upgradeSteeringUnitA,this._data.upgradeAccelerationUnitA=this._upgradeAccelerationUnitA,this._data.upgradeBoostUnitA=this._upgradeBoostUnitA,this._data.medalLevel1UnitA=this._medalLevel1UnitA,this._data.medalLevel2UnitA=this._medalLevel2UnitA,this._data.medalLevel3UnitA=this._medalLevel3UnitA,this._data.coinsUnitA=this._coinsUnitA,this._data.upgradeSpeedUnitB=this._upgradeSpeedUnitB,this._data.upgradeSteeringUnitB=this._upgradeSteeringUnitB,this._data.upgradeAccelerationUnitB=this._upgradeAccelerationUnitB,this._data.upgradeBoostUnitB=this._upgradeBoostUnitB,this._data.medalLevel1UnitB=this._medalLevel1UnitB,this._data.medalLevel2UnitB=this._medalLevel2UnitB,this._data.medalLevel3UnitB=this._medalLevel3UnitB,this._data.coinsUnitB=this._coinsUnitB},_resetter:function(){Ve.prototype._resetter.call(this),this.cache=new yt(this._kernel),null==ft._poki&&(ft._poki=new mt(this._kernel)),this.resetUnit(At.UNIT_A),this.resetUnit(At.UNIT_B)},resetUnit:function(e){switch(e._hx_index){case 0:this._upgradeSpeedUnitA=0,this._upgradeSteeringUnitA=0,this._upgradeAccelerationUnitA=0,this._upgradeBoostUnitA=0,this._medalLevel1UnitA=0,this._medalLevel2UnitA=0,this._medalLevel3UnitA=0,this._coinsUnitA=0;break;case 1:this._upgradeSpeedUnitB=0,this._upgradeSteeringUnitB=0,this._upgradeAccelerationUnitB=0,this._upgradeBoostUnitB=0,this._medalLevel1UnitB=0,this._medalLevel2UnitB=0,this._medalLevel3UnitB=0,this._coinsUnitB=0}},setCoins:function(e,t){switch(null==e&&(e=this.cache.unitType),e._hx_index){case 0:return this._coinsUnitA=t;case 1:return this._coinsUnitB=t}},getCoins:function(e){var t;switch(null==e&&(e=this.cache.unitType),e._hx_index){case 0:t=this._coinsUnitA;break;case 1:t=this._coinsUnitB}return 0|Math.min(99999,t)},setMedal:function(e,t,i){switch(null==t&&(t=this.cache.unitType),t._hx_index){case 0:switch(e._hx_index){case 0:this._medalLevel1UnitA=0|Math.max(this._medalLevel1UnitA,i._hx_index);break;case 1:this._medalLevel2UnitA=0|Math.max(this._medalLevel2UnitA,i._hx_index);break;case 2:this._medalLevel3UnitA=0|Math.max(this._medalLevel3UnitA,i._hx_index)}break;case 1:switch(e._hx_index){case 0:this._medalLevel1UnitB=0|Math.max(this._medalLevel1UnitB,i._hx_index);break;case 1:this._medalLevel2UnitB=0|Math.max(this._medalLevel2UnitB,i._hx_index);break;case 2:this._medalLevel3UnitB=0|Math.max(this._medalLevel3UnitB,i._hx_index)}}},getMedal:function(e,t){switch(null==t&&(t=this.cache.unitType),t._hx_index){case 0:switch(e._hx_index){case 0:return k.createEnumIndex(bt,this._medalLevel1UnitA,null);case 1:return k.createEnumIndex(bt,this._medalLevel2UnitA,null);case 2:return k.createEnumIndex(bt,this._medalLevel3UnitA,null)}break;case 1:switch(e._hx_index){case 0:return k.createEnumIndex(bt,this._medalLevel1UnitB,null);case 1:return k.createEnumIndex(bt,this._medalLevel2UnitB,null);case 2:return k.createEnumIndex(bt,this._medalLevel3UnitB,null)}}},setUpgrade:function(e,t,i){switch(null==t&&(t=this.cache.unitType),i<0&&(i=0),8<i&&(i=8),t._hx_index){case 0:switch(e._hx_index){case 0:this._upgradeSpeedUnitA=i;break;case 1:this._upgradeSteeringUnitA=i;break;case 2:this._upgradeAccelerationUnitA=i;break;case 3:this._upgradeBoostUnitA=i}break;case 1:switch(e._hx_index){case 0:this._upgradeSpeedUnitB=i;break;case 1:this._upgradeSteeringUnitB=i;break;case 2:this._upgradeAccelerationUnitB=i;break;case 3:this._upgradeBoostUnitB=i}}},getUpgrade:function(e,t){switch(null==t&&(t=this.cache.unitType),t._hx_index){case 0:switch(e._hx_index){case 0:return this._upgradeSpeedUnitA;case 1:return this._upgradeSteeringUnitA;case 2:return this._upgradeAccelerationUnitA;case 3:return this._upgradeBoostUnitA}break;case 1:switch(e._hx_index){case 0:return this._upgradeSpeedUnitB;case 1:return this._upgradeSteeringUnitB;case 2:return this._upgradeAccelerationUnitB;case 3:return this._upgradeBoostUnitB}}},getUpgradeTitle:function(e){var t;switch(e._hx_index){case 0:t="gui.upgrades.speed";break;case 1:t="gui.upgrades.steering";break;case 2:t="gui.upgrades.acceleration";break;case 3:t="gui.upgrades.boost"}return U.string(this._kernel.getConfig(t)).toUpperCase()},getMedalTitle:function(e){var t;switch(e._hx_index){case 0:t="gui.medals.none";break;case 1:t="gui.medals.bronze";break;case 2:t="gui.medals.silver";break;case 3:t="gui.medals.gold"}return U.string(this._kernel.getConfig(t)).toUpperCase()},getMedalFromScore:function(e,t,i,s){return e<t?bt.MEDAL_GOLD:e<i?bt.MEDAL_SILVER:e<s?bt.MEDAL_BRONZE:bt.MEDAL_NONE},setIsTester:function(e){this._isTester=e},get_isTester:function(){return!!this._kernel.isDebug||this._isTester},__class__:ft,__properties__:{get_poki:"get_poki"}});var yt=function(e){this._kernel=e,this.totalPlays=0,this.benchmark=0,this.debugMessage="",this.unitType=At.UNIT_B,this.levelType=St.LEVEL_1,this.medalType=bt.MEDAL_NONE};(t["b10ski._Session._HelperCache"]=yt).__name__="b10ski._Session._HelperCache",yt.prototype={__class__:yt};var mt=function(e){this._wasMute=!1,this.isEnabled=!1,this._kernel=e;try{this._sdk=window.PokiSDK,null!=this._sdk&&(this._sdk.init(),this._sdk.setDebug(!1),this.isEnabled=!0)}catch(e){var t=Ci.caught(e).unwrap();this.isEnabled=!1,Ai.trace(t,{fileName:"src/b10ski/Session.hx",lineNumber:352,className:"b10ski._Session._HelperPoki",methodName:"new"})}Ai.trace("Poki SDK is "+(this.isEnabled?"enabled":"disabled"),{fileName:"src/b10ski/Session.hx",lineNumber:354,className:"b10ski._Session._HelperPoki",methodName:"new"})};(t["b10ski._Session._HelperPoki"]=mt).__name__="b10ski._Session._HelperPoki",mt.prototype={loadingStart:function(){Ai.trace("loadingStart",{fileName:"src/b10ski/Session.hx",lineNumber:359,className:"b10ski._Session._HelperPoki",methodName:"loadingStart"}),this.isEnabled&&null!=this._sdk&&null!=this._sdk.gameLoadingStart&&this._sdk.gameLoadingStart()},loadingStop:function(){Ai.trace("loadingStop",{fileName:"src/b10ski/Session.hx",lineNumber:367,className:"b10ski._Session._HelperPoki",methodName:"loadingStop"}),this.isEnabled&&null!=this._sdk&&null!=this._sdk.gameLoadingFinished&&this._sdk.gameLoadingFinished()},gameplayStart:function(){Ai.trace("gameplayStart",{fileName:"src/b10ski/Session.hx",lineNumber:375,className:"b10ski._Session._HelperPoki",methodName:"gameplayStart"}),this.isEnabled&&null!=this._sdk&&null!=this._sdk.gameplayStart&&this._sdk.gameplayStart()},gameplayStop:function(){Ai.trace("gameplayStop",{fileName:"src/b10ski/Session.hx",lineNumber:383,className:"b10ski._Session._HelperPoki",methodName:"gameplayStop"}),this.isEnabled&&null!=this._sdk&&null!=this._sdk.gameplayStop&&this._sdk.gameplayStop()},happyTime:function(e){Ai.trace("happyTime",{fileName:"src/b10ski/Session.hx",lineNumber:391,className:"b10ski._Session._HelperPoki",methodName:"happyTime"}),this.isEnabled&&null!=this._sdk&&null!=this._sdk.happyTime&&this._sdk.happyTime(e)},commercialBreak:function(e){var t,i=this;Ai.trace("commercialBreak",{fileName:"src/b10ski/Session.hx",lineNumber:399,className:"b10ski._Session._HelperPoki",methodName:"commercialBreak"}),this.isEnabled&&null!=this._sdk&&null!=this._sdk.commercialBreak?(this._wasMute=this._kernel.audio.isMute,this._kernel.audio.set_isMute(!0),createjs.Ticker.setPaused(!0),Ai.trace("Commercial break starting",{fileName:"src/b10ski/Session.hx",lineNumber:405,className:"b10ski._Session._HelperPoki",methodName:"commercialBreak"}),t=function(){i._kernel.audio.set_isMute(i._wasMute),createjs.Ticker.setPaused(!1),null!=e&&e()},this._sdk.commercialBreak().then(function(e){Ai.trace("Commercial break finished, proceeding to game",{fileName:"src/b10ski/Session.hx",lineNumber:415,className:"b10ski._Session._HelperPoki",methodName:"commercialBreak"}),t()}).catch(function(e){Ai.trace("Commercial break FAILED, proceeding to game",{fileName:"src/b10ski/Session.hx",lineNumber:420,className:"b10ski._Session._HelperPoki",methodName:"commercialBreak"}),t()})):e()},__class__:mt};function Et(e,t){this.shake={value:0,resistance:.9,dx:0,dy:0},this._trackLength=t,Qe.call(this,e)}(t["b10ski.game.Camera"]=Et).__name__="b10ski.game.Camera",Et.__super__=Qe,Et.prototype=e(Qe.prototype,{_init:function(){Qe.prototype._init.call(this),this.drawDistance=80,this.fieldOfView=120,this.fogDensity=5,this.height=1440,this.depth=1/Math.tan(this.fieldOfView/2*Math.PI/180),this.position=0,this.angle=.135},_updater:function(e){var t,i;null==e&&(e=0),Qe.prototype._updater.call(this,e),1==this._updates&&(this.height=5e3),this.height=.95*this.height+60|0,0<this.shake.value&&(this.shake.value*=this.shake.resistance,this.shake.value<.1?(this.shake.value=0,this.shake.dx=0,this.shake.dy=0):(t=Math.random()*this.shake.value*20,i=Math.random()<.5?-1:1,this.shake.dx=t*i,t=Math.random()*this.shake.value*20,i=Math.random()<.5?-1:1,this.shake.dy=t*i))},increasePosition:function(e,t){null==t&&(t=0),null==e&&(e=0),this.position+=e;this._tools;var i=this.angle+t,s=i-Math.floor(+i);this.angle=s},setShake:function(e){this.shake.value=Math.abs(1<e?1:e<0?0:e)},__class__:Et});function wt(e){if(this._kernel=e,this.isEnabled=!1,this.motionRelative=0,this._parentOrientation="",this._isIos=new g("iP[ao]d|iPhone","i").match(p.navigator.userAgent),this._isWindows=new g("Windows","").match(p.navigator.userAgent),this._isOrientationApproximation="true"==this._kernel.getConfig("settings.orientationApproximation"),"true"!=this._kernel.getConfig("settings.disableDeviceMotion"))try{this._orientation=this._getOrientation(),window.MessageEvent&&window.addEventListener("message",ms(this,this._onMessage),!1),window.DeviceMotionEvent&&window.addEventListener("devicemotion",ms(this,this._onDeviceMotion),!1),this.isEnabled=!0}catch(e){this.isEnabled=!1}}(t["b10ski.game.DeviceMotion"]=wt).__name__="b10ski.game.DeviceMotion",wt.prototype={dispose:function(){this.isEnabled=!1;try{window.MessageEvent&&window.removeEventListener("message",ms(this,this._onMessage),!1),window.DeviceMotionEvent&&window.removeEventListener("devicemotion",ms(this,this._onDeviceMotion),!1)}catch(e){}},_onMessage:function(e){null!=e.data.orientation&&(this._parentOrientation=e.data.orientation)},_onDeviceMotion:function(e){this._orientation=this._getOrientation(),this.motionRelative=0,"landscape"==this._orientation||"landscape-primary"==this._orientation||"90"==this._orientation?(this.motionRelative=e.accelerationIncludingGravity.y,this._isWindows&&(this.motionRelative=-e.accelerationIncludingGravity.x)):"landscape-secondary"==this._orientation||"-90"==this._orientation?(this.motionRelative=-e.accelerationIncludingGravity.y,this._isWindows&&(this.motionRelative=e.accelerationIncludingGravity.x)):"portrait"==this._orientation||"portrait-primary"==this._orientation||"0"==this._orientation?(this.motionRelative=-e.accelerationIncludingGravity.x,this._isWindows&&(this.motionRelative=-e.accelerationIncludingGravity.y)):"portrait-secondary"==this._orientation||"180"==this._orientation?(this.motionRelative=e.accelerationIncludingGravity.x,this._isWindows&&(this.motionRelative=e.accelerationIncludingGravity.y)):this.motionRelative=-e.accelerationIncludingGravity.y,this.motionRelative=Math.max(Math.min(this.motionRelative/3,1),-1)*(this._isIos?-1:1)},_getOrientation:function(){var e="";return""==(e=this._getWindowOrientation(window.top))&&(e=""!=this._parentOrientation?this._parentOrientation:this._isOrientationApproximation?window.innerWidth>window.innerHeight?"90":"0":this._getWindowOrientation(window)),e},_getWindowOrientation:function(e){var t="";try{null!=e.screen.orientation?(t=e.screen.orientation,null!=e.screen.orientation.type&&(t=e.screen.orientation.type)):null!=e.screen.mozOrientation?t=e.screen.mozOrientation:null!=e.screen.msOrientation?t=e.screen.msOrientation:null!=e.orientation&&(t=e.orientation)}catch(e){}return t},__class__:wt};function vt(e,t,i){this.index=e,this.offset=t,this.width=i}var St=b["b10ski.game.ELevel"]={__ename__:"b10ski.game.ELevel",__constructs__:["LEVEL_1","LEVEL_2","LEVEL_3"],LEVEL_1:{_hx_index:0,__enum__:"b10ski.game.ELevel",toString:i},LEVEL_2:{_hx_index:1,__enum__:"b10ski.game.ELevel",toString:i},LEVEL_3:{_hx_index:2,__enum__:"b10ski.game.ELevel",toString:i}},xt=b["b10ski.game.ELocation"]={__ename__:"b10ski.game.ELocation",__constructs__:["LOCATION_A"],LOCATION_A:{_hx_index:0,__enum__:"b10ski.game.ELocation",toString:i}},bt=b["b10ski.game.EMedal"]={__ename__:"b10ski.game.EMedal",__constructs__:["MEDAL_NONE","MEDAL_BRONZE","MEDAL_SILVER","MEDAL_GOLD"],MEDAL_NONE:{_hx_index:0,__enum__:"b10ski.game.EMedal",toString:i},MEDAL_BRONZE:{_hx_index:1,__enum__:"b10ski.game.EMedal",toString:i},MEDAL_SILVER:{_hx_index:2,__enum__:"b10ski.game.EMedal",toString:i},MEDAL_GOLD:{_hx_index:3,__enum__:"b10ski.game.EMedal",toString:i}},Tt=b["b10ski.game.EPose"]={__ename__:"b10ski.game.EPose",__constructs__:["POSE_START1","POSE_START2","POSE_START3","POSE_START4","POSE_START5","POSE_START6","POSE_START7","POSE_SLOW_STRAIGHT","POSE_SLOW_TURN1","POSE_SLOW_TURN2","POSE_SLOW_TURN3","POSE_FAST_STRAIGHT","POSE_FAST_TURN1","POSE_FAST_TURN2","POSE_FAST_TURN3"],POSE_START1:{_hx_index:0,__enum__:"b10ski.game.EPose",toString:i},POSE_START2:{_hx_index:1,__enum__:"b10ski.game.EPose",toString:i},POSE_START3:{_hx_index:2,__enum__:"b10ski.game.EPose",toString:i},POSE_START4:{_hx_index:3,__enum__:"b10ski.game.EPose",toString:i},POSE_START5:{_hx_index:4,__enum__:"b10ski.game.EPose",toString:i},POSE_START6:{_hx_index:5,__enum__:"b10ski.game.EPose",toString:i},POSE_START7:{_hx_index:6,__enum__:"b10ski.game.EPose",toString:i},POSE_SLOW_STRAIGHT:{_hx_index:7,__enum__:"b10ski.game.EPose",toString:i},POSE_SLOW_TURN1:{_hx_index:8,__enum__:"b10ski.game.EPose",toString:i},POSE_SLOW_TURN2:{_hx_index:9,__enum__:"b10ski.game.EPose",toString:i},POSE_SLOW_TURN3:{_hx_index:10,__enum__:"b10ski.game.EPose",toString:i},POSE_FAST_STRAIGHT:{_hx_index:11,__enum__:"b10ski.game.EPose",toString:i},POSE_FAST_TURN1:{_hx_index:12,__enum__:"b10ski.game.EPose",toString:i},POSE_FAST_TURN2:{_hx_index:13,__enum__:"b10ski.game.EPose",toString:i},POSE_FAST_TURN3:{_hx_index:14,__enum__:"b10ski.game.EPose",toString:i}},kt=b["b10ski.game.ERoad"]={__ename__:"b10ski.game.ERoad",__constructs__:["ROAD_NONE","ROAD_LEFT_SHORT","ROAD_LEFT_MEDIUM","ROAD_LEFT_LONG","ROAD_RIGHT_SHORT","ROAD_RIGHT_MEDIUM","ROAD_RIGHT_LONG"],ROAD_NONE:{_hx_index:0,__enum__:"b10ski.game.ERoad",toString:i},ROAD_LEFT_SHORT:{_hx_index:1,__enum__:"b10ski.game.ERoad",toString:i},ROAD_LEFT_MEDIUM:{_hx_index:2,__enum__:"b10ski.game.ERoad",toString:i},ROAD_LEFT_LONG:{_hx_index:3,__enum__:"b10ski.game.ERoad",toString:i},ROAD_RIGHT_SHORT:{_hx_index:4,__enum__:"b10ski.game.ERoad",toString:i},ROAD_RIGHT_MEDIUM:{_hx_index:5,__enum__:"b10ski.game.ERoad",toString:i},ROAD_RIGHT_LONG:{_hx_index:6,__enum__:"b10ski.game.ERoad",toString:i}},Ct=b["b10ski.game.EScenery"]={__ename__:"b10ski.game.EScenery",__constructs__:["SCENERY_COIN","SCENERY_START_LEFT","SCENERY_START_RIGHT","SCENERY_FINISH_LEFT","SCENERY_FINISH_RIGHT","SCENERY_TUNNEL_1_LEFT","SCENERY_TUNNEL_1_RIGHT","SCENERY_TUNNEL_2_LEFT","SCENERY_TUNNEL_2_RIGHT","SCENERY_FLOODLIGHT","SCENERY_SIDING_LEFT","SCENERY_SIDING_RIGHT","SCENERY_TREE_1","SCENERY_TREE_2","SCENERY_BANNER_LEFT","SCENERY_BANNER_RIGHT","SCENERY_HILL_1","SCENERY_HILL_2","SCENERY_GATE_1_LEFT","SCENERY_GATE_1_RIGHT","SCENERY_GATE_2_LEFT","SCENERY_GATE_2_RIGHT","SCENERY_SNOW_1","SCENERY_SNOW_2","SCENERY_STADIUM_LEFT","SCENERY_STADIUM_RIGHT"],SCENERY_COIN:{_hx_index:0,__enum__:"b10ski.game.EScenery",toString:i},SCENERY_START_LEFT:{_hx_index:1,__enum__:"b10ski.game.EScenery",toString:i},SCENERY_START_RIGHT:{_hx_index:2,__enum__:"b10ski.game.EScenery",toString:i},SCENERY_FINISH_LEFT:{_hx_index:3,__enum__:"b10ski.game.EScenery",toString:i},SCENERY_FINISH_RIGHT:{_hx_index:4,__enum__:"b10ski.game.EScenery",toString:i},SCENERY_TUNNEL_1_LEFT:{_hx_index:5,__enum__:"b10ski.game.EScenery",toString:i},SCENERY_TUNNEL_1_RIGHT:{_hx_index:6,__enum__:"b10ski.game.EScenery",toString:i},SCENERY_TUNNEL_2_LEFT:{_hx_index:7,__enum__:"b10ski.game.EScenery",toString:i},SCENERY_TUNNEL_2_RIGHT:{_hx_index:8,__enum__:"b10ski.game.EScenery",toString:i},SCENERY_FLOODLIGHT:{_hx_index:9,__enum__:"b10ski.game.EScenery",toString:i},SCENERY_SIDING_LEFT:{_hx_index:10,__enum__:"b10ski.game.EScenery",toString:i},SCENERY_SIDING_RIGHT:{_hx_index:11,__enum__:"b10ski.game.EScenery",toString:i},SCENERY_TREE_1:{_hx_index:12,__enum__:"b10ski.game.EScenery",toString:i},SCENERY_TREE_2:{_hx_index:13,__enum__:"b10ski.game.EScenery",toString:i},SCENERY_BANNER_LEFT:{_hx_index:14,__enum__:"b10ski.game.EScenery",toString:i},SCENERY_BANNER_RIGHT:{_hx_index:15,__enum__:"b10ski.game.EScenery",toString:i},SCENERY_HILL_1:{_hx_index:16,__enum__:"b10ski.game.EScenery",toString:i},SCENERY_HILL_2:{_hx_index:17,__enum__:"b10ski.game.EScenery",toString:i},SCENERY_GATE_1_LEFT:{_hx_index:18,__enum__:"b10ski.game.EScenery",toString:i},SCENERY_GATE_1_RIGHT:{_hx_index:19,__enum__:"b10ski.game.EScenery",toString:i},SCENERY_GATE_2_LEFT:{_hx_index:20,__enum__:"b10ski.game.EScenery",toString:i},SCENERY_GATE_2_RIGHT:{_hx_index:21,__enum__:"b10ski.game.EScenery",toString:i},SCENERY_SNOW_1:{_hx_index:22,__enum__:"b10ski.game.EScenery",toString:i},SCENERY_SNOW_2:{_hx_index:23,__enum__:"b10ski.game.EScenery",toString:i},SCENERY_STADIUM_LEFT:{_hx_index:24,__enum__:"b10ski.game.EScenery",toString:i},SCENERY_STADIUM_RIGHT:{_hx_index:25,__enum__:"b10ski.game.EScenery",toString:i}},At=b["b10ski.game.EUnit"]={__ename__:"b10ski.game.EUnit",__constructs__:["UNIT_A","UNIT_B"],UNIT_A:{_hx_index:0,__enum__:"b10ski.game.EUnit",toString:i},UNIT_B:{_hx_index:1,__enum__:"b10ski.game.EUnit",toString:i}},It=b["b10ski.game.EUpgrade"]={__ename__:"b10ski.game.EUpgrade",__constructs__:["UPGRADE_SPEED","UPGRADE_STEERING","UPGRADE_ACCELERATION","UPGRADE_BOOST"],UPGRADE_SPEED:{_hx_index:0,__enum__:"b10ski.game.EUpgrade",toString:i},UPGRADE_STEERING:{_hx_index:1,__enum__:"b10ski.game.EUpgrade",toString:i},UPGRADE_ACCELERATION:{_hx_index:2,__enum__:"b10ski.game.EUpgrade",toString:i},UPGRADE_BOOST:{_hx_index:3,__enum__:"b10ski.game.EUpgrade",toString:i}};(t["b10ski.game.Gate"]=vt).__name__="b10ski.game.Gate",vt.prototype={__class__:vt};function Ut(e,t,i,s){null==s&&(s=1),this._kernel=e,this._width=t,this._height=i,this._brightness=s,this._x=0,this._y=0,this._hyp=1.75*Math.sqrt(this._width*this._width+this._height*this._height),this._lenses=[];for(var n=[.75,0,.25,.35,.55,.65,.75,.9,1],r=0,a=n.length;r<a;){var _=r++,o=new Pt;o.deviation=n[_],o.sprite=this._getSprite(_),this._lenses.push(o)}this._spriteSource=this._kernel.assets.getAsset("assets/location/LensFlares.jpg")}(t["b10ski.game.Lensflare"]=Ut).__name__="b10ski.game.Lensflare",Ut.prototype={_getSprite:function(e){var t,i={x:0,y:0,w:256,h:256};switch(e){case 1:case 5:t=256;break;case 2:case 6:t=512;break;case 3:case 7:t=768;break;case 0:case 4:t=0;break;default:t=0}switch(i.x=t,e){case 4:case 5:case 6:case 7:t=256;break;default:t=0}return i.y=t,i},draw:function(e,t,i){this._x=(t+256)%1024,this._y=i-64;var s=2*(this._x-.5*this._width),n=2*(this._y-.5*this._height),r=Math.sqrt(s*s+n*n)/this._hyp,a=4*(this._brightness-2.5*r*this._brightness);if(a<0&&(a=0),e.save(),e.globalCompositeOperation="lighter",0<a){e.globalAlpha=a;for(var _=0,o=this._lenses;_<o.length;){var h=o[_];++_;var l=Math.round(this._x+Math.round(h.deviation*-s)-128),c=Math.round(this._y+Math.round(.9*h.deviation*-n)-128);e.drawImage(this._spriteSource,h.sprite.x,h.sprite.y,h.sprite.w,h.sprite.h,l,c,256,256)}}e.restore()},__class__:Ut};var Pt=function(){};(t["b10ski.game._Lensflare._HelperLens"]=Pt).__name__="b10ski.game._Lensflare._HelperLens",Pt.prototype={__class__:Pt};function Rt(e,t,i){ht.call(this,e),this.type=t,this.title=this._getTitle(),this.locationType=this._getLocationType(),this.scoreGold=this._getScoreGold(),this.scoreSilver=this._getScoreSilver(),this.scoreBronze=this._getScoreBronze(),this.medalType=this._session.getMedal(this.type,i),this.isLocked=this._getIsLocked(i),this.isNew=this.medalType==bt.MEDAL_NONE&&!this.isLocked,this.message=this._getMessage(),this.trackLength=this._getTrackLength(),this.trackHills=this._getTrackHills(),this.trackCurves=this._getTrackCurves(),this.gateWidth=this._getGateWidth(),this.gateOffset=this._getGateOffset(),this.gateInterval=this._getGateInterval()}(t["b10ski.game.LevelVo"]=Rt).__name__="b10ski.game.LevelVo",Rt.__super__=ht,Rt.prototype=e(ht.prototype,{_getLocationType:function(){switch(this.type._hx_index){case 0:case 1:case 2:return xt.LOCATION_A}},_getTitle:function(){var e;switch(this.type._hx_index){case 0:e="gui.levels.level1";break;case 1:e="gui.levels.level2";break;case 2:e="gui.levels.level3"}return this._kernel.getConfig(e)},_getIsLocked:function(e){switch(this.type._hx_index){case 0:return!1;case 1:return this._session.getMedal(St.LEVEL_1,e)._hx_index<=bt.MEDAL_NONE._hx_index;case 2:return this._session.getMedal(St.LEVEL_2,e)._hx_index<=bt.MEDAL_NONE._hx_index}},_getScoreGold:function(){var e;switch(this.type._hx_index){case 0:e=28;break;case 1:e=40;break;case 2:e=54}return e*this._factory.targetFramerate},_getScoreSilver:function(){var e;switch(this.type._hx_index){case 0:e=30;break;case 1:e=47;break;case 2:e=67}return e*this._factory.targetFramerate},_getScoreBronze:function(){var e;switch(this.type._hx_index){case 0:e=40;break;case 1:e=57;break;case 2:e=77}return e*this._factory.targetFramerate},_getMessage:function(){var e,t=this._kernel.getConfig(this.isLocked?"gui.scenes.selectLevel.messageLocked":"gui.scenes.selectLevel.messageNew");switch(this.type._hx_index){case 0:e="";break;case 1:e="gui.levels.level1";break;case 2:e="gui.levels.level2"}var i=this._kernel.getConfig(e);return c.replace(t,"__PREVIOUS_LEVEL__",i)},_getTrackLength:function(){switch(this.type._hx_index){case 0:return 640;case 1:return 960;case 2:return 1280}},_getTrackHills:function(){switch(this.type._hx_index){case 0:return.35;case 1:return.65;case 2:return 1}},_getTrackCurves:function(){switch(this.type._hx_index){case 0:return.5;case 1:return.8;case 2:return 1}},_getGateWidth:function(){switch(this.type._hx_index){case 0:return.8;case 1:return.6;case 2:return.5}},_getGateOffset:function(){switch(this.type._hx_index){case 0:return 1;case 1:return 1.5;case 2:return 1.9}},_getGateInterval:function(){switch(this.type._hx_index){case 0:return 64;case 1:return 48;case 2:return 32}},__class__:Rt});function Dt(e,t,i){this._levelVo=t,this._unitVo=i,this.type=t.locationType,Qe.call(this,e)}(t["b10ski.game.Location"]=Dt).__name__="b10ski.game.Location",Dt.__super__=Qe,Dt.prototype=e(Qe.prototype,{_init:function(){Qe.prototype._init.call(this),this.vo=new Nt(this._kernel,this.type),this.addEntity(this._track=new Vt(this._kernel,this._levelVo,this.vo)),this.addEntity(this._camera=new Et(this._kernel,this._track.totalDistance)),this.addEntity(this._player=new Mt(this._kernel,this._unitVo,this._track,this._camera));var e=this._system.isDesktop?1:.7,t=Math.ceil(this._factory.width*e),i=Math.ceil(this._factory.height*e);this.addEntity(this._renderer=new Lt(this._kernel,this._track,this._camera,this._player,t,i),null,!0),this._renderer._context.scaleX=this._factory.width/t,this._renderer._context.scaleY=this._factory.height/i},getTime:function(){return this._player.time},getSpeed:function(){return Math.round(144*Math.pow(this._player.speedPerc*(.9975+.025*Math.random()),2.5))},__class__:Dt});var Nt=function(e,t){ht.call(this,e),this.type=t,this.imageHorizon=this._getImageHorizon(),this.imageRoad=this._getImageRoad(),this.bgColor=this._getBgColor(),this.sidingDistance=this._getSidingDistance()};(t["b10ski.game.LocationVo"]=Nt).__name__="b10ski.game.LocationVo",Nt.__super__=ht,Nt.prototype=e(ht.prototype,{_getImageHorizon:function(){return this._assets.getAsset("assets/location/Horizon.jpg")},_getImageRoad:function(){return this._assets.getAsset("assets/location/Roads.png")},_getBgColor:function(){return"#ffffff"},_getSidingDistance:function(){return 2.75},__class__:Nt});var Mt=function(e,t,i,s){this.unitVo=t,this._track=i,this._camera=s,Qe.call(this,e)};(t["b10ski.game.Player"]=Mt).__name__="b10ski.game.Player",Mt.__super__=Qe,Mt.prototype=e(Qe.prototype,{_init:function(){Qe.prototype._init.call(this),this.x=0,this.y=0,this.z=this._camera.height*this._camera.depth,this.speedPerc=0,this.segment=null,this.percent=0,this._speed=0,this._boost=0,this._impact=0,this.steer=0,this.time=0,this._width=.36,this._prevQuarter=0,this._biasSpeed=this.unitVo.getBias(It.UPGRADE_SPEED,.85,1),this._biasSteering=this.unitVo.getBias(It.UPGRADE_STEERING,.9,1.1),this._biasAcceleration=this.unitVo.getBias(It.UPGRADE_ACCELERATION,.95,1.25),this._biasBoost=this.unitVo.getBias(It.UPGRADE_BOOST,.5,1.02),this._biasCarving=this.unitVo.getBias(It.UPGRADE_STEERING,0,.25),this._maxSpeed=this._factory.targetFramerate*this._track.segmentDistance*.9|0,this._forceAcceleration=this._maxSpeed/6,this._forceBraking=-this._maxSpeed,this._forceCoasting=-this._maxSpeed/10,this._forceOffRoadDeceleration=-this._maxSpeed/1.5,this._forceOffRoadLimit=.09*this._maxSpeed,this._forceCarve=.95,this._deviceMotion=new wt(this._kernel),this._deviceMotion.isEnabled=this._deviceMotion.isEnabled&&!this._system.isDesktop,this._kernel.audio.start("Player",Ze.EFFECTS,-1,0,.5,0,!0)},_disposer:function(){Qe.prototype._disposer.call(this),this._deviceMotion.dispose(),this._kernel.audio.stop("Player",Ze.EFFECTS),this._kernel.audio.stop("Applause",Ze.EFFECTS)},_updater:function(e){var t,i;null==e&&(e=0),Qe.prototype._updater.call(this,e),this._move(e),this._collision(),this._boost*=.925*this._biasBoost,this._impact*=.925*this._biasBoost,this._boost<.05&&(this._boost=0),this._impact<.05&&(this._boost=0),this._kernel.audio.transform("Player",Ze.EFFECTS,.5*this.speedPerc+.5),this.isRaceComplete?(t=this._track.totalDistance-this._camera.position+this.z+6e3)<0&&(i=3*Math.sin(t/700),this.steer=1<i?1:i<-1?-1:i,this._speed*=.975,this.x*=.975):this._camera.position+this.z<this._track.totalDistance?this.time++:(this.isRaceComplete=!0,this._kernel.messenger.sendMessage(this._factory.MESSAGE_FINISH_LINE,this,!1,!1,!0))},_move:function(e){null==e&&(e=0);var t=e/1e3;this.speedPerc=this._speed/this._maxSpeed;var i=3.25*t*this.speedPerc;this._deviceMotion.isEnabled&&0!=this._deviceMotion.motionRelative&&!this._kernel.inputs.mouse.getIsButtonDown()&&1e3<this._kernel.inputs.mouse.getButtonUpDuration()?.05<this.speedPerc&&(this.steer=.5*this.steer+.5*this._deviceMotion.motionRelative):(this.steer*=.75,this._kernel.inputs.joypad.getIsButtonDown($e.LEFT)?this.steer-=.25:this._kernel.inputs.joypad.getIsButtonDown($e.RIGHT)&&(this.steer+=.25)),this.x+=i*this._biasSteering*this.steer;var s=this.steer;this.steer=1<s?1:s<-1?-1:s,this._speed=Yt.easeIn(this._speed,this._speed*this._forceCarve,this.steer*(1-this._biasCarving)),this._updates%8==0&&.1<Math.abs(this.steer)&&this._kernel.audio.start("Carve"+(U.random(4)+1),Ze.EFFECTS,0,0,Math.abs(this.steer)*this.speedPerc*.25,0,!0),500<this._age||this._kernel.inputs.joypad.getIsButtonDown($e.UP)?this._speed=Yt.accelerate(this._speed,this._biasAcceleration*this._forceAcceleration,t):this._kernel.inputs.joypad.getIsButtonDown($e.DOWN)?this._speed=Yt.accelerate(this._speed,this._forceBraking,t):this._speed=Yt.accelerate(this._speed,this._forceCoasting,t),(this.x<-1||1<this.x)&&this._speed>this._forceOffRoadLimit&&(this._speed=Yt.accelerate(this._speed,this._forceOffRoadDeceleration,t),this.steer-=(1-this.speedPerc)*this.x*.125);s=this.x-=i*this.speedPerc*this._track.findSegment(this._camera.position).curve*.05;this.x=1.25<s?1.25:s<-1.25?-1.25:s;var s=this._speed,n=this._biasSpeed*this._maxSpeed;this._speed=n<s?n:s<0?0:s,this._speed+=(0<this._boost?.1:0)*this._maxSpeed,this.segment=this._track.findSegment(this._camera.position+this.z),this.percent=Yt.percentRemaining(this._camera.position+this.z,this._track.segmentDistance),this.y=Yt.interpolate(this.segment.position1.worldY,this.segment.position2.worldY,this.percent),this._camera.increasePosition(t*this._speed,-.04*t*this.segment.curve*.25*this.speedPerc);var r=(this.segment.index+this.percent)/this._track.maxSegments,a=Math.round(3.25*r);a>this._prevQuarter&&(this._kernel.audio.start("Cowbells",Ze.EFFECTS,0,0,.5,0,!0),this._prevQuarter=a),.8<r&&(this._isApplause||(this._kernel.audio.start("Applause",Ze.EFFECTS,-1,0,.25,0,!0),this._isApplause=!0),this._kernel.audio.transform("Applause",Ze.EFFECTS,5*(r-.8)))},_collision:function(){var e,t,i=this._track.segments[this.segment.index+1];i.isGate&&(.2<(t=(e=i.gate).width-Math.abs(this.x-e.offset))&&this._activateBoost(),t<.2&&-.2<t&&this._activateImpact(),t<-.2&&this._activateMissGate(),i.isGate=!1);for(var s=0,n=i.scenery;s<n.length;){var r=n[s];++s,r.isCoin&&(I.remove(i.scenery,r),Math.abs(this.x-r.offset)<.165&&this._activateCoin())}},getSprite:function(){var e,t,i,s,n=Tt.POSE_START1,r=!1,a=this.speedPerc<.01,_=this._updates<80||!a&&this.speedPerc<.1,o=!_&&this.speedPerc<.6,h=!_&&!o;switch(a&&(n=Tt.POSE_START1),_&&(e=[Tt.POSE_START1,Tt.POSE_START1,Tt.POSE_START1,Tt.POSE_START2,Tt.POSE_START3,Tt.POSE_START4,Tt.POSE_START5,Tt.POSE_START5,Tt.POSE_START6,Tt.POSE_START7,Tt.POSE_START1,Tt.POSE_START1,Tt.POSE_START1,Tt.POSE_START2,Tt.POSE_START3,Tt.POSE_START4,Tt.POSE_START5,Tt.POSE_START5,Tt.POSE_START6,Tt.POSE_START7],9<(t=(this._updates/2|0)%e.length)&&(r=!0),n=e[t]),h&&(n=Tt.POSE_FAST_STRAIGHT,this.steer<-.2&&(n=Tt.POSE_FAST_TURN1),this.steer<-.75&&(n=Tt.POSE_FAST_TURN2),this.steer<-.95&&(n=Tt.POSE_FAST_TURN3),.2<this.steer&&(n=Tt.POSE_FAST_TURN1),.75<this.steer&&(n=Tt.POSE_FAST_TURN2),.95<this.steer&&(n=Tt.POSE_FAST_TURN3),this.steer<-.2&&(r=!0)),o&&(n=Tt.POSE_SLOW_STRAIGHT,this.steer<-.2&&(n=Tt.POSE_SLOW_TURN1),this.steer<-.75&&(n=Tt.POSE_SLOW_TURN2),this.steer<-.95&&(n=Tt.POSE_SLOW_TURN3),.2<this.steer&&(n=Tt.POSE_SLOW_TURN1),.75<this.steer&&(n=Tt.POSE_SLOW_TURN2),.95<this.steer&&(n=Tt.POSE_SLOW_TURN3),this.steer<-.2&&(r=!0)),n._hx_index){case 2:case 5:case 8:case 11:case 14:i=2;break;case 0:case 3:case 6:case 9:case 12:i=0;break;case 1:case 4:case 7:case 10:case 13:i=1}switch(n._hx_index){case 0:case 1:case 2:s=0;break;case 3:case 4:case 5:s=1;break;case 6:case 7:case 8:s=2;break;case 9:case 10:case 11:s=3;break;case 12:case 13:case 14:s=4}return{x:332*i,y:204*s,w:332,h:204,isFlip:r,isRotated:!1}},_activateBoost:function(){this._boost=1,this._speed=this._maxSpeed+this._boost*this._maxSpeed*.1,this._kernel.audio.start("Carve"+(U.random(4)+1),Ze.EFFECTS,0,0,.5,0,!1)},_activateImpact:function(){.5<this._impact||(this._kernel.overlay.flash(500*this.speedPerc,!0,this.speedPerc,16711680),this._impact=1,this._speed*=.5,this._camera.setShake(this._speed),this._kernel.audio.start("Collision"+(U.random(2)+1),Ze.EFFECTS,0,0,2*this.speedPerc,0,!0))},_activateMissGate:function(){this._kernel.overlay.flash(1e3,!0,.75,0),this.time+=4*this._factory.targetFramerate,this._kernel.audio.start("MissGate",Ze.EFFECTS,0,0,1,0,!0)},_activateCoin:function(){this._session.setCoins(null,this._session.getCoins()+20)},__class__:Mt});function Bt(e,t){this.worldX=0,this.worldY=e,this.worldZ=t,this.cameraX=this.cameraY=this.cameraZ=0,this.screenScale=1,this.screenX=this.screenY=0,this.screenWidth=1}(t["b10ski.game.Position"]=Bt).__name__="b10ski.game.Position",Bt.prototype={__class__:Bt};var Lt=function(e,t,i,s,n,r){this._track=t,this._camera=i,this._player=s,this._width=n,this._height=r,Qe.call(this,e)};(t["b10ski.game.Renderer"]=Lt).__name__="b10ski.game.Renderer",Lt.__super__=Qe,Lt.prototype=e(Qe.prototype,{_init:function(){Qe.prototype._init.call(this),this._context.cache(0,0,this._width,this._height);var e=this._context.cacheCanvas;this._canvasBuffer=this._factory.createCanvas(this._width,this._height),this._context2dBuffer=this._canvasBuffer.getContext("2d",null),this._context2d=e.getContext("2d",null),this._context2d.imageSmoothingEnabled=!0,this._imageUnits=this._player.unitVo.imageSprites,this._imageScenery=this._assets.getAsset("assets/location/Scenery.png"),this._imageRoad=this._track.locationVo.imageRoad,this._imageHorizon=this._track.locationVo.imageHorizon,this._isDrawImageUsingCanvas=this._session.cache.isDrawImageUsingCanvas,this._isDrawImageUsingCanvas&&(this._canvasUnits=this._factory.createCanvas(this._imageUnits.width,this._imageUnits.height),this._canvasUnits.getContext("2d",null).drawImage(this._imageUnits,0,0),this._canvasScenery=this._factory.createCanvas(this._imageScenery.width,this._imageScenery.height),this._canvasScenery.getContext("2d",null).drawImage(this._imageScenery,0,0),this._canvasRoad=this._factory.createCanvas(this._imageRoad.width,this._imageRoad.height),this._canvasRoad.getContext("2d",null).drawImage(this._imageRoad,0,0),this._canvasHorizon=this._factory.createCanvas(this._imageHorizon.width,this._imageHorizon.height),this._canvasHorizon.getContext("2d",null).drawImage(this._imageHorizon,0,0)),this._framerateBiasTotal=0,this._roadWidth=2e3,this._resolution=this._height/405,this._horizonY=0,this._horizonPattern=this._context2d.createPattern(this._isDrawImageUsingCanvas?this._canvasHorizon:this._imageHorizon,"repeat");var t=8*this._session.cache.benchmark/100;this._maxScanlines=Math.round(16<t?16:t<6?6:t),this._cameraRotation=0,this._lensflare=new Ut(this._kernel,this._width,this._height),this._streaks=new Gt(this._kernel,this._width,this._height),this._isLensEffectsEnabled=this._kernel.isEyeCandy&&400<this._session.cache.benchmark,this.c_textureRatio=128/this._track.segmentDistance/16,this._coinSprites=[];for(var i=0;i<32;){var s=i++;this._coinSprites.push({x:s%32*32,y:0,w:32,h:32,isFlip:!1,isRotated:!1})}},_updater:function(e){null==e&&(e=0),Qe.prototype._updater.call(this,e),this._context2d.clearRect(0,0,this._width,this._height),this._context2dBuffer.translate(this._camera.shake.dx,this._camera.shake.dy),10<this._updates&&(this._framerateBiasTotal+=this._kernel.getFramerate(!0),1e3<this._age&&(.8<this._framerateBiasTotal/(this._updates-10)/this._factory.targetFramerate?this._maxScanlines++:this._maxScanlines=Math.round(.8*this._maxScanlines)));var t=this._maxScanlines;this._maxScanlines=0|(16<t?16:t<8?8:t);var i=this._track.findSegment(this._camera.position),s=Yt.percentRemaining(this._camera.position,this._track.segmentDistance),n=this._height,r=0,a=-i.curve*s,_=i,o=this._camera.position,h=this._camera.drawDistance,l=this._camera.fogDensity,c=this._tools,u=(t=this._camera.angle-this._player.x/50)-Math.floor(+t);this._context2d.globalAlpha=1,this._drawGround(this._horizonY);for(var d=0,p=h;d<p;){var g=d++;(_=this._track.segments[(i.index+g)%this._track.segments.length]).fog=1/Math.pow(Math.exp(1),Math.pow(g/h,7)*l),_.clip=n;var c=_.position1,f=this._width,y=this._height;c.cameraX=c.worldX-(this._player.x*this._roadWidth-r),c.cameraY=c.worldY-(this._player.y+this._camera.height),c.cameraZ=c.worldZ-o,c.screenScale=this._camera.depth/c.cameraZ,c.screenX=Math.round(f/2+c.screenScale*c.cameraX*f/2),c.screenY=Math.round(y/2-c.screenScale*c.cameraY*y/2),c.screenWidth=Math.round(c.screenScale*this._roadWidth*f/2);var m=_.position2,E=this._width,w=this._height;if(m.cameraX=m.worldX-(this._player.x*this._roadWidth-r-a),m.cameraY=m.worldY-(this._player.y+this._camera.height),m.cameraZ=m.worldZ-o,m.screenScale=this._camera.depth/m.cameraZ,m.screenX=Math.round(E/2+m.screenScale*m.cameraX*E/2),m.screenY=Math.round(w/2-m.screenScale*m.cameraY*w/2),m.screenWidth=Math.round(m.screenScale*this._roadWidth*E/2),r+=a,a+=_.curve,!(_.position1.cameraZ<=this._camera.depth||_.position2.screenY>=_.position1.screenY||_.position2.screenY>=n)){n=0|Math.min(n,_.position2.screenY);var v=_.position1.worldZ,S=(_.position2.worldZ,_.position1.screenWidth),x=n,b=_.position2.screenWidth,T=_.isFinishLine,k=_.isBoost,C=_.boostPosition;if(null==C&&(C=0),null==k&&(k=!1),null==T&&(T=!1),x>this._height&&(x=this._height),S=1.3*S|0,b=1.3*b|0,this.c_startX=_.position1.screenX-S,this.c_endX=_.position2.screenX-b,this.c_dx=this.c_endX-this.c_startX,this.c_startY=_.position1.screenY,this.c_endY=x,this.c_endY<=this.c_startY){this.c_dy=0|Math.abs(this.c_endY-this.c_startY),this.c_startW=2*S,this.c_dw=2*(b-S),this.c_startZ=v,this.c_dz=this._track.segmentDistance,this.c_sourceX=0,this.c_sourceY=0,this.c_sourceW=512,this.c_sourceH=1,this.c_destX=0,this.c_destY=this.c_startY,this.c_destW=1,this.c_destH=1,this.c_steps=0|Math.min(this.c_dy,this._maxScanlines),this.c_perc=0,this.c_destHF=Math.floor(this.c_dy/this.c_steps),this.c_destHC=Math.ceil(this.c_dy/this.c_steps),this.c_mod=1,this.c_destHC!=this.c_destHF&&(this.c_mod=Math.round(1/(this.c_destHC-this.c_dy/this.c_steps))),this.c_destH=this.c_destHC,this.c_textureOffsetX=0,this.c_textureOffsetY=64,this.c_source=this._isDrawImageUsingCanvas?this._canvasRoad:this._imageRoad,this._context2d.globalAlpha=_.fog;for(var A=0,I=this.c_steps;A<I;){var U=A++;this.c_perc=U/this.c_steps,this.c_sourceY=127-Math.floor((v+this.c_perc*this.c_dz)*this.c_textureRatio)%128,this.c_destX=this.c_startX+this.c_perc*this.c_dx|0,U==this.c_steps-1&&(this.c_destH=0|Math.max(this.c_destH,this.c_destY-this.c_endY)),this.c_destY-=this.c_destH,this.c_destW=this.c_startW+this.c_perc*this.c_dw|0,this.c_sourceH=this.c_destH,2048<this.c_destW&&(this.c_destX+=.5*(this.c_destW-2048)|0,this.c_destW=2048),this.c_destY<this._height&&this.c_destY>-this.c_destH&&(this._context2d.drawImage(this.c_source,this.c_sourceX+this.c_textureOffsetX,this.c_sourceY+this.c_textureOffsetY,this.c_sourceW,this.c_sourceH,this.c_destX,this.c_destY,this.c_destW,this.c_destH),T&&this._context2d.drawImage(this.c_source,0,256+8*this.c_sourceY%128,this.c_sourceW,this.c_sourceH,this.c_destX,this.c_destY,this.c_destW,this.c_destH),k&&this._context2d.drawImage(this.c_source,0,384+8*this.c_sourceY%128,this.c_sourceW,this.c_sourceH,this.c_destX+(this.c_destW*(.5+.5*C/1.3)-.5*this.c_destW|0),this.c_destY,this.c_destW,this.c_destH)),this.c_destH=U%this.c_mod==0?this.c_destHF:this.c_destHC}this._context2d.globalAlpha=1}}}this._horizonY=n;for(var P=0,R=0,D=0,N=0,M=null,B=this._isDrawImageUsingCanvas?this._canvasScenery:this._imageScenery,L=this._isDrawImageUsingCanvas?this._canvasUnits:this._imageUnits,d=0,p=h;d<p;){for(P=h-d++,A=0,I=(_=this._track.segments[(i.index+P)%this._track.segments.length]).scenery;A<I.length;){g=I[A];++A,R=_.position1.screenScale,D=_.position1.screenX+R*g.offset*this._roadWidth*(.5*this._width),N=_.position1.screenY,M=g.sprite,g.isCoin&&(M=this._coinSprites[(this._updates+g.seed)%32]),this._drawSprite(B,M,R*g.scale,D,N,-.5,-1,_.clip,_.fog,g.isAdd,g.life,M.isRotated?this._cameraRotation:0)}_==this._player.segment&&this._drawPlayer(L)}this._cameraRotation=.925*this._cameraRotation+-.03*_.curve*.075+.025*this._player.steer*this._player.speedPerc,Math.abs(this._cameraRotation)<1e-4&&(this._cameraRotation=0),this._drawRotation(this._cameraRotation,u),this._isLensEffectsEnabled&&(this._streaks.draw(this._context2d,this._player.isRaceComplete?0:Math.min(.35*Math.pow(this._player.speedPerc-.1,2),.35)),this._lensflare.draw(this._context2d,1024*u,this._horizonY-80)),this._context2dBuffer.translate(-this._camera.shake.dx,-this._camera.shake.dy)},_drawSprite:function(e,t,i,s,n,r,a,_,o,h,l,c){null==c&&(c=0),null==l&&(l=1),null==h&&(h=!1),null==o&&(o=1),null==_&&(_=0),null==a&&(a=0),null==r&&(r=0),.002<i||(this.c_destW=Math.round(t.w*i*this._width*.5*(.003*this._roadWidth)),this.c_destH=Math.round(t.h*i*this._width*.5*(.003*this._roadWidth)),768<this.c_destW||768<this.c_destH||(s=(s+this.c_destW*(r*(t.isFlip?-1:1)))*(t.isFlip?-1:1),n+=this.c_destH*a,this.c_clipH=Math.round(Math.max(0,n+this.c_destH-_+1)),0==_&&(this.c_clipH=0),this.c_tx=s+.5*this.c_destW,this.c_ty=n+.5*this.c_destH,this.c_clipH<this.c_destH&&(this._context2d.globalAlpha=Math.pow(o,.4)*l,h&&(this._context2d.globalCompositeOperation="lighter"),t.isFlip&&this._context2d.scale(-1,1),0!=c&&(this._context2d.translate(this.c_tx,this.c_ty),this._context2d.rotate(t.isFlip?-c:c),this._context2d.translate(-this.c_tx,-this.c_ty)),this._context2d.drawImage(e,t.x,t.y,t.w,t.h-t.h*this.c_clipH/this.c_destH,s,n,this.c_destW,this.c_destH-this.c_clipH),0!=c&&(this._context2d.translate(this.c_tx,this.c_ty),this._context2d.rotate(t.isFlip?c:-c),this._context2d.translate(-this.c_tx,-this.c_ty)),t.isFlip&&this._context2d.scale(-1,1),h&&(this._context2d.globalCompositeOperation="source-over"),this._context2d.globalAlpha=1)))},_drawGround:function(e){null==e&&(e=0);var t=Math.round(Math.min(e,320));this._context2d.fillStyle=this._track.locationVo.bgColor,this._context2d.fillRect(0,t,this._width,this._height-t)},_drawHorizon:function(e,t){null==t&&(t=0),null==e&&(e=0);var i=Math.round(1024*e),s=Math.round(Math.min(t,320));this._context2d.clearRect(0,0,this._width,this._height),this._context2d.fillStyle=this._horizonPattern,this._context2d.translate(i,s),this._context2d.fillRect(-i,-s,this._width,s),this._context2d.translate(-i,-s),this._context2d.fillStyle=this._track.locationVo.bgColor,this._context2d.fillRect(0,s,this._width,this._height-s)},_drawRotation:function(e,t,i){null==i&&(i=120),null==e&&(e=0),.35<e?e=.35:e<-.35&&(e=-.35);var s=.5*this._width,n=.75*this._height;this._context2dBuffer.clearRect(0,0,this._width,this._height),this._context2dBuffer.drawImage(this._context.cacheCanvas,0,0);var r=this._canvasBuffer;this._drawHorizon(t,this._horizonY),0!=e?(this._context2d.translate(s,n),this._context2d.rotate(-e),this._context2d.translate(-s,-n),this._context2d.drawImage(r,0,0,this._width,this._height,0,0,this._width,this._height),this._context2d.drawImage(r,0,0,this._width,1,0,1-i,this._width,i),this._context2d.drawImage(r,0,this._height-1,this._width,1,0,this._height-1,this._width,i),this._context2d.drawImage(r,1,0,1,this._height,2-i,0,i,this._height),this._context2d.drawImage(r,this._width-1,0,1,this._height,this._width-1,0,i,this._height),this._context2d.drawImage(r,0,0,1,1,-i,-i,i,i),this._context2d.drawImage(r,this._width-1,0,1,1,this._width,-i,i,i),this._context2d.drawImage(r,0,this._height-1,1,1,-i,this._height-1,i,i),this._context2d.drawImage(r,this._width-1,this._height-1,1,1,this._width,this._height-1,i,i),this._context2d.translate(s,n),this._context2d.rotate(e),this._context2d.translate(-s,-n)):this._context2d.drawImage(r,0,0,this._width,this._height,0,0,this._width,this._height)},_drawPlayer:function(e){var t=this._camera.depth/this._player.z,i=.5*this._width,s=.5*this._height-t*Yt.interpolate(this._player.segment.position1.cameraY,this._player.segment.position2.cameraY,this._player.percent)*(.5*this._height),n=3*Math.random()*this._player.speedPerc*this._resolution*(Math.random()<.5?-1:1);this._drawSprite(e,this._player.getSprite(),.7*t,i,s+n+55,-.5,-1)},__class__:Lt});function Ot(e,t,i,s){null==s&&(s=1),null==i&&(i=0),this.isAdd=!1,this.configure(e,t,i,s),this.seed=U.random(32)}(t["b10ski.game.Scenery"]=Ot).__name__="b10ski.game.Scenery",Ot.prototype={_getWidth:function(){return 0},_getScale:function(){switch(this.type._hx_index){case 0:return 2;case 1:case 3:case 5:case 7:return 2.61;case 2:case 4:case 6:case 8:return 2.61;case 9:return 2;case 10:case 11:return 1;case 12:case 13:return 4*Math.pow(Math.random(),.2);case 14:case 15:return 3;case 16:case 17:return 5*Math.pow(Math.random(),.2);case 18:case 19:case 20:case 21:return 1.25;case 22:case 23:return 2*Math.pow(Math.random(),.1);case 24:case 25:return 6}},_getSprite:function(){switch(this.type._hx_index){case 0:return{x:0,y:0,w:32,h:32,isFlip:!1,isRotated:!1};case 1:return{x:0,y:32,w:256,h:224,isFlip:!1,isRotated:!1};case 2:return{x:256,y:32,w:256,h:224,isFlip:!1,isRotated:!1};case 3:return{x:512,y:32,w:256,h:224,isFlip:!1,isRotated:!1};case 4:return{x:768,y:32,w:256,h:224,isFlip:!1,isRotated:!1};case 5:return{x:0,y:288,w:256,h:224,isFlip:!1,isRotated:!1};case 6:return{x:256,y:288,w:256,h:224,isFlip:!1,isRotated:!1};case 7:return{x:512,y:288,w:256,h:224,isFlip:!1,isRotated:!1};case 8:return{x:768,y:288,w:256,h:224,isFlip:!1,isRotated:!1};case 9:return{x:14,y:512,w:100,h:512,isFlip:!1,isRotated:!1};case 10:return{x:128,y:512,w:128,h:256,isFlip:!1,isRotated:!1};case 11:return{x:128,y:768,w:128,h:256,isFlip:!1,isRotated:!1};case 12:return{x:314,y:512,w:140,h:256,isFlip:Math.random()<.5,isRotated:!1};case 13:return{x:555,y:512,w:170,h:256,isFlip:Math.random()<.5,isRotated:!1};case 14:return{x:800,y:512,w:64,h:256,isFlip:!1,isRotated:!1};case 15:return{x:928,y:512,w:64,h:256,isFlip:!1,isRotated:!1};case 16:return{x:266,y:768,w:236,h:128,isFlip:Math.random()<.5,isRotated:!1};case 17:return{x:266,y:976,w:236,h:48,isFlip:Math.random()<.5,isRotated:!1};case 18:return{x:520,y:768,w:112,h:128,isFlip:!1,isRotated:!1};case 19:return{x:648,y:768,w:112,h:128,isFlip:!1,isRotated:!1};case 20:return{x:520,y:896,w:112,h:128,isFlip:!1,isRotated:!1};case 21:return{x:648,y:896,w:112,h:128,isFlip:!1,isRotated:!1};case 22:return{x:768,y:864,w:128,h:32,isFlip:Math.random()<.5,isRotated:!1};case 23:return{x:896,y:864,w:128,h:32,isFlip:Math.random()<.5,isRotated:!1};case 24:return{x:768,y:896,w:128,h:128,isFlip:!1,isRotated:!1};case 25:return{x:896,y:896,w:128,h:128,isFlip:!1,isRotated:!1}}},configure:function(e,t,i,s){null==s&&(s=1),null==i&&(i=0),this.offset=t,this.life=s,this.perc=i,this.type!=e&&(this.type=e,this.scale=this._getScale(),this.width=this._getWidth(),this.isCoin=this.type==Ct.SCENERY_COIN,this.sprite=this._getSprite())},__class__:Ot};function Ft(e,t,i,s,n){this.index=e,this.position1=t,this.position2=i,this.curve=s,this.scenery=null!=n?n:[],this.gate=null,this.fog=0,this.clip=0,this.isFinishLine=!1,this.isBoost=!1,this.isGate=!1,this.boostPosition=0}(t["b10ski.game.Segment"]=Ft).__name__="b10ski.game.Segment",Ft.prototype={setBoost:function(e){this.isBoost=!0,this.boostPosition=e},setGate:function(e,t,i){this.isGate=!0,this.gate=new vt(this.index,e,t),this.scenery.unshift(new Ot(i?Ct.SCENERY_GATE_1_LEFT:Ct.SCENERY_GATE_2_LEFT,e-t)),this.scenery.unshift(new Ot(i?Ct.SCENERY_GATE_1_RIGHT:Ct.SCENERY_GATE_2_RIGHT,e+t))},__class__:Ft};var Gt=function(e,t,i){this._TEXTURE_HEIGHT=405,this._TEXTURE_WIDTH=720,this._kernel=e,this._width=t,this._height=i,this._texture=this._kernel.assets.getAsset("assets/location/Streaks.png")};(t["b10ski.game.Streaks"]=Gt).__name__="b10ski.game.Streaks",Gt.prototype={draw:function(e,t){var i;null==t&&(t=1),t<=.25||(i=t*(.5*Math.random()+.5),e.save(),e.globalAlpha=i,Math.random()<.5&&(e.translate(this._width,0),e.scale(-1,1)),Math.random()<.5&&(e.translate(0,this._height),e.scale(1,-1)),e.scale(this._width/this._TEXTURE_WIDTH,this._height/this._TEXTURE_HEIGHT),e.drawImage(this._texture,0,0),e.globalAlpha=1,e.restore())},__class__:Gt};var Vt=function(e,t,i){this.levelVo=t,this.locationVo=i,Qe.call(this,e)};(t["b10ski.game.Track"]=Vt).__name__="b10ski.game.Track",Vt.__super__=Qe,Vt.prototype=e(Qe.prototype,{_init:function(){for(Qe.prototype._init.call(this),this.maxSegments=this.levelVo.trackLength,this.maxSegments%2==0&&this.maxSegments++,this._kernel.isDebug&&(this.maxSegments=100),this.segmentDistance=300,this.segments=[],this._addRoad(0,32,0,0,-20),this._addRoad(0,64,0,0,-30);this.segments.length<this.maxSegments-32;){var e=this._tools.getRandomType(kt),t=this._getRoadLength(e),i=this._getRoadCurve(e),s=t*Math.sqrt(Math.random())*-1*this.levelVo.trackHills;this.segments.length+2*t<this.maxSegments-32?this._addRoad(t,t,t,i,s):this._addRoad(0,this.maxSegments-this.segments.length,0,0,.25*-(this.maxSegments-this.segments.length)|0)}this.maxSegments=this.segments.length,this._addRoad(0,30,0,0,30),this._addRoad(0,30,0,0,30),this._addRoad(0,30,0,0,30),this._addRoad(0,30,0,0,30),this._addRoad(0,30,0,0,30),this._addRoad(0,30,0,0,30),this._addRoad(0,30,0,0,30),this._addRoad(0,30,0,0,30),this._addRoad(0,30,0,0,30),this._addRoad(0,30,0,0,30);for(var n=!0,r=0,a=this.segments.length;r<a;){var _=r++;if(10<Math.abs(_-this.maxSegments)){if(48<_&&_<this.maxSegments-32&&_%this.levelVo.gateInterval==8){n=!n;var o=(Math.random()-.5)*this.levelVo.gateOffset;this.segments[_].setGate(o,this.levelVo.gateWidth,n);for(var h=_-6,l=_;h<l;){var c=h++;this.segments[c].setBoost(o)}}!this.levelVo.isNew&&16<_&&_<this.maxSegments+140&&Math.random()<(_<this.maxSegments?.03:0)&&this._addScenery(_,Ct.SCENERY_COIN,2*Math.random()-1)}this._createDefaultScenery(this.segments[_])}this._addScenery(12,Ct.SCENERY_START_LEFT,-1),this._addScenery(12,Ct.SCENERY_START_RIGHT,1),this._addScenery(this.maxSegments,Ct.SCENERY_FINISH_LEFT,-1),this._addScenery(this.maxSegments,Ct.SCENERY_FINISH_RIGHT,1),this.segments[this.maxSegments].isFinishLine=!0,this.segments[this.maxSegments+(this.maxSegments%2==0?1:-1)].isFinishLine=!0,this.totalDistance=this.maxSegments*this.segmentDistance},findSegment:function(e){return this.segments[Math.floor(e/this.segmentDistance)%this.segments.length]},_getRoadLength:function(e){switch(e._hx_index){case 0:return 10;case 1:case 4:return 10;case 2:case 5:return 20;case 3:case 6:return 50}},_getRoadCurve:function(e){var t;switch(e._hx_index){case 0:t=0;break;case 1:t=-10;break;case 2:t=-15;break;case 3:t=-20;break;case 4:t=10;break;case 5:t=15;break;case 6:t=20}return Math.round(t*this.levelVo.trackCurves*.8)},_addRoad:function(e,t,i,s,n){null==n&&(n=0);var r=this._getLastY(),a=r+n*this.segmentDistance;r-=this._getMound(this.segments.length-1);for(var _=e+t+i,o=0,h=e;o<h;){var l=o++;this._addSegment(Math.round(Yt.easeIn(0,s,l/e)),Yt.easeInOut(r,a,l/_))}for(o=0,h=t;o<h;){l=o++;this._addSegment(s,Yt.easeInOut(r,a,(e+l)/_))}for(o=0,h=i;o<h;){l=o++;this._addSegment(Math.round(Yt.easeInOut(s,0,l/i)),Yt.easeInOut(r,a,(e+t+l)/_))}},_addSegment:function(e,t){var i=this.segments.length,s=this._getMound(i);this.segments.push(new Ft(i,new Bt(this._getLastY(),i*this.segmentDistance),new Bt(t+s,(i+1)*this.segmentDistance),e))},_getMound:function(e){var t=250+250*this.levelVo.trackHills,i=0;return i+=Math.sin(e/2.5)*t*.25,i+=Math.sin(e/3.1)*t*.25,i+=Math.sin(e/5)*t*.5,i+=Math.cos(e/6)*t,i+=Math.cos(e/6.5)*-t,i+=Math.cos(e/7)*-t},_getLastY:function(){return 0==this.segments.length?0:this.segments[this.segments.length-1].position2.worldY},_createDefaultScenery:function(e){var t=e.index;t%10==0&&(i=Math.random())<.4&&((2<e.curve||t>this.maxSegments||t<64)&&this._addScenery(t,Ct.SCENERY_STADIUM_LEFT,-7.5),(e.curve<-2||t>this.maxSegments||t<64)&&this._addScenery(t,Ct.SCENERY_STADIUM_RIGHT,7.5)),t%2==0&&((2<e.curve||t>this.maxSegments||t<32)&&this._addScenery(t,Ct.SCENERY_SIDING_LEFT,-this.locationVo.sidingDistance),(e.curve<-2||t>this.maxSegments||t<32)&&this._addScenery(t,Ct.SCENERY_SIDING_RIGHT,this.locationVo.sidingDistance));var i=Math.random();t%8==3&&i<.2&&(e.curve<-2&&this._addScenery(t,Ct.SCENERY_BANNER_LEFT,-1.5),2<e.curve&&this._addScenery(t,Ct.SCENERY_BANNER_RIGHT,1.5));i=Math.random();t%2==0&&i<.2&&this._addScenery(t,Math.random()<.5?Ct.SCENERY_SNOW_1:Ct.SCENERY_SNOW_2,(Math.random()<.5?-1:1)*(2+Math.random()));i=Math.random();32<Math.abs(t-this.maxSegments)&&32<t&&t%32==0&&i<.4&&(Math.random()<.5?(this._addScenery(t,Ct.SCENERY_TUNNEL_1_LEFT,-1),this._addScenery(t,Ct.SCENERY_TUNNEL_1_RIGHT,1)):(this._addScenery(t,Ct.SCENERY_TUNNEL_2_LEFT,-1),this._addScenery(t,Ct.SCENERY_TUNNEL_2_RIGHT,1))),t%32==8&&this._addScenery(t,Ct.SCENERY_FLOODLIGHT,-2),t%32==24&&this._addScenery(t,Ct.SCENERY_FLOODLIGHT,2);i=Math.random();t%2==0&&i<(this._system.isDesktop?.25:.1)&&this._addScenery(t,Math.random()<.5?Ct.SCENERY_TREE_1:Ct.SCENERY_TREE_2,(Math.random()<.5?-1:1)*(Math.random()+3.5));i=Math.random();t%2==1&&i<(this._system.isDesktop?.125:.05)&&this._addScenery(t,Math.random()<.5?Ct.SCENERY_HILL_1:Ct.SCENERY_HILL_2,(Math.random()<.5?-1:1)*(Math.random()+10))},_addScenery:function(e,t,i){this.segments[e].scenery.unshift(new Ot(t,i))},__class__:Vt});function Ht(e,t){this._MAX_UPGRADES=8,ht.call(this,e),this.type=t,this.title=this._getTitle(),this.subtitle=this._getSubtitle(),this.imageSprites=this._getImageSprites()}(t["b10ski.game.UnitVo"]=Ht).__name__="b10ski.game.UnitVo",Ht.__super__=ht,Ht.prototype=e(ht.prototype,{_getTitle:function(){var e;switch(this.type._hx_index){case 0:e="gui.units.unitA.title";break;case 1:e="gui.units.unitB.title"}return this._kernel.getConfig(e)},_getSubtitle:function(){var e;switch(this.type._hx_index){case 0:e="gui.units.unitA.subtitle";break;case 1:e="gui.units.unitB.subtitle"}return this._kernel.getConfig(e)},_getImageSprites:function(){var e;switch(this.type._hx_index){case 0:e="assets/location/UnitA.png";break;case 1:e="assets/location/UnitB.png"}return this._assets.getAsset(e)},getDefault:function(e){switch(this.type._hx_index){case 0:switch(e._hx_index){case 0:return 5;case 1:return 2;case 2:return 3;case 3:return 4}break;case 1:switch(e._hx_index){case 0:return 3;case 1:return 5;case 2:return 4;case 3:return 2}}},getUpgrade:function(e){switch(e._hx_index){case 0:return this._session.getUpgrade(It.UPGRADE_SPEED,this.type);case 1:return this._session.getUpgrade(It.UPGRADE_STEERING,this.type);case 2:return this._session.getUpgrade(It.UPGRADE_ACCELERATION,this.type);case 3:return this._session.getUpgrade(It.UPGRADE_BOOST,this.type)}},getTotal:function(e){var t,i=this._MAX_UPGRADES;switch(e._hx_index){case 0:t=this.getDefault(It.UPGRADE_SPEED)+this.getUpgrade(It.UPGRADE_SPEED);break;case 1:t=this.getDefault(It.UPGRADE_STEERING)+this.getUpgrade(It.UPGRADE_STEERING);break;case 2:t=this.getDefault(It.UPGRADE_ACCELERATION)+this.getUpgrade(It.UPGRADE_ACCELERATION);break;case 3:t=this.getDefault(It.UPGRADE_BOOST)+this.getUpgrade(It.UPGRADE_BOOST)}return 0|Math.min(i,t)},getAvailable:function(e){switch(e._hx_index){case 0:return this._MAX_UPGRADES-this.getTotal(It.UPGRADE_SPEED);case 1:return this._MAX_UPGRADES-this.getTotal(It.UPGRADE_STEERING);case 2:return this._MAX_UPGRADES-this.getTotal(It.UPGRADE_ACCELERATION);case 3:return this._MAX_UPGRADES-this.getTotal(It.UPGRADE_BOOST)}},getBias:function(e,t,i){var s=this.getTotal(e);s<0&&(s=0),s>this._MAX_UPGRADES&&(s=this._MAX_UPGRADES);var n=i-t;return t+s/this._MAX_UPGRADES*n},getPercentageComplete:function(){return(this.getTotal(It.UPGRADE_SPEED)+this.getTotal(It.UPGRADE_STEERING)+this.getTotal(It.UPGRADE_ACCELERATION)+this.getTotal(It.UPGRADE_BOOST))/(4*this._MAX_UPGRADES)},__class__:Ht});var Yt=function(){};(t["b10ski.game.Util"]=Yt).__name__="b10ski.game.Util",Yt.percentRemaining=function(e,t){return e%t/t},Yt.accelerate=function(e,t,i){return e+t*i},Yt.interpolate=function(e,t,i){return e+(t-e)*i},Yt.easeIn=function(e,t,i){return e+(t-e)*Math.pow(i,2)},Yt.easeInOut=function(e,t,i){return e+(t-e)*(-Math.cos(i*Math.PI)/2+.5)};function jt(e,t,i,s){null==s&&(s=!1),null==i&&(i=100),null==t&&(t=100),this._assets=$i.__cast(e.assets,lt),this._factory=$i.__cast(e.factory,ct),this._session=$i.__cast(e.get_session(),ft),this._system=e.system,je.call(this,e,t,i,s)}(t["b10ski.gui.AGuiEntity"]=jt).__name__="b10ski.gui.AGuiEntity",jt.__super__=je,jt.prototype=e(je.prototype,{__class__:jt});function zt(e){jt.call(this,e,720,405,!1)}(t["b10ski.gui.Action"]=zt).__name__="b10ski.gui.Action",zt.__super__=jt,zt.prototype=e(jt.prototype,{_init:function(){jt.prototype._init.call(this),this._context.addChild(this._bitmap=new createjs.Bitmap(this._assets.getAsset("assets/gui/Action.png")))},_updater:function(e){null==e&&(e=0),jt.prototype._updater.call(this,e),this._bitmap.x=30*Math.sin(this._updates/50),this._bitmap.y=10*Math.sin(this._updates/125)},__class__:zt});function Wt(e,t){this._sceneType=t,jt.call(this,e,e.factory.width,e.factory.height,!1)}(t["b10ski.gui.Bg"]=Wt).__name__="b10ski.gui.Bg",Wt.__super__=jt,Wt.prototype=e(jt.prototype,{_init:function(){jt.prototype._init.call(this),this._texture=this._assets.getAsset("assets/gui/BgDetail.jpg"),this._bitmap=new createjs.Bitmap(this._assets.getAsset(this._getAbstract())),this._bitmap.cache(0,0,this.width,this.height),this._context.addChild(this._bitmap),this._context.addChild(new createjs.Bitmap(this._assets.getAsset(this._getAbstract()))),this._context.addChild(new createjs.Bitmap(this._assets.getAsset(this._getGradient()))),this._canvas=this._bitmap.cacheCanvas,this._context2d=this._canvas.getContext("2d",null),this._pattern=this._context2d.createPattern(this._texture,"repeat"),this._context2d.fillStyle=this._pattern},_updater:function(e){null==e&&(e=0),jt.prototype._updater.call(this,e),this._draw()},_draw:function(){var e=-2*this._kernel._updates%this._texture.width,t=10*Math.sin(this._kernel._updates/30)-10;this._context2d.translate(e,t),this._context2d.fillRect(-e,-t,this.width,this.height),this._context2d.translate(-e,-t)},_getAbstract:function(){switch(this._sceneType._hx_index){case 4:case 9:return"assets/gui/BgAbstract4.png";case 7:return"assets/gui/BgAbstract1.png";case 8:return"assets/gui/BgAbstract2.png";case 15:return"assets/gui/BgAbstract3.png";default:return"assets/gui/BgAbstract4.png"}},_getGradient:function(){switch(this._sceneType._hx_index){case 4:case 8:return"assets/gui/BgGradient2.png";case 7:return"assets/gui/BgGradient1.png";case 9:return"assets/gui/BgGradient3.png";case 15:return"assets/gui/Vignette.png";default:return"assets/gui/BgGradient3.png"}},__class__:Wt});function Kt(e,t,i,s,n,r,a,_,o){null==n&&(n=0),null==s&&(s=0);var h=new We(e),l=new We(e);w.call(this,e,h,l,t,i,s,n,r,a,_,o)}(t["b10ski.gui.BlankButton"]=Kt).__name__="b10ski.gui.BlankButton",Kt.__super__=w,Kt.prototype=e(w.prototype,{_updater:function(e){null==e&&(e=0);var t=this.get_view().context.localToGlobal(0,0);this.get_view().globalX=t.x,this.get_view().globalY=t.y,w.prototype._updater.call(this,e)},__class__:Kt});function Xt(e,t,i,s){null==t&&(t=1),this._scale=t,jt.call(this,e,192,192,!1),this.setPosition(0|i,0|s)}(t["b10ski.gui.Burst"]=Xt).__name__="b10ski.gui.Burst",Xt.__super__=jt,Xt.prototype=e(jt.prototype,{_init:function(){jt.prototype._init.call(this);var e=this._scale,t=Math.random()<.5?-1:1;this._context.scaleX=e*t;e=this._scale,t=Math.random()<.5?-1:1;this._context.scaleY=e*t,this._context.compositeOperation="lighter",this._context.mouseEnabled=!1,this._context.mouseChildren=!1,this._sprite=new createjs.Sprite(this._createSpriteSheet(),0),this._context.addChild(this._sprite),this._drop=0},_updater:function(e){null==e&&(e=0),jt.prototype._updater.call(this,e),this._sprite.gotoAndStop(this._updates-1),16<=this._updates&&(this.isDisposed||(this.isDisposed=!0,this.set_isActive(!1),this._disposer())),this._drop+=Math.random(),this._context.y+=this._drop},_createSpriteSheet:function(){return new createjs.SpriteSheet({framerate:this._factory.targetFramerate,images:[this._assets.getAsset("assets/gui/Burst.jpg")],frames:{width:192,height:192,count:16,regX:96,regY:96}})},__class__:Xt});function Qt(e,t,i,s,n,r,a,_){null==s&&(s=0),null==i&&(i=0),null==t&&(t=""),this._assets=e.assets,this._factory=e.factory,this._title=t.toUpperCase(),w.call(this,e,this._assets.get_buttonUp(),this._assets.get_buttonOver(),200,65,i,s,n,r,a,_)}(t["b10ski.gui.Button"]=Qt).__name__="b10ski.gui.Button",Qt.__super__=w,Qt.prototype=e(w.prototype,{_init:function(){w.prototype._init.call(this);var e=19;new g("iP[ao]d|iPhone","i").match(p.navigator.userAgent)&&(e-=2);var t=this.width-10,i=this.height-e,s=this._kernel.factory.createTextStyle(ot.BUTTON);this._textUp=new ui(this._kernel,t,i,this._title,s),this._textOver=new ui(this._kernel,t,i,this._title,s),this._textUp.set_x(this._textOver.set_x(5)),this._textUp.set_y(this._textOver.set_y(e)),this._stateUp.addEntity(this._textUp,null,!0,2),this._stateOver.addEntity(this._textOver,null,!0,2)},setTitle:function(e){this._title!=e&&(this._title=e.toUpperCase(),this._textUp.set_text(this._textOver.set_text(this._title)))},onRollOver:function(){w.prototype.onRollOver.call(this),this._kernel.audio.start("ButtonOver",Ze.INTERFACE,0,0,.25)},__class__:Qt});function Jt(e,t,i,s,n,r,a,_){null==s&&(s=0),null==i&&(i=0),null==t&&(t=""),this._assets=e.assets,this._factory=e.factory,w.call(this,e,this._assets.get_buttonSmallUp(),this._assets.get_buttonSmallOver(),100,30,i,s,n,r,a,_),this.setTitle(t)}(t["b10ski.gui.ButtonSmall"]=Jt).__name__="b10ski.gui.ButtonSmall",Jt.__super__=w,Jt.prototype=e(w.prototype,{_init:function(){w.prototype._init.call(this);var e=6;new g("iP[ao]d|iPhone","i").match(p.navigator.userAgent)&&(e-=2);var t=this.width-10,i=this.height-e,s=this._kernel.factory.createTextStyle(ot.BUTTON);s.size=12,this._textUp=new ui(this._kernel,t,i,this._title,s),(s=this._kernel.factory.createTextStyle(ot.BUTTON)).size=12,this._textOver=new ui(this._kernel,t,i,this._title,s),this._textUp.set_x(this._textOver.set_x(5)),this._textUp.set_y(this._textOver.set_y(e)),this._stateUp.addEntity(this._textUp,null,!0,2),this._stateOver.addEntity(this._textOver,null,!0,2)},_updater:function(e){null==e&&(e=0);var t=this.get_view().context.localToGlobal(0,0);this.get_view().globalX=t.x,this.get_view().globalY=t.y,w.prototype._updater.call(this,e)},setTitle:function(e){this._title=e,this._title=this._title.toUpperCase(),this._textUp.set_text(this._title),this._textOver.set_text(this._title)},onRollOver:function(){w.prototype.onRollOver.call(this),this._kernel.audio.start("ButtonOver",Ze.INTERFACE,0,0,.25)},onClick:function(){w.prototype.onClick.call(this),this.isOver=!1},__class__:Jt});function Zt(e,t){null==t&&(t=!0),this._isAnimated=t,jt.call(this,e,120,32,!1)}(t["b10ski.gui.Coins"]=Zt).__name__="b10ski.gui.Coins",Zt.__super__=jt,Zt.prototype=e(jt.prototype,{_init:function(){var e=this;jt.prototype._init.call(this),this._displayValue=this._prevCoins=this._session.getCoins(),this._isAnimated?(this._bitmap=new createjs.Bitmap(this._assets.getAsset("assets/location/Scenery.png")),this._bitmap.sourceRect=new createjs.Rectangle(0,0,32,32),this._bitmap.y=3):(this._bitmap=new createjs.Bitmap(this._assets.getAsset("assets/location/Scenery.png")),this._bitmap.sourceRect=new createjs.Rectangle(320,0,32,32),this._bitmap.cache(0,0,32,32)),this._bitmap.x=this.width-32,this._bitmap.y=3,this._context.addChild(this._bitmap);var t=this._factory.createTextStyle(this._factory.TEXTSTYLE_HUD_TITLE);this._title=new ui(this._kernel,this._bitmap.x-5,20,U.string(this._kernel.getConfig("gui.scenes.game.hud.coins")).toUpperCase(),t,null,null,.5),this._title.setPosition(0,0),this.addEntity(this._title,null,!0,10),this._message=new ui(this._kernel,this._bitmap.x-5,35,U.string(this._displayValue),this._factory.createTextStyle(this._factory.TEXTSTYLE_HUD_COINS)),this._message.setPosition(.85*this._message.width-1,.5*this._message.height+5),this._message._context.regX=.85*this._message.width,this._message._context.regY=.5*this._message.height,this._session.get_isTester()&&this.addEntity(new Kt(this._kernel,0|this.width,0|this.height,0,0,null,function(){e._session.setCoins(null,e._session.getCoins()+100)}),null,!0,10),this.addEntity(this._message,null,!0,1)},_updater:function(e){null==e&&(e=0);var t,i=this;jt.prototype._updater.call(this,e),this._isAnimated&&(this._bitmap.sourceRect.x=this._updates%32*32),this._age<3e3||(this._prevCoins!=this._session.getCoins()&&(this._kernel.audio.start("Coin",Ze.INTERFACE,0,0,.65,null,!1),null!=this._tweezer&&((t=this._tweezer).isDisposed||(t.isDisposed=!0,t.set_isActive(!1),t._disposer())),this.addEntity(this._tweezer=new rs(this._kernel,function(e){i._message._context.scaleX=i._message._context.scaleY=e},1.75,1,0,1e3,null,ss.EASE_OUT,ns.QUARTIC))),this._prevCoins=this._session.getCoins(),this._displayValue!=this._session.getCoins()&&(t=this._tools,this._displayValue=Math.round(.9*this._displayValue+.1*this._session.getCoins()),Math.abs(this._displayValue-this._session.getCoins())<5&&(this._displayValue=this._session.getCoins()),this._message.set_text(U.string(this._displayValue))))},__class__:Zt});function qt(e,t,i){this._MEDAL_WIDTH=100,this._unitType=t,this._medalType=i,jt.call(this,e,720,405,!1)}(t["b10ski.gui.Hero"]=qt).__name__="b10ski.gui.Hero",qt.__super__=jt,qt.prototype=e(jt.prototype,{_init:function(){jt.prototype._init.call(this),this._container=new createjs.Container,this._context.addChild(this._container),this._container.addChild(this._bitmap=new createjs.Bitmap(this._assets.getAsset(this._getImage()))),this._medalBitmap=new createjs.Bitmap(this._assets.getAsset("assets/gui/HeroMedals.png"));var e=this._getMedalCol()*this._MEDAL_WIDTH;this._medalBitmap.sourceRect=new createjs.Rectangle(e,0,this._MEDAL_WIDTH,this.height),this._medalBitmap.x=.5*(this.width-this._MEDAL_WIDTH),this._medalType!=bt.MEDAL_NONE&&this._container.addChild(this._medalBitmap)},_updater:function(e){null==e&&(e=0),jt.prototype._updater.call(this,e),this._container.x=10*Math.sin(this._updates/50)},_getImage:function(){switch(this._unitType._hx_index){case 0:return"assets/gui/HeroUnitA.png";case 1:return"assets/gui/HeroUnitB.png"}},_getMedalCol:function(){switch(this._unitType._hx_index){case 0:switch(this._medalType._hx_index){case 0:case 1:return 0;case 2:return 1;case 3:return 2}break;case 1:switch(this._medalType._hx_index){case 0:return 0;case 1:return 3;case 2:return 4;case 3:return 5}}},__class__:qt});function $t(e,t,i,s,n){this._isCoinsVisible=t,this._scoreGold=i,this._scoreSilver=s,this._scoreBronze=n,jt.call(this,e,e.factory.width,e.factory.height,!1)}(t["b10ski.gui.Hud"]=$t).__name__="b10ski.gui.Hud",$t.__super__=jt,$t.prototype=e(jt.prototype,{_init:function(){var t=this;jt.prototype._init.call(this);var e=new createjs.Bitmap(this._assets.getAsset("assets/gui/Hud.png"));this._context.addChild(e),this._targets=new ti(this._kernel,this._scoreGold,this._scoreSilver,this._scoreBronze),this.addEntity(this._targets,null,!0,10),this._targets.setPosition(40,12),this._timer=new si(this._kernel),this.addEntity(this._timer,null,!0,10),this._timer.setPosition(this._targets.x+100,12),this._coins=new Zt(this._kernel,!1),this.addEntity(this._coins,null,this._isCoinsVisible,10),this._coins.setPosition(this.width-310,12),this._speedo=new ei(this._kernel),this.addEntity(this._speedo,null,!0,10),this._speedo.setPosition(this._coins.x-20,12),this.addEntity(this._instructions=new ni(this._kernel,this._assets.getAsset(this._system.isDesktop?"assets/gui/InstructionsA.png":"assets/gui/InstructionsB.png")),null,!1,9),this._instructions.setPosition((this._factory.width-300)/2,this._factory.height-200);function i(e){t._instructions.set_y(e)}this.addEntity(new rs(this._kernel,i,this._factory.height,this._instructions.y,0,1e3,1e3,ss.EASE_OUT,ns.QUARTIC,function(){t.addEntity(new rs(t._kernel,i,t._instructions.y,t._factory.height,0,1e3,0,ss.EASE_IN,ns.BACK(),function(){t._instructions.get_view().set_isVisible(!1)}))})),this.addEntity(new rs(this._kernel,function(e){t._targets.set_y(e)},-100,this._targets.y,2e3,1e3,0,ss.EASE_OUT,ns.QUARTIC)),this.addEntity(new rs(this._kernel,function(e){t._timer.set_y(e)},-100,this._timer.y,2e3,1e3,0,ss.EASE_OUT,ns.QUARTIC)),this.addEntity(new rs(this._kernel,function(e){t._speedo.set_y(e)},-100,this._speedo.y,2e3,1e3,0,ss.EASE_OUT,ns.QUARTIC)),this.addEntity(new rs(this._kernel,function(e){t._coins.set_y(e)},-100,this._coins.y,2e3,1e3,0,ss.EASE_OUT,ns.QUARTIC))},_updater:function(e){null==e&&(e=0),jt.prototype._updater.call(this,e)},configureTargets:function(e){this._targets.configure(e)},configureTimer:function(e){this._timer.configure(e)},configureSpeedo:function(e){this._speedo.configure(e)},__class__:$t});var ei=function(e){jt.call(this,e,220,60,!1)};(t["b10ski.gui.HudSpeedo"]=ei).__name__="b10ski.gui.HudSpeedo",ei.__super__=jt,ei.prototype=e(jt.prototype,{_init:function(){jt.prototype._init.call(this);var e=this._factory.createTextStyle(this._factory.TEXTSTYLE_HUD_TITLE);this._title=new ui(this._kernel,this.width,20,U.string(this._kernel.getConfig("gui.scenes.game.hud.speedo")).toUpperCase(),e,null,null,.5),this._title.setPosition(0,0),this.addEntity(this._title,null,!0,10);var t=this._factory.createTextStyle(this._factory.TEXTSTYLE_HUD_COINS);this._message=new ui(this._kernel,this.width,20,"55",t,null,null,1),this._message.setPosition(0,6),this.addEntity(this._message,null,!0,10)},configure:function(e){this._prevValue!=e&&(this._prevValue=e,this._message.set_text(null==e?"null":""+e))},__class__:ei});var ti=function(e,t,i,s){this._scoreGold=t,this._scoreSilver=i,this._scoreBronze=s,jt.call(this,e,110,60,!1)};(t["b10ski.gui.HudTargets"]=ti).__name__="b10ski.gui.HudTargets",ti.__super__=jt,ti.prototype=e(jt.prototype,{_init:function(){jt.prototype._init.call(this);var e=this._factory.createTextStyle(this._factory.TEXTSTYLE_HUD_TITLE);this._title=new ui(this._kernel,this.width,20,U.string(this._kernel.getConfig("gui.scenes.game.hud.targets")).toUpperCase(),e,null,null,.5),this._title.setPosition(0,0),this.addEntity(this._title,null,!0,10);var t=11;this.addEntity(this._targetGold=new ii(this._kernel,bt.MEDAL_GOLD,this._scoreGold,t),null,!0,10),this.addEntity(this._targetSilver=new ii(this._kernel,bt.MEDAL_SILVER,this._scoreSilver,t+=11),null,!0,10),this.addEntity(this._targetBronze=new ii(this._kernel,bt.MEDAL_BRONZE,this._scoreBronze,t+=11),null,!0,10)},configure:function(e){e>=this._scoreGold&&this._targetGold.setIsExpired(),e>=this._scoreSilver&&this._targetSilver.setIsExpired(),e>=this._scoreBronze&&this._targetBronze.setIsExpired()},__class__:ti});var ii=function(e,t,i,s){this._delimeter=".",this._medalType=t,this._score=i,jt.call(this,e,110,20,!1),this.set_y(s)};(t["b10ski.gui._HudTargets._HelperTarget"]=ii).__name__="b10ski.gui._HudTargets._HelperTarget",ii.__super__=jt,ii.prototype=e(jt.prototype,{_init:function(){jt.prototype._init.call(this);var e=this._factory.createTextStyle(this._factory.TEXTSTYLE_HUD_TITLE);this._title=new ui(this._kernel,50,20,this._session.getMedalTitle(this._medalType).toUpperCase(),e,null,null,.5),this._title.setPosition(0,0),this.addEntity(this._title,null,!0,10),this._digits=[];for(var t=55,i=0,s=this._tools.convertUpdatesToFormattedTime(this._score,this._delimeter).split("");i<s.length;){var n=s[i];++i;var r=this._createDigit(n,t,0);this._digits.push(r),this.addEntity(r,null,!0,10),t+=n==this._delimeter?4:8}},_createDigit:function(e,t,i){var s=this._factory.createTextStyle(this._factory.TEXTSTYLE_HUD_TITLE);s.align=_t.LEFT;var n=new ui(this._kernel,10,10,e,s);return n.setPosition(t,i),n},setIsExpired:function(){this._context.alpha=.25},__class__:ii});var si=function(e){this._delimeter=".",jt.call(this,e,220,60,!1)};(t["b10ski.gui.HudTimer"]=si).__name__="b10ski.gui.HudTimer",si.__super__=jt,si.prototype=e(jt.prototype,{_init:function(){jt.prototype._init.call(this);var e=this._factory.createTextStyle(this._factory.TEXTSTYLE_HUD_TITLE);this._title=new ui(this._kernel,this.width,20,U.string(this._kernel.getConfig("gui.scenes.game.hud.timer")).toUpperCase(),e,null,null,.5),this._title.setPosition(0,0),this.addEntity(this._title,null,!0,10),this._digits=[];for(var t=33,i=0,s=this._tools.convertUpdatesToFormattedTime(0,this._delimeter).split("");i<s.length;){var n=s[i];++i;var r=this._createDigit(n,t,-4);this._digits.push(r),this.addEntity(r,null,!0,10),t+=n==this._delimeter?10:28}},configure:function(e){if(this._value!=e){this._value=e;for(var t=0,i=0,s=this._tools.convertUpdatesToFormattedTime(this._value,this._delimeter).split("");i<s.length;){var n=s[i];++i,this._digits[t].set_text(n),++t}}},_createDigit:function(e,t,i){var s=this._factory.createTextStyle(this._factory.TEXTSTYLE_HUD_TIMER),n=new ui(this._kernel,40,40,"",s);return n.setPosition(t,i),n},__class__:si});var ni=function(e,t,i,s){null==s&&(s=1),null==i&&(i=!1),this._imageElement=t,this._isAdd=i,jt.call(this,e,this._imageElement.width,this._imageElement.height,!1),this.set_alpha(s)};(t["b10ski.gui.Image"]=ni).__name__="b10ski.gui.Image",ni.__super__=jt,ni.prototype=e(jt.prototype,{_init:function(){jt.prototype._init.call(this),this._context.mouseEnabled=!1,this._bitmap=new createjs.Bitmap(this._imageElement),this._context.addChild(this._bitmap),this._bitmap.compositeOperation=this._isAdd?"lighter":"source-over"},set_alpha:function(e){return this._bitmap.alpha=e},__class__:ni,__properties__:e(jt.prototype.__properties__,{set_alpha:"set_alpha"})});var ri=function(e){this._assetManager=$i.__cast(e.assets,lt),this._buttonSize=50,Le.call(this,e,this._buttonSize,this._buttonSize,null,null,null,null,null,null,null,this._assetManager.overlayPauseUp,this._assetManager.overlayPauseOver,null,null,4,0,.85)};(t["b10ski.gui.Overlay"]=ri).__name__="b10ski.gui.Overlay",ri.__super__=Le,ri.prototype=e(Le.prototype,{_init:function(){Le.prototype._init.call(this);var e=this._kernel.factory.width-this._buttonSize-5;this.positionButton(rt.PAUSE,e,4),this.positionButton(rt.UNPAUSE,-this._buttonSize-10,4),this.positionButton(rt.BACK,-this._buttonSize-10,4),this.positionButton(rt.MUTE,-this._buttonSize-10,4),this.positionButton(rt.UNMUTE,-this._buttonSize-10,4),this._flashView.set_isVisible(!0),this._pauseMenu=new ci(this._kernel),this.set_pauseEntity(this._pauseMenu)},flash:function(e,t,i,s){null==s&&(s=16777215),null==i&&(i=1),null==t&&(t=!0),this._flashContext.compositeOperation=0==s?"source-over":"lighter",Le.prototype.flash.call(this,e,t,i,s)},_drawPause:function(e){null==e&&(e=!0),Le.prototype._drawPause.call(this,e),this._pauseMenu.pauseHandler(e)},__class__:ri});function ai(e,t){this._isSmall=t,jt.call(this,e,this._isSmall?230:380,this._isSmall?190:240,!1)}(t["b10ski.gui.Panel"]=ai).__name__="b10ski.gui.Panel",ai.__super__=jt,ai.prototype=e(jt.prototype,{_init:function(){jt.prototype._init.call(this),this.set_y(.5*(this._factory.height-this.height)),this.addEntity(new m(this._kernel,null,this._bgContext=new createjs.Container),null,!0,1),this._bgContext.alpha=.5,this.addEntity(new ni(this._kernel,this._kernel.assets.getAsset(this._isSmall?"assets/gui/PanelSmallBg.png":"assets/gui/PanelBigBg.png")),null,!0,2),this.addEntity(new m(this._kernel,null,this._fgContext=new createjs.Container),null,!0,999),this.addEntity(new ni(this._kernel,this._kernel.assets.getAsset(this._isSmall?"assets/gui/PanelSmallFg.png":"assets/gui/PanelBigFg.png")),null,!0,1e3)},__class__:ai});function _i(e,t){this._type=t,ai.call(this,e,!0)}(t["b10ski.gui.PanelLevel"]=_i).__name__="b10ski.gui.PanelLevel",_i.__super__=ai,_i.prototype=e(ai.prototype,{_init:function(){ai.prototype._init.call(this),this.vo=new Rt(this._kernel,this._type),this._bgBitmap=new createjs.Bitmap(this._assets.getAsset("assets/gui/PanelLevelBg.png"));var e=this._getBgCol()*this.width;this._bgBitmap.sourceRect=new createjs.Rectangle(e,0,this.width,this.height),this._bgContext.addChild(this._bgBitmap),this._fgBitmap=new createjs.Bitmap(this._assets.getAsset("assets/gui/PanelLevel.png"));e=this._getFgCol()*this.width;this._fgBitmap.sourceRect=new createjs.Rectangle(e,0,this.width,this.height),this._fgContext.addChild(this._fgBitmap);var t=this._factory.createTextStyle(this._factory.TEXTSTYLE_PANEL_TITLE);t.spacingVertical=16,this._title=new ui(this._kernel,125,this.height-60,this._getTitle().toUpperCase(),t),this._title.setPosition(0,72),this.addEntity(this._title,null,!0,10);var i=this._factory.createTextStyle(this._factory.TEXTSTYLE_PANEL_MESSAGE);this._message=new ui(this._kernel,this.width-60,this.height-60,this._getMessage().toUpperCase(),i,null,null,.5),this._message.setPosition(30,131),this.addEntity(this._message,null,!0,10)},_getTitle:function(){var e="";return e+=this.vo.title,this.vo.isLocked||this.vo.isNew?this.vo.isNew?e+="\n"+U.string(this._kernel.getConfig("gui.scenes.selectLevel.new")).toUpperCase():this.vo.isLocked&&(e+="\n"+U.string(this._kernel.getConfig("gui.scenes.selectLevel.locked")).toUpperCase()):e+="\n"+this._session.getMedalTitle(this.vo.medalType),e},_getMessage:function(){return this.vo.message},_getBgCol:function(){switch(this._type._hx_index){case 0:return 0;case 1:return 1;case 2:return 2}},_getFgCol:function(){if(this.vo.isLocked)return 4;switch(this.vo.medalType._hx_index){case 0:return 0;case 1:return 1;case 2:return 2;case 3:return 3}},__class__:_i});function oi(e,t){this._medalType=t,this._delayInitial=1500,this._delayMedal=750,ai.call(this,e,!0)}(t["b10ski.gui.PanelResult"]=oi).__name__="b10ski.gui.PanelResult",oi.__super__=ai,oi.prototype=e(ai.prototype,{_init:function(){ai.prototype._init.call(this),this._fgBitmap=new createjs.Bitmap(this._assets.getAsset("assets/gui/PanelResult.png")),this._fgBitmap.sourceRect=new createjs.Rectangle(0,0,this.width,this.height),this._fgContext.addChild(this._fgBitmap);var e,t=this._factory.createTextStyle(this._factory.TEXTSTYLE_PANEL_MESSAGE);switch(this._message=new ui(this._kernel,this.width-60,this.height-60,this._getMessage().toUpperCase(),t),this._message.setPosition(30,131),this.addEntity(this._message,null,!0,10),this._medalType._hx_index){case 0:e=[];break;case 1:e=[bt.MEDAL_BRONZE];break;case 2:e=[bt.MEDAL_BRONZE,bt.MEDAL_SILVER];break;case 3:e=[bt.MEDAL_BRONZE,bt.MEDAL_SILVER,bt.MEDAL_GOLD]}for(var i=this._delayInitial,s=0;s<e.length;){var n=e[s];++s,i+=this._delayMedal,this.addEntity(new Ke(this._kernel,function(e,t){return function(){e[0](t[0])}}([ms(this,this._showMedal)],[n]),i))}},_showMedal:function(e){var t=this._getFgCol(e);this._fgBitmap.sourceRect.x=t*this.width;var i=e._hx_index;this.addEntity(new Xt(this._kernel,1,40*(i+1),70),null,!0,1e3),this._kernel.overlay.flash(100*i+100,!0,.3*i),0<i&&(this._kernel.audio.start("GameOver",Ze.INTERFACE,1,0,.5*i),this._kernel.audio.start("Medal"+i,Ze.INTERFACE,1,0,.5*i))},_getMessage:function(){var e="";return e+=U.string(this._kernel.getConfig("gui.scenes.results.message"))+" ",e+=this._session.getMedalTitle(this._medalType)+"\n"},_getFgCol:function(e){switch(e._hx_index){case 0:return 0;case 1:return 1;case 2:return 2;case 3:return 3}},__class__:oi});function hi(e,t){this._type=t,ai.call(this,e,!1)}(t["b10ski.gui.PanelShop"]=hi).__name__="b10ski.gui.PanelShop",hi.__super__=ai,hi.prototype=e(ai.prototype,{_init:function(){ai.prototype._init.call(this),this.vo=new Ht(this._kernel,this._type),this._fgBitmap=new createjs.Bitmap(this._assets.getAsset("assets/gui/PanelShop.png"));var e=this._getFgCol()*this.width;this._fgBitmap.sourceRect=new createjs.Rectangle(e,0,this.width,this.height),this._fgContext.addChild(this._fgBitmap);var t=new Zt(this._kernel);t.setPosition(215,43),this.addEntity(t,null,!0,30);var i=this._factory.createTextStyle(this._factory.TEXTSTYLE_PANEL_TITLE);this._message=new ui(this._kernel,112,this.height-60,this._getTitle().toUpperCase(),i,null,null,1),this._message.setPosition(0,50),this.addEntity(this._message,null,!0,10);var s=this._factory.createTextStyle(this._factory.TEXTSTYLE_PANEL_STATS);this._title=new ui(this._kernel,this._message.width,this.height-60,this._getMessage().toUpperCase(),s,null,null,.5),this._title.setPosition(this._message.x,this._message.y-7),this.addEntity(this._title,null,!0,10);for(var n=86,r=[It.UPGRADE_SPEED,It.UPGRADE_STEERING,It.UPGRADE_ACCELERATION,It.UPGRADE_BOOST],a=0;a<r.length;){var _=r[a];++a;var o=this._createUpgrade(_,this._type,0,n);this.addEntity(o,null,!0,15),n+=0|o.height}},_createUpgrade:function(e,t,i,s){var n=new gi(this._kernel,e,this.vo);return n.setPosition(i,s),n},_getTitle:function(){return this.vo.title},_getMessage:function(){return this.vo.subtitle},_getFgCol:function(){switch(this._type._hx_index){case 0:return 0;case 1:return 1}},__class__:hi});function li(e,t){this._statHeight=12,this._statWidth=8,this._type=t,ai.call(this,e,!0)}(t["b10ski.gui.PanelUnit"]=li).__name__="b10ski.gui.PanelUnit",li.__super__=ai,li.prototype=e(ai.prototype,{_init:function(){ai.prototype._init.call(this),this.vo=new Ht(this._kernel,this._type),this._fgBitmap=new createjs.Bitmap(this._assets.getAsset("assets/gui/PanelUnit.png"));var e=this._getFgCol()*this.width;this._fgBitmap.sourceRect=new createjs.Rectangle(e,0,this.width,this.height),this._fgContext.addChild(this._fgBitmap);var t=this._factory.createTextStyle(this._factory.TEXTSTYLE_PANEL_TITLE);this._message=new ui(this._kernel,112,this.height-60,this._getTitle().toUpperCase(),t,null,null,1),this._message.setPosition(0,50),this.addEntity(this._message,null,!0,10);var i=this._factory.createTextStyle(this._factory.TEXTSTYLE_PANEL_STATS);this._title=new ui(this._kernel,this._message.width,this.height-60,this._getMessage().toUpperCase(),i,null,null,.5),this._title.setPosition(this._message.x,this._message.y-7),this.addEntity(this._title,null,!0,10);for(var s=80,n=[It.UPGRADE_SPEED,It.UPGRADE_STEERING,It.UPGRADE_ACCELERATION,It.UPGRADE_BOOST],r=0;r<n.length;){var a=n[r];++r;var _=this._createBar(a);_.set_y(s),s+=_.height,this.addEntity(_,null,!0,15)}},_createBar:function(e){var t=new jt(this._kernel,this.width,this._statHeight+2,!1),i=this._title.textStyle.clone();i.size=16;var s=new ui(this._kernel,this._message.width,t.height,this._session.getUpgradeTitle(e).toUpperCase(),i);t.addEntity(s,null,!0,1);for(var n=[],r=0,a=this.vo.getDefault(e);r<a;){r++;n.push(0)}for(r=0,a=this.vo.getUpgrade(e);r<a;){r++;n.push(1)}for(r=0,a=this.vo.getAvailable(e);r<a;){r++;n.push(2)}for(;8<n.length;)n.shift();for(var _=123,r=0;r<n.length;){var o=n[r];++r;var h=new createjs.Bitmap(this._assets.getAsset("assets/gui/PanelUnit.png"));h.sourceRect=new createjs.Rectangle(2*this.width+o*this._statWidth,0,this._statWidth,this._statHeight),t._context.addChild(h),h.x=_,h.y=7,_+=this._statWidth}return t},_getTitle:function(){return this.vo.title},_getMessage:function(){return this.vo.subtitle},_getFgCol:function(){switch(this._type._hx_index){case 0:return 0;case 1:return 1}},__class__:li});var ci=function(e){Qe.call(this,e)};(t["b10ski.gui.PauseMenu"]=ci).__name__="b10ski.gui.PauseMenu",ci.__super__=Qe,ci.prototype=e(Qe.prototype,{_init:function(){var e=this;Qe.prototype._init.call(this),this.addEntity(this._debugText=new ui(this._kernel,this._factory.width-20,20,"",this._factory.createTextStyle(ot.SMALLPRINT),!0,!1,.5),null,!0,2),this._debugText.setPosition(10,this._factory.height-this._debugText.height);var t=(this._kernel.factory.width-200)/2,i=(this._kernel.factory.height-65*(this._isFullScreenSupported()?4:3))/2;this.addEntity(this._logo=new ni(this._kernel,this._kernel.assets.getAsset("assets/gui/PauseBg.png")),null,!0,0),this.addEntity(new Qt(this._kernel,this._kernel.getConfig("gui.buttons.unpause"),t,i,null,function(){e._kernel.overlay.activateButton(rt.UNPAUSE)}),Je.ALWAYS,!0,1),this.addEntity(this._audioButton=new Qt(this._kernel,this._kernel.getConfig("gui.buttons.audioOff"),t,i+=65,null,function(){e._kernel.overlay._wasMute=!e._kernel.overlay._wasMute,e._kernel.overlay.activateButton(rt.UNPAUSE)}),Je.ALWAYS,!0,1),this._isFullScreenSupported()&&this.addEntity(this._fullScreenButton=new Qt(this._kernel,this._kernel.getConfig("gui.buttons.fullScreenOn"),t,i+=65,null,function(){e._stageClick(),e._kernel.overlay.activateButton(rt.UNPAUSE)}),Je.ALWAYS,!0,1),this.addEntity(new Qt(this._kernel,this._kernel.getConfig("gui.buttons.back"),t,i+=65,null,function(){e._kernel.overlay.activateButton(rt.UNPAUSE),e._kernel.scenes.back()}),Je.DEFEND,!0,1),this.addEntity(new Qt(this._kernel,this._kernel.getConfig("gui.buttons.instructions"),t,i,null,function(){e._kernel.overlay.activateButton(rt.UNPAUSE),e._pressInstructions()}),Je.STANDARD,!0,1)},_isFullScreenSupported:function(){return!1},_isFullScreenEnabled:function(){try{var e=window.document;return!!e.fullscreenElement||(!!e.mozFullScreenElement||(!!e.webkitFullscreenElement||e.msFullscreenElement))}catch(e){}return!1},_disposer:function(){this._kernel._stage.removeEventListener("click",ms(this,this._stageClick),!0),Qe.prototype._disposer.call(this)},_pressInstructions:function(){try{this._kernel.scenes.get_scene()._pressInstructions()}catch(e){this._kernel.scenes.setScene(at.INSTRUCTIONS)}},_updater:function(e){null==e&&(e=0),Qe.prototype._updater.call(this,e),this._isFullScreenClicked=!1},pauseHandler:function(e){var t=this;e?(this._audioButton.setTitle(this._kernel.getConfig(this._kernel.audio.isMute?"gui.buttons.audioOn":"gui.buttons.audioOff")),null!=this._fullScreenButton&&this._fullScreenButton.setTitle(this._kernel.getConfig(this._isFullScreenEnabled()?"gui.buttons.fullScreenOff":"gui.buttons.fullScreenOn")),this._kernel._stage.addEventListener("click",ms(this,this._stageClick),!0),this._debugText.set_text(this._factory.id.toLowerCase()+" v"+this._factory.version+" @ "+Math.round(this._kernel.getFramerate())+"fps : "+this._session.cache.debugMessage),this.addEntity(new rs(this._kernel,function(e){t._context.y=e},this._factory.height,0,0,500,null,ss.EASE_OUT,ns.QUARTIC)),this.addEntity(new rs(this._kernel,function(e){t._logo.set_alpha(e)},0,1,2e3,2e3,null,ss.EASE_OUT,ns.QUARTIC))):this._kernel._stage.removeEventListener("click",ms(this,this._stageClick),!0)},_stageClick:function(e){this._kernel.isActive||null!=this._fullScreenButton&&(this._isFullScreenClicked||this._fullScreenButton.isOver&&(this._isFullScreenEnabled()?this._kernel.system.requestExitFullScreen():(this._kernel.system.requestFullScreen(),this._kernel.system.requestLockScreen()),this._isFullScreenClicked=!0,null!=e&&e.stopPropagation(),this._kernel.overlay.activateButton(rt.UNPAUSE)))},__class__:ci});var ui=function(e,t,i,s,n,r,a,_){null==_&&(_=1),null==a&&(a=!1),null==r&&(r=!1),null==s&&(s=""),s=c.replace(s,"<BR/>","\n"),s=c.replace(s,"<br/>","\n"),ze.call(this,e,t,i,s,n,r,a),this.set_alpha(_)};(t["b10ski.gui.Text"]=ui).__name__="b10ski.gui.Text",ui.__super__=ze,ui.prototype=e(ze.prototype,{_init:function(){ze.prototype._init.call(this),this._textField.textBaseline="alphabetic",this._textField.y+=1.15*this.textStyle.size,this._prevTextStyle="invalidated"},set_alpha:function(e){return this._context.alpha=e},__class__:ui,__properties__:e(ze.prototype.__properties__,{set_alpha:"set_alpha"})});function di(e,t,i){this._big=t,this._small=i,jt.call(this,e,360,200,!1)}(t["b10ski.gui.TitleBig"]=di).__name__="b10ski.gui.TitleBig",di.__super__=jt,di.prototype=e(jt.prototype,{_init:function(){jt.prototype._init.call(this);this._textBig=new ui(this._kernel,this.width,30,"",this._factory.createTextStyle(ot.OVERSIZED),!1,!1,1),this._textBig.setPosition(-1,20),this.addEntity(this._textBig,null,!0,1),this._textSmall=new ui(this._kernel,this.width,30,"",this._factory.createTextStyle(ot.SUBHEAD),!1,!1,.5),this._textSmall.setPosition(0,10),this.addEntity(this._textSmall,null,!0,1),this.configure(this._big,this._small)},configure:function(e,t){this._big=e,this._small=t,this._textBig.set_text(this._big.toUpperCase()),this._textSmall.set_text(this._small.toUpperCase())},__class__:di});function pi(e,t){this._title=t,jt.call(this,e,350,40,!1)}(t["b10ski.gui.TitleSmall"]=pi).__name__="b10ski.gui.TitleSmall",pi.__super__=jt,pi.prototype=e(jt.prototype,{_init:function(){jt.prototype._init.call(this),this._text=new ui(this._kernel,this.width,30,"",this._factory.createTextStyle(ot.HEADLINE),!1,!1,1),this._text.setPosition(0,7),this.addEntity(this._text,null,!0,1),this.set_x((this._factory.width-this.width)/2),this.configure(this._title)},configure:function(e){this._title=e,this._title=this._title.toUpperCase(),this._text.set_text(this._title)},__class__:pi});var gi=function(e,t,i){this._statHeight=24,this._statWidth=16,this._MAX_STATS=8,this._type=t,this._unitVo=i,jt.call(this,e,380,28,!1)};(t["b10ski.gui.Upgrade"]=gi).__name__="b10ski.gui.Upgrade",gi.__super__=jt,gi.prototype=e(jt.prototype,{_init:function(){jt.prototype._init.call(this),this._prevCoins=this._session.getCoins();var e=this._factory.createTextStyle(this._factory.TEXTSTYLE_PANEL_TITLE),t=new ui(this._kernel,112,this.height,this._session.getUpgradeTitle(this._type).toUpperCase(),e);t.set_y(-2),this.addEntity(t,null,!0,1),this._bars=new createjs.Container,this._bars.x=123,this._context.addChild(this._bars),this._button=new Jt(this._kernel,"",245,-2,null,ms(this,this.buy)),this._session.get_isTester()&&this.addEntity(new Kt(this._kernel,this._statWidth*this._MAX_STATS,this._statHeight,this._bars.x,0,null,ms(this,this._reduce)),null,!0,1);e=this._factory.createTextStyle(this._factory.TEXTSTYLE_PANEL_MESSAGE);this._message=new ui(this._kernel,100,20,"",e,null,null,.5),this._message.setPosition(244,4),this.addEntity(this._message,null,!0,29),this.configure()},_updater:function(e){null==e&&(e=0),jt.prototype._updater.call(this,e),this._prevCoins!=this._session.getCoins()&&(this._prevCoins=this._session.getCoins(),this.configure())},configure:function(){this._bars.removeAllChildren();var e=this._unitVo.getTotal(this._type),t=this._getPrice(e+1),i=t<=this._session.getCoins();this._button.setTitle(U.string(this._kernel.getConfig("gui.buttons.buy"))+" "+t),e==this._MAX_STATS?(this._button.remove(!0),this._message.set_text(U.string(this._kernel.getConfig("gui.scenes.shop.maxed")).toUpperCase())):i?(this._message.set_text(""),this.addEntity(this._button,null,!0,30)):(this._button.remove(!0),this._message.set_text(null==t?"null":""+t));for(var s=[],n=0,r=this._unitVo.getDefault(this._type);n<r;){n++;s.push(0)}for(n=0,r=this._unitVo.getUpgrade(this._type);n<r;){n++;s.push(1)}for(n=0,r=this._unitVo.getAvailable(this._type);n<r;){n++;s.push(2)}for(;8<s.length;)s.shift();for(var a=0,n=0;n<s.length;){var _=s[n];++n;var o=new createjs.Bitmap(this._assets.getAsset("assets/gui/PanelShop.png"));o.sourceRect=new createjs.Rectangle(2*this.width+_*this._statWidth,0,this._statWidth,this._statHeight),this._bars.addChild(o),o.x=a,a+=this._statWidth}},_getPrice:function(e){e<0&&(e=0),e>this._MAX_STATS&&(e=this._MAX_STATS);return[0,100,300,500,800,1300,2100,3400,5500][e]},buy:function(){var e=this._unitVo.getTotal(this._type),t=this._getPrice(e+1);t<=this._session.getCoins()&&(this._session.setCoins(null,this._session.getCoins()-t),this._session.setUpgrade(this._type,this._unitType,this._unitVo.getUpgrade(this._type)+1),this.configure(),this._kernel.audio.start("Coin",Ze.INTERFACE,0,0,.5))},_reduce:function(){this._session.setUpgrade(this._type,this._unitType,this._session.getUpgrade(this._type,this._unitType)-1),this.configure()},__class__:gi});function fi(e,t,i,s,n){null==n&&(n=!1),null==s&&(s=!0),null==i&&(i=!1),this._session=e.get_session(),this._assets=e.assets,this._factory=e.factory,this._system=e.system,j.call(this,e,t,i=!0,s,n)}(t["b10ski.scenes.AScene"]=fi).__name__="b10ski.scenes.AScene",fi.__super__=j,fi.prototype=e(j.prototype,{_init:function(){j.prototype._init.call(this),this._easyTweezers=[],this._kernel.overlay.get_pauseEntity().setAgenda(Je.STANDARD),this._factory.preventDefaultForKeys([tt.SPACE]),this._kernel.audio.start("MusicMenu",Ze.MUSIC,-1,7111,.5,null,!0)},_disposer:function(){this._factory.allowDefaultForKeys([tt.SPACE]),j.prototype._disposer.call(this)},_pressContinue:function(){this._kernel.log("button: continue: "+U.string(this.type)),this._kernel.inputs.keyboard.getIsKeyDown(tt.SQUARELEFT)&&this._kernel.inputs.keyboard.getIsKeyDown(tt.SQUARERIGHT)&&this._session.setIsTester(!this._session.get_isTester());var e=this._factory.getNextSceneType(this.type);e==at.SELECT_LEVEL&&this._session.getMedal(St.LEVEL_1)==bt.MEDAL_NONE&&(e=at.GAME);var t=ms(l=this._kernel.scenes,l.setScene),i=e;this._outro(function(){t(i)})},_pressInstructions:function(){this._kernel.log("button: instructions");var e=ms(l=this._kernel.scenes,l.setScene),t=at.INSTRUCTIONS;this._outro(function(){e(t)})},_pressAuthor:function(){var t=this;this._kernel.log("button: author"),Pi.delay(function(){var e=t._kernel.getConfig("settings.urls.author");window.top.location.href=U.string(e)},500)},_outro:function(e){this._isOutroCalled||(this._isOutroCalled=!0,null!=e&&e())},_addBg:function(){this.addEntity(new Wt(this._kernel,this.type),null,!0,1)},_addFg:function(e,t,i,s){null==s&&(s=0),null==i&&(i=""),null==t&&(t="");var n=this;this._fgHeader=new ni(this._kernel,this._assets.getAsset(e?"assets/gui/SceneFgHeader2.png":"assets/gui/SceneFgHeader1.png"));var r=this._fgHeader;r.set_x(r.x-s),this.addEntity(this._fgHeader,null,!0,110),e?this._fgHeader.addEntity(new pi(this._kernel,t),null,!0,1):this._fgHeader.addEntity(new di(this._kernel,t,i),null,!0,1),this._fgFooter=new ni(this._kernel,this._assets.getAsset(e?"assets/gui/SceneFgFooter2.png":"assets/gui/SceneFgFooter1.png")),this.addEntity(this._fgFooter,null,!0,100),this.addEntity(new rs(this._kernel,function(e){n._fgHeader.set_y(e)},-this._factory.height,this._fgHeader.y,500,1e3,null,ss.EASE_OUT,ns.EXPONENTIAL)),this.addEntity(new rs(this._kernel,function(e){n._fgFooter.set_y(e)},this._factory.height,this._fgFooter.y,e?0:750,1e3,null,ss.EASE_OUT,ns.EXPONENTIAL))},_addButtons:function(e,t,i,s,n,r,a){null==a&&(a=0),null==r&&(r=0),null==n&&(n=0),null==e&&(e=1e3);var _=this;this._buttonRight=t,this._buttonLeft=i,this._buttonCenter=s,null!=this._buttonRight&&(this._buttonRight.setPosition(this._factory.width-200-30,this._factory.height-65-13),this.addEntity(this._buttonRight,null,!0,e),this.addEntity(new rs(this._kernel,function(e){_._buttonRight.set_y(e)},this._factory.height+60,this._buttonRight.y,n+1200,2e3,null,ss.EASE_OUT,ns.ELASTIC()))),null!=this._buttonCenter&&(this._buttonCenter.setPosition(.5*(this._factory.width-200),this._factory.height-65-13),this.addEntity(this._buttonCenter,null,!0,e+1),this.addEntity(new rs(this._kernel,function(e){_._buttonCenter.set_y(e)},this._factory.height+60,this._buttonCenter.y,a+1300,2e3,null,ss.EASE_OUT,ns.ELASTIC()))),null!=this._buttonLeft&&(this._buttonLeft.setPosition(30,this._factory.height-65-13),this.addEntity(this._buttonLeft,null,!0,e+2),this.addEntity(new rs(this._kernel,function(e){_._buttonLeft.set_y(e)},this._factory.height+60,this._buttonLeft.y,r+1400,2e3,null,ss.EASE_OUT,ns.ELASTIC())))},_defaultOutro:function(e){var t=this;if(!this._isOutroCalled){this._isOutroCalled=!0;for(var i=0,s=this.getEntitiesByClass(rs);i<s.length;){var n=s[i];++i,n.remove()}this._easyTweez(!1),null!=this._buttonLeft&&this.addEntity(new rs(this._kernel,function(e){t._buttonLeft.set_y(e)},this._buttonLeft.y,this._factory.height,0,1e3,null,ss.EASE_IN,ns.BACK())),null!=this._buttonCenter&&this.addEntity(new rs(this._kernel,function(e){t._buttonCenter.set_y(e)},this._buttonCenter.y,this._factory.height,50,1e3,null,ss.EASE_IN,ns.BACK())),null!=this._buttonRight&&this.addEntity(new rs(this._kernel,function(e){t._buttonRight.set_y(e)},this._buttonRight.y,this._factory.height,100,1e3,null,ss.EASE_IN,ns.BACK())),this.addEntity(new rs(this._kernel,function(e){t._fgHeader.set_y(e)},this._fgHeader.y,-this._factory.height,250,500,null,ss.EASE_IN,ns.EXPONENTIAL)),this.addEntity(new rs(this._kernel,function(e){t._fgFooter.set_y(e)},this._fgFooter.y,this._factory.height,500,500,null,ss.EASE_IN,ns.EXPONENTIAL)),this.addEntity(new rs(this._kernel,function(e){},0,0,100,1e3,null,ss.EASE_IN,ns.BACK(),e)),this._kernel.audio.start("Transition",Ze.INTERFACE,0,0,.25),this._kernel.isDebug&&e()}},_easyTweez:function(e){null==e&&(e=!0);for(var t=0,i=this._easyTweezers;t<i.length;){var s=[i[t]];++t,e?s[0].isVerticalIn?this.addEntity(new rs(this._kernel,function(t){return function(e){t[0].guiEntity.set_y(e)}}(s),-this._factory.height+s[0].guiEntity.y,s[0].guiEntity.y,500+100*s[0].sequence,2e3,null,ss.EASE_OUT,ns.QUARTIC)):this.addEntity(new rs(this._kernel,function(t){return function(e){t[0].guiEntity.set_x(e)}}(s),this._factory.width+s[0].guiEntity.x,s[0].guiEntity.x,500+100*s[0].sequence,2e3,null,ss.EASE_OUT,ns.QUARTIC)):this.addEntity(new rs(this._kernel,function(t){return function(e){t[0].guiEntity.set_x(e)}}(s),s[0].guiEntity.x,-1.5*this._factory.width+s[0].guiEntity.x,50*s[0].sequence,500,null,ss.EASE_IN,ns.BACK()))}},_addEasyTweez:function(e,t,i){null==i&&(i=!0),null!=e&&this._easyTweezers.push({guiEntity:e,sequence:t,isVerticalIn:i})},_createBurst:function(e,t,i,s){null==s&&(s=1e4);var n=new Xt(this._kernel,e,t,i);return this.addEntity(n,null,!0,s),n},__class__:fi});var yi=function(e,t,i,s,n){null==n&&(n=!1),null==s&&(s=!0),null==i&&(i=!1),fi.call(this,e,t,i,s,n)};(t["b10ski.scenes.Avatar"]=yi).__name__="b10ski.scenes.Avatar",yi.__super__=fi,yi.prototype=e(fi.prototype,{_init:function(){var t=this;fi.prototype._init.call(this),this._session.cache.levelType=St.LEVEL_1,this._kernel.audio.start("MusicMenu",Ze.MUSIC,-1,0,.15,0,!0),this._addBg(),this._addFg(!0,this._kernel.getConfig("gui.scenes.avatar.title")),this._panelUnitA=new li(this._kernel,At.UNIT_A),this._panelUnitA.set_x(15),this.addEntity(this._panelUnitA,null,!0,1e3),this._panelUnitB=new li(this._kernel,At.UNIT_B),this._panelUnitB.set_x(this._factory.width-this._panelUnitB.width-15),this.addEntity(this._panelUnitB,null,!0,1e3),this.addEntity(new rs(this._kernel,function(e){t._panelUnitA.set_x(e)},-(this._panelUnitA.width+this._panelUnitA.x),this._panelUnitA.x,1500,1e3,null,ss.EASE_OUT,ns.QUARTIC)),this.addEntity(new rs(this._kernel,function(e){t._panelUnitB.set_x(e)},this._factory.width,this._panelUnitB.x,1500,1e3,null,ss.EASE_OUT,ns.QUARTIC)),this._avatarUnitA=new ni(this._kernel,this._assets.getAsset("assets/gui/AvatarUnitA.png")),this._avatarUnitB=new ni(this._kernel,this._assets.getAsset("assets/gui/AvatarUnitB.png")),this.addEntity(this._avatarUnitA,null,!0,300),this.addEntity(this._avatarUnitB,null,!0,300),this.addEntity(new rs(this._kernel,function(e){t._avatarUnitA.set_x(e)},-this._factory.width,this._avatarUnitA.x,100,2e3,null,ss.EASE_OUT,ns.QUARTIC)),this.addEntity(new rs(this._kernel,function(e){t._avatarUnitB.set_x(e)},this._factory.width,this._avatarUnitB.x,100,2e3,null,ss.EASE_OUT,ns.QUARTIC));var e=new Qt(this._kernel,this._kernel.getConfig("gui.buttons.avatars.unitA"),0,0,this._kernel.factory.keyNext,ms(this,this._pressUnitA)),i=new Qt(this._kernel,this._kernel.getConfig("gui.buttons.avatars.unitB"),0,0,null,ms(this,this._pressUnitB));this._addButtons(null,i,e),this._easyTweez()},_updater:function(e){null==e&&(e=0),fi.prototype._updater.call(this,e)},_outro:function(e){var t=this;this._defaultOutro(e),this._kernel.audio.start("GameStart",Ze.INTERFACE,1,0,.5),this.addEntity(new rs(this._kernel,function(e){t._panelUnitA.set_x(e)},this._panelUnitA.x,-this._factory.width,0,800,null,ss.EASE_IN,ns.BACK())),this.addEntity(new rs(this._kernel,function(e){t._panelUnitB.set_x(e)},this._panelUnitB.x,this._factory.width,0,800,null,ss.EASE_IN,ns.BACK())),this.addEntity(new rs(this._kernel,function(e){t._avatarUnitA.set_x(e)},this._avatarUnitA.x,-this._factory.width,0,1e3,null,ss.EASE_IN,ns.BACK(.75))),this.addEntity(new rs(this._kernel,function(e){t._avatarUnitB.set_x(e)},this._avatarUnitB.x,this._factory.width,0,1e3,null,ss.EASE_IN,ns.BACK(.75)))},_pressUnitA:function(){this._session.cache.unitType=At.UNIT_A,this._pressContinue()},_pressUnitB:function(){this._session.cache.unitType=At.UNIT_B,this._pressContinue()},__class__:yi});var mi=function(e,t,i,s,n){null==n&&(n=!1),null==s&&(s=!0),null==i&&(i=!1),fi.call(this,e,t,i,s,n)};(t["b10ski.scenes.Game"]=mi).__name__="b10ski.scenes.Game",mi.__super__=fi,mi.prototype=e(fi.prototype,{_init:function(){var e,t,i,s,n,r,a,_,o;fi.prototype._init.call(this),this.isPauseable=!0,this._kernel.overlay.get_pauseEntity().setAgenda(Je.DEFEND),this._session.cache.totalPlays++,this._levelVo=new Rt(this._kernel,this._session.cache.levelType),this._unitVo=new Ht(this._kernel,this._session.cache.unitType),this.addEntity(this._hud=new $t(this._kernel,!this._levelVo.isNew,this._levelVo.scoreGold,this._levelVo.scoreSilver,this._levelVo.scoreBronze),null,!0,100),this.addEntity(this._location=new Dt(this._kernel,this._levelVo,this._unitVo),null,!0,10),this._session.get_isTester()&&(e=ms(this,this._winMedal),t=bt.MEDAL_BRONZE,i=new Qt(this._kernel,this._kernel.getConfig("gui.buttons.testMode.bronze"),0,0,null,function(){e(t,!0)}),s=ms(this,this._winMedal),n=bt.MEDAL_SILVER,r=new Qt(this._kernel,this._kernel.getConfig("gui.buttons.testMode.silver"),0,0,null,function(){s(n,!0)}),a=ms(this,this._winMedal),_=bt.MEDAL_GOLD,o=new Qt(this._kernel,this._kernel.getConfig("gui.buttons.testMode.gold"),0,0,null,function(){a(_,!0)}),this._addButtons(null,o,i,r,1e3,1e3,1e3)),this._kernel.messenger.addSubscriber(this._entity,this._factory.MESSAGE_FINISH_LINE,ms(this,this._handleFinishLine),null,null,!0),this._kernel.audio.stop(null,Ze.MUSIC),this._kernel.audio.start("GameStart",Ze.EFFECTS,1,0,1),this._kernel.audio.start("Cowbells",Ze.EFFECTS,1,0,1),this._kernel.log("play: "+U.string(this._levelVo.type)),this._factory.preventDefaultForKeys([tt.UP,tt.RIGHT,tt.DOWN,tt.LEFT,tt.SPACE]),this._session.get_poki().gameplayStart()},_createDelay:function(e,t){null==t&&(t=1e3),null==this._delay&&this.addEntity(this._delay=new Ke(this._kernel,e,t))},_handleFinishLine:function(e,t){for(var i=0,s=this.getEntitiesByClass(Qt);i<s.length;){var n=s[i];++i,n.isDisposed||(n.isDisposed=!0,n.set_isActive(!1),n._disposer())}var r=this._session.getMedalFromScore(this._location.getTime(),this._levelVo.scoreGold,this._levelVo.scoreSilver,this._levelVo.scoreBronze);return this._winMedal(r),this._createDelay(ms(this,this._gameOver),2500),this._kernel.overlay.flash(500,!0,.5,16777215),this._kernel.audio.start("Cowbells",Ze.EFFECTS,1,0,1),r!=bt.MEDAL_NONE&&this._kernel.audio.start("GameOver",Ze.EFFECTS,1,0,1),!1},_winMedal:function(e,t){null==t&&(t=!1),this._session.cache.medalType=e,this._session.setMedal(this._levelVo.type,this._unitVo.type,e),this._session.setCoins(null,this._session.getCoins()+this._getScore(e)),this._kernel.log("medal: "+U.string(e)+": "+U.string(this._levelVo.type)),t&&this._gameOver()},_gameOver:function(){this._kernel.scenes.next()},_updater:function(e){null==e&&(e=0),fi.prototype._updater.call(this,e),this._hud.configureTargets(this._location.getTime()),this._hud.configureTimer(this._location.getTime()),this._hud.configureSpeedo(this._location.getSpeed())},_disposer:function(){this._factory.allowDefaultForKeys([tt.UP,tt.RIGHT,tt.DOWN,tt.LEFT,tt.SPACE]),this._kernel.audio.stop(null,Ze.MUSIC);var e=this._session;e.saveCount++,e._setter(),e._savedData._____VERSION=e._version,e._savedData[e.id]=e._data,e._driverSave(),this._session.get_poki().gameplayStop(),fi.prototype._disposer.call(this)},_getScore:function(e){switch(e._hx_index){case 0:return 1e3;case 1:return 3e3;case 2:return 5e3;case 3:return 8e3}},__class__:mi});var Ei=function(e,t,i,s,n){null==n&&(n=!1),null==s&&(s=!0),null==i&&(i=!1),fi.call(this,e,t,i,s,n)};(t["b10ski.scenes.Instructions"]=Ei).__name__="b10ski.scenes.Instructions",Ei.__super__=fi,Ei.prototype=e(fi.prototype,{_init:function(){fi.prototype._init.call(this),this._kernel.overlay.get_pauseEntity().setAgenda(Je.DEFEND),this._kernel.audio.start("MusicMenu",Ze.MUSIC,-1,0,.15,0,!0),this._addBg(),this._addFg(!0,this._kernel.getConfig("gui.scenes.instructions.title"));var e=new Qt(this._kernel,this._kernel.getConfig("gui.buttons.play"),0,0,this._kernel.factory.keyNext,ms(this,this._pressContinue));this._addButtons(null,e);var t=new ni(this._kernel,this._assets.getAsset(this._system.isDesktop?"assets/gui/InstructionsA.png":"assets/gui/InstructionsB.png"));this.addEntity(t,null,!0,20),t.setPosition((this._factory.width-t.width)/5,(this._factory.height-t.height)/2);var i=new ui(this._kernel,300,200,U.string(this._kernel.getConfig("gui.scenes.instructions.message")).toUpperCase(),this._factory.createTextStyle(ot.BODY),!0,!1);i.setPosition(this._kernel.factory.width-i.width-40,120),this.addEntity(i,null,!0,21),this._addEasyTweez(t,1,!1),this._addEasyTweez(i,2,!1),this._easyTweez(!0)},_outro:function(e){this._defaultOutro(e)},__class__:Ei});var wi=function(e,t,i,s,n){null==n&&(n=!1),null==s&&(s=!0),null==i&&(i=!1),fi.call(this,e,t,i,s,n)};(t["b10ski.scenes.Intro"]=wi).__name__="b10ski.scenes.Intro",wi.__super__=fi,wi.prototype=e(fi.prototype,{_init:function(){fi.prototype._init.call(this);var e=this._factory.createCanvas(this._factory.width,this._factory.height);this._destinationContext2d=e.getContext("2d",null),this._sourceImage=this._assets.getAsset("assets/location/Roads.png"),this._sourceCanvas=this._factory.createCanvas(this._sourceImage.width,this._sourceImage.height),this._sourceCanvas.getContext("2d",null).drawImage(this._sourceImage,0,0)},_updater:function(e){var t,i,s,n,r,a,_,o;null==e&&(e=0),fi.prototype._updater.call(this,e),1==this._updates&&(t=this._stressTest(this._sourceImage),i=this._stressTest(this._sourceCanvas),s=this._stressTest(this._sourceCanvas),n=t+this._stressTest(this._sourceImage),r=i+s,_=(a=Math.round(100*n/r)/100)<1.7,o=Math.round(100*(_?r:n)/300),this._session.cache.isDrawImageUsingCanvas=_,this._session.cache.benchmark=Math.round(o),this._session.cache.debugMessage=(null==a?"null":""+a)+" | "+this._session.cache.benchmark),this._kernel.scenes.next()},_stressTest:function(e){var t=0,i=Math.round(I.now()/1e3*1e3);this._destinationContext2d.restore(),this._destinationContext2d.clearRect(0,0,this._factory.width,this._factory.height);for(var s=i;s<i+100;)s=Math.round(I.now()/1e3*1e3),this._destinationContext2d.rotate(Math.random()-.5),this._destinationContext2d.drawImage(e,0,0,512,4,0,U.random(256),2048,16),this._destinationContext2d.drawImage(e,0,0,512,4,0,U.random(256),828.416,6.472),this._destinationContext2d.drawImage(e,0,0,512,64,0,U.random(256),128,16),this._destinationContext2d.drawImage(e,0,0,512,64,0,U.random(256),316.4400494437577,39.55500618046971),++t;return t},__class__:wi});var vi=function(e,t,i,s,n){null==n&&(n=!1),null==s&&(s=!0),null==i&&(i=!1),fi.call(this,e,t,i,s,n)};(t["b10ski.scenes.Menu"]=vi).__name__="b10ski.scenes.Menu",vi.__super__=fi,vi.prototype=e(fi.prototype,{_init:function(){var t=this;fi.prototype._init.call(this),this._kernel.audio.start("MusicMenu",Ze.MUSIC,-1,0,.15,0,!0),this._kernel.audio.start("Carve3",Ze.EFFECTS,0,0,.5),this._addBg(),this._addFg(!1,this._kernel.getConfig("gui.scenes.menu.title"),this._kernel.getConfig("gui.scenes.menu.subtitle")),this.addEntity(this._action=new zt(this._kernel),null,!0,200),this.addEntity(new rs(this._kernel,function(e){t._action.set_x(e)},-this._factory.width,this._action.x,500,2e3,null,ss.EASE_OUT,ns.ELASTIC()));var e=new Qt(this._kernel,this._kernel.getConfig("gui.buttons.play"),0,0,this._kernel.factory.keyNext,ms(this,this._pressContinue)),i=new Qt(this._kernel,this._kernel.getConfig("gui.buttons.instructions"),0,0,null,ms(this,this._pressInstructions));this._addButtons(null,e,i),this._easyTweez()},_outro:function(e){var t=this;this._defaultOutro(e),this._kernel.audio.start("Carve1",Ze.INTERFACE,0,0,.5,0,!0),this.addEntity(new rs(this._kernel,function(e){t._action.set_x(e)},this._action.x,this._factory.width,0,1e3,null,ss.EASE_IN,ns.BACK()))},__class__:vi});var Si=function(e,t,i,s,n){null==n&&(n=!1),null==s&&(s=!0),null==i&&(i=!1),fi.call(this,e,t,i,s,n)};(t["b10ski.scenes.Results"]=Si).__name__="b10ski.scenes.Results",Si.__super__=fi,Si.prototype=e(fi.prototype,{_init:function(){var t=this;fi.prototype._init.call(this),this._levelVo=new Rt(this._kernel,this._session.cache.levelType,this._session.cache.unitType),this._kernel.audio.start("GameStart",Ze.INTERFACE,1,0,.5),this._addBg(),this._addFg(!1,this._kernel.getConfig("gui.scenes.results.title"),this._levelVo.title,120),this.addEntity(this._hero=new qt(this._kernel,this._session.cache.unitType,this._session.cache.medalType),null,!0,300),this.addEntity(new rs(this._kernel,function(e){t._hero.set_x(e)},-this._factory.width,this._hero.x,500,2e3,null,ss.EASE_OUT,ns.ELASTIC())),this._panelResult=new oi(this._kernel,this._session.cache.medalType),this._panelResult.set_x(this._factory.width-this._panelResult.width-15),this.addEntity(this._panelResult,null,!0,1e3),this.addEntity(new rs(this._kernel,function(e){t._panelResult.set_x(e)},this._factory.width,this._panelResult.x,1500,1e3,null,ss.EASE_OUT,ns.QUARTIC));var e=new Qt(this._kernel,this._kernel.getConfig("gui.buttons.continue"),0,0,this._kernel.factory.keyNext,ms(this,this._pressContinue));this._addButtons(null,e,null,null,3e3,3e3),this._easyTweez(!0),this._session.get_poki().happyTime(this._session.cache.medalType._hx_index/3)},_updater:function(e){null==e&&(e=0),fi.prototype._updater.call(this,e),2e3<this._age&&Math.random()<this._session.cache.medalType._hx_index/3&&this._createBurst(.5*Math.random()+.5,((Math.random()<.5?-.5:.5)*(Math.random()*Math.random())+.5)*this._factory.width,((Math.random()<.5?-.5:.5)*(Math.random()*Math.random())+.25)*this._factory.height,299)},_outro:function(e){var t=this;this._defaultOutro(e),this.addEntity(new rs(this._kernel,function(e){t._hero.set_x(e)},this._hero.x,this._factory.width,0,1e3,null,ss.EASE_IN,ns.BACK())),this.addEntity(new rs(this._kernel,function(e){t._panelResult.set_x(e)},this._panelResult.x,this._factory.width,0,800,null,ss.EASE_IN,ns.BACK()))},__class__:Si});var xi=function(e){Ge.call(this,e,1e3)};(t["b10ski.scenes.SceneTransition"]=xi).__name__="b10ski.scenes.SceneTransition",xi.__super__=Ge,xi.prototype=e(Ge.prototype,{_init:function(){Ge.prototype._init.call(this)},__class__:xi});var bi=function(e,t,i,s,n){null==n&&(n=!1),null==s&&(s=!0),null==i&&(i=!1),fi.call(this,e,t,i,s,n)};(t["b10ski.scenes.SelectLevel"]=bi).__name__="b10ski.scenes.SelectLevel",bi.__super__=fi,bi.prototype=e(fi.prototype,{_init:function(){fi.prototype._init.call(this),this._kernel.audio.start("MusicMenu",Ze.MUSIC,-1,0,.15,0,!0),this._addBg(),this._addFg(!0,this._kernel.getConfig("gui.scenes.selectLevel.title")),this._panelLevel1=new _i(this._kernel,St.LEVEL_1),this._panelLevel1.set_x(15),this.addEntity(this._panelLevel1,null,!0,200),this._panelLevel2=new _i(this._kernel,St.LEVEL_2),this._panelLevel2.set_x(.5*(this._factory.width-this._panelLevel2.width)),this.addEntity(this._panelLevel2,null,!0,200),this._panelLevel3=new _i(this._kernel,St.LEVEL_3),this._panelLevel3.set_x(this._factory.width-this._panelLevel3.width-15),this.addEntity(this._panelLevel3,null,!0,200);var e=new Qt(this._kernel,this._kernel.getConfig("gui.buttons.levels.level1"),0,0,this._kernel.factory.keyNext,ms(this,this._pressLevel1)),t=this._panelLevel2.vo.isLocked?null:new Qt(this._kernel,this._kernel.getConfig("gui.buttons.levels.level2"),0,0,null,ms(this,this._pressLevel2)),i=this._panelLevel3.vo.isLocked?null:new Qt(this._kernel,this._kernel.getConfig("gui.buttons.levels.level3"),0,0,null,ms(this,this._pressLevel3));this._addButtons(null,i,e,t),this._addEasyTweez(this._panelLevel1,1,!1),this._addEasyTweez(this._panelLevel2,2,!1),this._addEasyTweez(this._panelLevel3,3,!1),this._easyTweez()},_updater:function(e){null==e&&(e=0),fi.prototype._updater.call(this,e)},_outro:function(e){var t=this;this.addEntity(new rs(this._kernel,function(e){t._kernel.audio.transform("MusicMenu",Ze.MUSIC,e)},.5,0,0,2e3));this._defaultOutro(function(){t._session.get_poki().commercialBreak(e)})},_pressLevel1:function(){this._session.cache.levelType=St.LEVEL_1,this._pressContinue()},_pressLevel2:function(){this._session.cache.levelType=St.LEVEL_2,this._pressContinue()},_pressLevel3:function(){this._session.cache.levelType=St.LEVEL_3,this._pressContinue()},__class__:bi});var Ti=function(e,t,i,s,n){null==n&&(n=!1),null==s&&(s=!0),null==i&&(i=!1),fi.call(this,e,t,i,s,n)};(t["b10ski.scenes.Shop"]=Ti).__name__="b10ski.scenes.Shop",Ti.__super__=fi,Ti.prototype=e(fi.prototype,{_init:function(){var t=this;fi.prototype._init.call(this),this._kernel.audio.start("MusicMenu",Ze.MUSIC,0,0,.15,0,!0),this._addBg(),this._addFg(!0,this._kernel.getConfig("gui.scenes.shop.title")),this.addEntity(this._hero=new qt(this._kernel,this._session.cache.unitType,this._session.cache.medalType),null,!0,300),this._hero.set_x(-160),this.addEntity(new rs(this._kernel,function(e){t._hero.set_x(e)},this._factory.width,this._hero.x,500,2e3,null,ss.EASE_OUT,ns.QUARTIC)),this._panelShop=new hi(this._kernel,this._session.cache.unitType),this._panelShop.set_x(this._factory.width-this._panelShop.width-15),this.addEntity(this._panelShop,null,!0,1e3),this.addEntity(new rs(this._kernel,function(e){t._panelShop.set_x(e)},this._factory.width,this._panelShop.x,1500,1e3,null,ss.EASE_OUT,ns.QUARTIC));var e=new Qt(this._kernel,this._kernel.getConfig("gui.buttons.continue"),0,0,this._kernel.factory.keyNext,ms(this,this._pressContinue)),i=new Qt(this._kernel,this._kernel.getConfig("gui.buttons.avatar"),0,0,null,ms(this,this._pressAvatar)),s=new Qt(this._kernel,this._kernel.getConfig("gui.buttons.reset"),0,0,null,ms(this,this._pressReset));this._addButtons(null,e,i,1==this._panelShop.vo.getPercentageComplete()?s:null),this._easyTweez(!0)},_outro:function(e){var t=this;this._defaultOutro(e),this.addEntity(new rs(this._kernel,function(e){t._hero.set_x(e)},this._hero.x,-this._factory.width,0,1e3,null,ss.EASE_IN,ns.BACK())),this.addEntity(new rs(this._kernel,function(e){t._panelShop.set_x(e)},this._panelShop.x,this._factory.width,0,800,null,ss.EASE_IN,ns.BACK()))},_pressReset:function(){this._kernel.log("button: reset: "),this._session.resetUnit(this._session.cache.unitType);var e=ms(l=this._kernel.scenes,l.setScene),t=at.MENU;this._outro(function(){e(t)})},_pressAvatar:function(){this._kernel.log("button: avatar: ");var e=ms(l=this._kernel.scenes,l.setScene),t=at.AVATAR;this._outro(function(){e(t)})},__class__:Ti});function ki(){}(t["haxe.IMap"]=ki).__name__="haxe.IMap",ki.__isInterface__=!0;var Ci=function(e,t,i){Error.call(this,e),this.message=e,this.__previousException=t,this.__nativeException=null!=i?i:this};(t["haxe.Exception"]=Ci).__name__="haxe.Exception",Ci.caught=function(e){return e instanceof Ci?e:e instanceof Error?new Ci(e.message,null,e):new Ni(e,null,e)},Ci.thrown=function(e){return e instanceof Ci?e.get_native():e instanceof Error?e:new Ni(e)},Ci.__super__=Error,Ci.prototype=e(Error.prototype,{unwrap:function(){return this.__nativeException},get_native:function(){return this.__nativeException},__class__:Ci,__properties__:{get_native:"get_native"}});var Ai=function(){};(t["haxe.Log"]=Ai).__name__="haxe.Log",Ai.formatOutput=function(e,t){var i=U.string(e);if(null==t)return i;var s=t.fileName+":"+t.lineNumber;if(null!=t.customParams)for(var n=0,r=t.customParams;n<r.length;){e=r[n];++n,i+=", "+U.string(e)}return s+": "+i},Ai.trace=function(e,t){var i=Ai.formatOutput(e,t);"undefined"!=typeof console&&null!=console.log&&console.log(i)};var Ii=function(){};(t["haxe.Resource"]=Ii).__name__="haxe.Resource",Ii.getString=function(e){for(var t=0,i=Ii.content;t<i.length;){var s=i[t];if(++t,s.name==e)return null!=s.str?s.str:Li.decode(s.data).toString()}return null};var Ui=function(){this.buf=new P,this.cache=[],this.useCache=Ui.USE_CACHE,this.useEnumIndex=Ui.USE_ENUM_INDEX,this.shash=new zi,this.scount=0};(t["haxe.Serializer"]=Ui).__name__="haxe.Serializer",Ui.run=function(e){var t=new Ui;return t.serialize(e),t.toString()},Ui.prototype={toString:function(){return this.buf.b},serializeString:function(e){var t=this.shash.h[e];if(null!=t)return this.buf.b+="R",void(this.buf.b+=null==t?"null":""+t);this.shash.h[e]=this.scount++,this.buf.b+="y",e=encodeURIComponent(e),this.buf.b+=U.string(e.length),this.buf.b+=":",this.buf.b+=null==e?"null":""+e},serializeRef:function(e){for(var t=typeof e,i=0,s=this.cache.length;i<s;){var n=i++,r=this.cache[n];if(typeof r==t&&r==e)return this.buf.b+="r",this.buf.b+=null==n?"null":""+n,!0}return this.cache.push(e),!1},serializeFields:function(e){for(var t=0,i=T.fields(e);t<i.length;){var s=i[t];++t,this.serializeString(s),this.serialize(T.field(e,s))}this.buf.b+="g"},serialize:function(e){switch((S=k.typeof(e))._hx_index){case 0:this.buf.b+="n";break;case 1:if(0==(t=e))return void(this.buf.b+="z");this.buf.b+="i",this.buf.b+=null==t?"null":""+t;break;case 2:var t=e;isNaN(t)?this.buf.b+="k":isFinite(t)?(this.buf.b+="d",this.buf.b+=null==t?"null":""+t):this.buf.b+=t<0?"m":"p";break;case 3:this.buf.b+=e?"t":"f";break;case 4:if($i.__instanceof(e,bs)){var i=e.__name__;this.buf.b+="A",this.serializeString(i)}else if($i.__instanceof(e,Ts))this.buf.b+="B",this.serializeString(e.__ename__);else{if(this.useCache&&this.serializeRef(e))return;this.buf.b+="o",this.serializeFields(e)}break;case 5:throw Ci.thrown("Cannot serialize function");case 6:var s=S.c;if(s==String)return void this.serializeString(e);if(this.useCache&&this.serializeRef(e))return;switch(s){case Array:var n=0;this.buf.b+="a";for(var r=0,a=e.length;r<a;){null==e[u=r++]?++n:(0<n&&(1==n?this.buf.b+="n":(this.buf.b+="u",this.buf.b+=null==n?"null":""+n),n=0),this.serialize(e[u]))}0<n&&(1==n?this.buf.b+="n":(this.buf.b+="u",this.buf.b+=null==n?"null":""+n)),this.buf.b+="h";break;case Date:var _=e;this.buf.b+="v",this.buf.b+=U.string(_.getTime());break;case Vi:this.buf.b+="q";for(var o=(t=e).keys();o.hasNext();){var h=o.next();this.buf.b+=":",this.buf.b+=null==h?"null":""+h,this.serialize(t.h[h])}this.buf.b+="h";break;case Hi:this.buf.b+="l";for(var l=(t=e).h;null!=l;){var c=l.item,l=l.next,u=c;this.serialize(u)}this.buf.b+="h";break;case ji:this.buf.b+="M";for(o=(t=e).keys();o.hasNext();){var h=o.next(),d=T.field(h,"__id__");T.deleteField(h,"__id__"),this.serialize(h),h.__id__=d,this.serialize(t.h[h.__id__])}this.buf.b+="h";break;case zi:this.buf.b+="b";for(t=e,o=zi.keysIterator(t.h);o.hasNext();){h=o.next();this.serializeString(h),this.serialize(t.h[h])}this.buf.b+="h";break;case Mi:t=e;this.buf.b+="s",this.buf.b+=U.string(Math.ceil(8*t.length/6)),this.buf.b+=":";var u=0,p=t.length-2;if(null==(g=Ui.BASE64_CODES)){for(var g=new Array(Ui.BASE64.length),r=0,a=Ui.BASE64.length;r<a;){var f=r++;g[f]=I.cca(Ui.BASE64,f)}Ui.BASE64_CODES=g}for(;u<p;){var y=t.b[u++],m=t.b[u++],E=t.b[u++];this.buf.b+=String.fromCodePoint(g[y>>2]),this.buf.b+=String.fromCodePoint(g[63&(y<<4|m>>4)]),this.buf.b+=String.fromCodePoint(g[63&(m<<2|E>>6)]),this.buf.b+=String.fromCodePoint(g[63&E])}u==p?(y=t.b[u++],m=t.b[u++],this.buf.b+=String.fromCodePoint(g[y>>2]),this.buf.b+=String.fromCodePoint(g[63&(y<<4|m>>4)]),this.buf.b+=String.fromCodePoint(g[m<<2&63])):u==1+p&&(y=t.b[u++],this.buf.b+=String.fromCodePoint(g[y>>2]),this.buf.b+=String.fromCodePoint(g[y<<4&63]));break;default:this.useCache&&this.cache.pop(),null!=e.hxSerialize?(this.buf.b+="C",this.serializeString(s.__name__),this.useCache&&this.cache.push(e),e.hxSerialize(this),this.buf.b+="g"):(this.buf.b+="c",this.serializeString(s.__name__),this.useCache&&this.cache.push(e),this.serializeFields(e))}break;case 7:var w=S.e;if(this.useCache){if(this.serializeRef(e))return;this.cache.pop()}this.buf.b+=U.string(this.useEnumIndex?"j":"w"),this.serializeString(w.__ename__),this.useEnumIndex?(this.buf.b+=":",this.buf.b+=U.string(e._hx_index)):(w=e,this.serializeString(b[w.__enum__].__constructs__[w._hx_index])),this.buf.b+=":";var v=k.enumParameters(e);this.buf.b+=U.string(v.length);for(var S=0;S<v.length;){var x=v[S];++S,this.serialize(x)}this.useCache&&this.cache.push(e);break;default:throw Ci.thrown("Cannot serialize "+U.string(e))}},__class__:Ui};var Pi=function(e){var t=this;this.id=setInterval(function(){t.run()},e)};(t["haxe.Timer"]=Pi).__name__="haxe.Timer",Pi.delay=function(e,t){var i=new Pi(t);return i.run=function(){i.stop(),e()},i},Pi.prototype={stop:function(){null!=this.id&&(clearInterval(this.id),this.id=null)},run:function(){},__class__:Pi};function Ri(){}(t["haxe._Unserializer.DefaultResolver"]=Ri).__name__="haxe._Unserializer.DefaultResolver",Ri.prototype={resolveClass:function(e){return t[e]},resolveEnum:function(e){return b[e]},__class__:Ri};var Di=function(e){this.buf=e,this.length=e.length,this.pos=0,this.scache=[],this.cache=[];var t=Di.DEFAULT_RESOLVER;null==t&&(t=new Ri,Di.DEFAULT_RESOLVER=t),this.resolver=t};(t["haxe.Unserializer"]=Di).__name__="haxe.Unserializer",Di.initCodes=function(){for(var e=[],t=0,i=Di.BASE64.length;t<i;){var s=t++;e[Di.BASE64.charCodeAt(s)]=s}return e},Di.run=function(e){return new Di(e).unserialize()},Di.prototype={readDigits:function(){for(var e=0,t=!1,i=this.pos;;){var s=this.buf.charCodeAt(this.pos);if(s!=s)break;if(45!=s){if(s<48||57<s)break;e=10*e+(s-48),this.pos++}else{if(this.pos!=i)break;t=!0,this.pos++}}return t&&(e*=-1),e},readFloat:function(){for(var e=this.pos;;){var t=this.buf.charCodeAt(this.pos);if(t!=t)break;if(!(43<=t&&t<58||101==t||69==t))break;this.pos++}return parseFloat(I.substr(this.buf,e,this.pos-e))},unserializeObject:function(e){for(;;){if(this.pos>=this.length)throw Ci.thrown("Invalid object");if(103==this.buf.charCodeAt(this.pos))break;var t=this.unserialize();if("string"!=typeof t)throw Ci.thrown("Invalid object key");var i=this.unserialize();e[t]=i}this.pos++},unserializeEnum:function(e,t){if(58!=this.buf.charCodeAt(this.pos++))throw Ci.thrown("Invalid enum format");var i=this.readDigits();if(0==i)return k.createEnum(e,t);for(var s=[];0<i--;)s.push(this.unserialize());return k.createEnum(e,t,s)},unserialize:function(){switch(this.buf.charCodeAt(this.pos++)){case 65:var e=this.unserialize();if(null==(_=this.resolver.resolveClass(e)))throw Ci.thrown("Class not found "+e);return _;case 66:e=this.unserialize();if(null==(l=this.resolver.resolveEnum(e)))throw Ci.thrown("Enum not found "+e);return l;case 67:e=this.unserialize();if(null==(_=this.resolver.resolveClass(e)))throw Ci.thrown("Class not found "+e);var t=Object.create(_.prototype);if(this.cache.push(t),t.hxUnserialize(this),103!=this.buf.charCodeAt(this.pos++))throw Ci.thrown("Invalid custom data");return t;case 77:var i=new ji;this.cache.push(i);for(var s=this.buf;104!=this.buf.charCodeAt(this.pos);){var n=this.unserialize();i.set(n,this.unserialize())}return this.pos++,i;case 82:if((p=this.readDigits())<0||p>=this.scache.length)throw Ci.thrown("Invalid string reference");return this.scache[p];case 97:var s=this.buf,r=[];for(this.cache.push(r);;){if(104==(u=this.buf.charCodeAt(this.pos))){this.pos++;break}117==u?(this.pos++,p=this.readDigits(),r[r.length+p-1]=null):r.push(this.unserialize())}return r;case 98:i=new zi;this.cache.push(i);for(s=this.buf;104!=this.buf.charCodeAt(this.pos);){var n=this.unserialize(),a=this.unserialize();i.h[n]=a}return this.pos++,i;case 99:var _,e=this.unserialize();if(null==(_=this.resolver.resolveClass(e)))throw Ci.thrown("Class not found "+e);t=Object.create(_.prototype);return this.cache.push(t),this.unserializeObject(t),t;case 100:return this.readFloat();case 102:return!1;case 105:return this.readDigits();case 106:e=this.unserialize();if(null==(k=this.resolver.resolveEnum(e)))throw Ci.thrown("Enum not found "+e);this.pos++;var o=this.readDigits(),h=k.__constructs__.slice()[o];if(null==h)throw Ci.thrown("Unknown enum index "+e+"@"+o);var l=this.unserializeEnum(k,h);return this.cache.push(l),l;case 107:return NaN;case 108:var c=new Hi;this.cache.push(c);for(s=this.buf;104!=this.buf.charCodeAt(this.pos);)c.add(this.unserialize());return this.pos++,c;case 109:return-1/0;case 110:return null;case 111:t={};return this.cache.push(t),this.unserializeObject(t),t;case 112:return 1/0;case 113:i=new Vi;this.cache.push(i);for(var s=this.buf,u=this.buf.charCodeAt(this.pos++);58==u;){var d=this.readDigits(),a=this.unserialize();i.h[d]=a,u=this.buf.charCodeAt(this.pos++)}if(104!=u)throw Ci.thrown("Invalid IntMap format");return i;case 114:var p;if((p=this.readDigits())<0||p>=this.cache.length)throw Ci.thrown("Invalid reference");return this.cache[p];case 115:var g=this.readDigits(),s=this.buf;if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<g)throw Ci.thrown("Invalid bytes length");var f=Di.CODES;null==f&&(f=Di.initCodes(),Di.CODES=f);for(var y=3&g,m=(d=this.pos)+(g-y),E=new Mi(new ArrayBuffer(3*(g>>2)+(2<=y?y-1:0))),w=0;d<m;){var v=f[s.charCodeAt(d++)],S=f[s.charCodeAt(d++)];E.b[w++]=v<<2|S>>4;var x=f[s.charCodeAt(d++)];E.b[w++]=S<<4|x>>2;var b=f[s.charCodeAt(d++)];E.b[w++]=x<<6|b}return 2<=y&&(v=f[s.charCodeAt(d++)],S=f[s.charCodeAt(d++)],E.b[w++]=v<<2|S>>4,3==y&&(x=f[s.charCodeAt(d++)],E.b[w++]=S<<4|x>>2)),this.pos+=g,this.cache.push(E),E;case 116:return!0;case 118:var T;return 48<=this.buf.charCodeAt(this.pos)&&this.buf.charCodeAt(this.pos)<=57&&48<=this.buf.charCodeAt(this.pos+1)&&this.buf.charCodeAt(this.pos+1)<=57&&48<=this.buf.charCodeAt(this.pos+2)&&this.buf.charCodeAt(this.pos+2)<=57&&48<=this.buf.charCodeAt(this.pos+3)&&this.buf.charCodeAt(this.pos+3)<=57&&45==this.buf.charCodeAt(this.pos+4)?(T=I.strDate(I.substr(this.buf,this.pos,19)),this.pos+=19):T=new Date(this.readFloat()),this.cache.push(T),T;case 119:var k,e=this.unserialize();if(null==(k=this.resolver.resolveEnum(e)))throw Ci.thrown("Enum not found "+e);l=this.unserializeEnum(k,this.unserialize());return this.cache.push(l),l;case 120:throw Ci.thrown(this.unserialize());case 121:g=this.readDigits();if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<g)throw Ci.thrown("Invalid string length");n=I.substr(this.buf,this.pos,g);return this.pos+=g,n=decodeURIComponent(n.split("+").join(" ")),this.scache.push(n),n;case 122:return 0}throw this.pos--,Ci.thrown("Invalid char "+this.buf.charAt(this.pos)+" at position "+this.pos)},__class__:Di};var Ni=function(e,t,i){Ci.call(this,String(e),t,i),this.value=e};(t["haxe.ValueException"]=Ni).__name__="haxe.ValueException",Ni.__super__=Ci,Ni.prototype=e(Ci.prototype,{unwrap:function(){return this.value},__class__:Ni});var Mi=function(e){this.length=e.byteLength,this.b=new Uint8Array(e),(this.b.bufferValue=e).hxBytes=this,e.bytes=this.b};(t["haxe.io.Bytes"]=Mi).__name__="haxe.io.Bytes",Mi.ofString=function(e,t){if(t==Bi.RawNative){for(var i=new Uint8Array(e.length<<1),s=0,n=e.length;s<n;){var r=s++,a=e.charCodeAt(r);i[r<<1]=255&a,i[r<<1|1]=a>>8}return new Mi(i.buffer)}for(var _=[],r=0;r<e.length;){55296<=(a=e.charCodeAt(r++))&&a<=56319&&(a=a-55232<<10|1023&e.charCodeAt(r++)),a<=127?_.push(a):(a<=2047?_.push(192|a>>6):(a<=65535?_.push(224|a>>12):(_.push(240|a>>18),_.push(128|a>>12&63)),_.push(128|a>>6&63)),_.push(128|63&a))}return new Mi(new Uint8Array(_).buffer)},Mi.ofData=function(e){var t=e.hxBytes;return null!=t?t:new Mi(e)},Mi.prototype={getString:function(e,t,i){if(e<0||t<0||e+t>this.length)throw Ci.thrown(Xi.OutsideBounds);null==i&&(i=Bi.UTF8);var s="",n=this.b,r=e,a=e+t;switch(i._hx_index){case 0:for(var _,o,h;r<a;){if((l=n[r++])<128){if(0==l)break;s+=String.fromCodePoint(l)}else{l<224?(_=(63&l)<<6|127&n[r++],s+=String.fromCodePoint(_)):l<240?(o=(31&l)<<12|(127&n[r++])<<6|127&n[r++],s+=String.fromCodePoint(o)):(h=(15&l)<<18|(127&n[r++])<<12|(127&n[r++])<<6|127&n[r++],s+=String.fromCodePoint(h))}}break;case 1:for(;r<a;){var l=n[r++]|n[r++]<<8;s+=String.fromCodePoint(l)}}return s},toString:function(){return this.getString(0,this.length)},__class__:Mi};var Bi=b["haxe.io.Encoding"]={__ename__:"haxe.io.Encoding",__constructs__:["UTF8","RawNative"],UTF8:{_hx_index:0,__enum__:"haxe.io.Encoding",toString:i},RawNative:{_hx_index:1,__enum__:"haxe.io.Encoding",toString:i}},Li=function(){};(t["haxe.crypto.Base64"]=Li).__name__="haxe.crypto.Base64",Li.decode=function(e,t){if(null==t&&(t=!0),t)for(;61==I.cca(e,e.length-1);)e=I.substr(e,0,-1);return new Oi(Li.BYTES).decodeBytes(Mi.ofString(e))};var Oi=function(e){for(var t=e.length,i=1;1<<i<t;)++i;if(8<i||t!=1<<i)throw Ci.thrown("BaseCode : base length must be a power of two.");this.base=e,this.nbits=i};(t["haxe.crypto.BaseCode"]=Oi).__name__="haxe.crypto.BaseCode",Oi.prototype={initTable:function(){for(var e=[],t=0;t<256;){e[s=t++]=-1}for(var t=0,i=this.base.length;t<i;){var s=t++;e[this.base.b[s]]=s}this.tbl=e},decodeBytes:function(e){var t=this.nbits;this.base;null==this.tbl&&this.initTable();for(var i=this.tbl,s=e.length*t>>3,n=new Mi(new ArrayBuffer(s)),r=0,a=0,_=0,o=0;o<s;){for(;a<8;){a+=t,r<<=t;var h=i[e.b[_++]];if(-1==h)throw Ci.thrown("BaseCode : invalid encoded char");r|=h}a-=8,n.b[o++]=r>>a&255}return n},__class__:Oi};var Fi=function(e,t){this.elt=e,this.next=t};(t["haxe.ds.GenericCell"]=Fi).__name__="haxe.ds.GenericCell",Fi.prototype={__class__:Fi};var Gi=function(){};(t["haxe.ds.GenericStack"]=Gi).__name__="haxe.ds.GenericStack",Gi.prototype={remove:function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){null==t?this.head=i.next:t.next=i.next;break}i=(t=i).next}return null!=i},iterator:function(){var t=this.head;return{hasNext:function(){return null!=t},next:function(){var e=t;return t=e.next,e.elt}}},__class__:Gi};var Vi=function(){this.h={}};(t["haxe.ds.IntMap"]=Vi).__name__="haxe.ds.IntMap",Vi.__interfaces__=[ki],Vi.prototype={keys:function(){var e=[];for(var t in this.h)this.h.hasOwnProperty(t)&&e.push(0|t);return new Qi(e)},__class__:Vi};var Hi=function(){this.length=0};(t["haxe.ds.List"]=Hi).__name__="haxe.ds.List",Hi.prototype={add:function(e){var t=new Yi(e,null);null==this.h?this.h=t:this.q.next=t,this.q=t,this.length++},push:function(e){var t=new Yi(e,this.h);this.h=t,null==this.q&&(this.q=t),this.length++},remove:function(e){for(var t=null,i=this.h;null!=i;){if(i.item==e)return null==t?this.h=i.next:t.next=i.next,this.q==i&&(this.q=t),this.length--,!0;i=(t=i).next}return!1},__class__:Hi};var Yi=function(e,t){this.item=e,this.next=t};(t["haxe.ds._List.ListNode"]=Yi).__name__="haxe.ds._List.ListNode",Yi.prototype={__class__:Yi};var ji=function(){this.h={__keys__:{}}};(t["haxe.ds.ObjectMap"]=ji).__name__="haxe.ds.ObjectMap",ji.__interfaces__=[ki],ji.prototype={set:function(e,t){var i=e.__id__;null==i&&(i=e.__id__=p.$haxeUID++),this.h[i]=t,this.h.__keys__[i]=e},keys:function(){var e=[];for(var t in this.h.__keys__)this.h.hasOwnProperty(t)&&e.push(this.h.__keys__[t]);return new Qi(e)},__class__:ji};var zi=function(){this.h=Object.create(null)};(t["haxe.ds.StringMap"]=zi).__name__="haxe.ds.StringMap",zi.__interfaces__=[ki],zi.keysIterator=function(e){var t=Object.keys(e),i=t.length,s=0;return{hasNext:function(){return s<i},next:function(){return t[(s+=1)-1]}}},zi.prototype={__class__:zi};function Wi(e){this.url=e,this.headers=[],this.params=[],this.emptyOnData=ms(this,this.onData)}(t["haxe.http.HttpBase"]=Wi).__name__="haxe.http.HttpBase",Wi.prototype={onData:function(e){},onBytes:function(e){},onError:function(e){},onStatus:function(e){},hasOnData:function(){return!T.compareMethods(ms(this,this.onData),this.emptyOnData)},success:function(e){this.responseBytes=e,this.responseAsString=null,this.hasOnData()&&this.onData(this.get_responseData()),this.onBytes(this.responseBytes)},get_responseData:function(){return null==this.responseAsString&&null!=this.responseBytes&&(this.responseAsString=this.responseBytes.getString(0,this.responseBytes.length,Bi.UTF8)),this.responseAsString},__class__:Wi,__properties__:{get_responseData:"get_responseData"}};var Ki=function(e){this.async=!0,this.withCredentials=!1,Wi.call(this,e)};(t["haxe.http.HttpJs"]=Ki).__name__="haxe.http.HttpJs",Ki.__super__=Wi,Ki.prototype=e(Wi.prototype,{request:function(e){var n=this;this.responseAsString=null,this.responseBytes=null;function t(e){if(4==r.readyState){var t,i;try{t=r.status}catch(e){t=null}if(0==t&&"undefined"!=typeof window&&null!=p.location&&(i=p.location.protocol.toLowerCase(),new g("^(?:about|app|app-storage|.+-extension|file|res|widget):$","").match(i)&&(t=null!=r.response?200:404)),null==t&&(t=null),null!=t&&n.onStatus(t),null!=t&&200<=t&&t<400)n.req=null,n.success(Mi.ofData(r.response));else if(null==t||0==t&&null==r.response)n.req=null,n.onError("Failed to connect or resolve host");else if(null==t){var s=(n.req=null)!=r.response?Mi.ofData(r.response):null;n.responseBytes=s,n.onError("Http Error #"+r.status)}else switch(t){case 12007:n.req=null,n.onError("Unknown host");break;case 12029:n.req=null,n.onError("Failed to connect to host");break;default:s=(n.req=null)!=r.response?Mi.ofData(r.response):null;n.responseBytes=s,n.onError("Http Error #"+r.status)}}}var r=this.req=es.createXMLHttpRequest();this.async&&(r.onreadystatechange=t);var i,s,a=this.postBytes;if(null!=(i=null==(_=this.postData)?null==a?null:new Blob([a.b.bufferValue]):null==a?_:null))e=!0;else for(var a=0,_=this.params;a<_.length;){var o=_[a];++a,i=null==i?"":(null==i?"null":U.string(i))+"&";var h=o.name,l=(null==i?"null":U.string(i))+encodeURIComponent(h)+"=",c=o.value;i=l+encodeURIComponent(c)}try{e?r.open("POST",this.url,this.async):null!=i?(s=this.url.split("?").length<=1,r.open("GET",this.url+(s?"?":"&")+(null==i?"null":U.string(i)),this.async),i=null):r.open("GET",this.url,this.async),r.responseType="arraybuffer"}catch(a){var u=Ci.caught(a).unwrap();return this.req=null,void this.onError(u.toString())}r.withCredentials=this.withCredentials,!f.exists(this.headers,function(e){return"Content-Type"==e.name})&&e&&null==this.postData&&r.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(a=0,_=this.headers;a<_.length;){var d=_[a];++a,r.setRequestHeader(d.name,d.value)}r.send(i),this.async||t()},__class__:Ki});var Xi=b["haxe.io.Error"]={__ename__:"haxe.io.Error",__constructs__:["Blocked","Overflow","OutsideBounds","Custom"],Blocked:{_hx_index:0,__enum__:"haxe.io.Error",toString:i},Overflow:{_hx_index:1,__enum__:"haxe.io.Error",toString:i},OutsideBounds:{_hx_index:2,__enum__:"haxe.io.Error",toString:i},Custom:((l=function(e){return{_hx_index:3,e:e,__enum__:"haxe.io.Error",toString:i}}).__params__=["e"],l)},Qi=function(e){this.current=0,this.array=e};(t["haxe.iterators.ArrayIterator"]=Qi).__name__="haxe.iterators.ArrayIterator",Qi.prototype={hasNext:function(){return this.current<this.array.length},next:function(){return this.array[this.current++]},__class__:Qi};function Ji(e,t,i){this.xml=t,this.message=e,this.position=i,this.lineNumber=1;for(var s=this.positionAtLine=0,n=i;s<n;){var r=s++,a=t.charCodeAt(r);10==a?(this.lineNumber++,this.positionAtLine=0):13!=a&&this.positionAtLine++}}(t["haxe.xml.XmlParserException"]=Ji).__name__="haxe.xml.XmlParserException",Ji.prototype={toString:function(){return $i.getClass(this).__name__+": "+this.message+" at line "+this.lineNumber+" char "+this.positionAtLine},__class__:Ji};var Zi=function(){};(t["haxe.xml.Parser"]=Zi).__name__="haxe.xml.Parser",Zi.parse=function(e,t){null==t&&(t=!1);var i=R.createDocument();return Zi.doParse(e,t,0,i),i},Zi.doParse=function(e,t,i,s){null==i&&(i=0);for(var n,r,a,_,o,h,l,c,u,d=null,p=1,g=1,f=null,y=0,m=0,E=0,w=e.charCodeAt(i),v=new P,S=1,x=-1;w==w;){switch(p){case 0:switch(w){case 9:case 10:case 13:case 32:break;default:p=g;continue}break;case 1:if(60!=w){y=i,p=13;continue}p=0,g=2;break;case 2:switch(w){case 33:if(91==e.charCodeAt(i+1)){if("CDATA["!=I.substr(e,i+=2,6).toUpperCase())throw Ci.thrown(new Ji("Expected <![CDATA[",e,i));p=17,y=(i+=5)+1}else if(68==e.charCodeAt(i+1)||100==e.charCodeAt(i+1)){if("OCTYPE"!=I.substr(e,i+2,6).toUpperCase())throw Ci.thrown(new Ji("Expected <!DOCTYPE",e,i));p=16,y=(i+=8)+1}else{if(45!=e.charCodeAt(i+1)||45!=e.charCodeAt(i+2))throw Ci.thrown(new Ji("Expected \x3c!--",e,i));p=15,y=(i+=2)+1}break;case 47:if(null==s)throw Ci.thrown(new Ji("Expected node name",e,i));y=i+1,p=0,g=10;break;case 63:p=14,y=i;break;default:p=3,y=i;continue}break;case 3:if(97<=w&&w<=122||65<=w&&w<=90||48<=w&&w<=57||58==w||46==w||95==w||45==w)break;if(i==y)throw Ci.thrown(new Ji("Expected node name",e,i));d=R.createElement(I.substr(e,y,i-y)),s.addChild(d),++m,p=0,g=4;continue;case 4:switch(w){case 47:p=11;break;case 62:p=9;break;default:p=5,y=i;continue}break;case 5:if(97<=w&&w<=122||65<=w&&w<=90||48<=w&&w<=57||58==w||46==w||95==w||45==w)break;if(y==i)throw Ci.thrown(new Ji("Expected attribute name",e,i));f=I.substr(e,y,i-y);if(d.exists(f))throw Ci.thrown(new Ji("Duplicate attribute ["+f+"]",e,i));p=0,g=6;continue;case 6:if(61!=w)throw Ci.thrown(new Ji("Expected =",e,i));p=0,g=7;break;case 7:switch(w){case 34:case 39:v=new P,p=8,y=i+1,x=w;break;default:throw Ci.thrown(new Ji('Expected "',e,i))}break;case 8:switch(w){case 38:var b=i-y;v.b+=I.substr(e,y,null==b?null:b),p=18,S=8,y=i+1;break;case 60:case 62:if(t)throw Ci.thrown(new Ji("Invalid unescaped "+String.fromCodePoint(w)+" in attribute value",e,i));w==x&&(n=i-y,v.b+=I.substr(e,y,null==n?null:n),r=v.b,v=new P,d.set(f,r),p=0,g=4);break;default:w==x&&(a=i-y,v.b+=I.substr(e,y,null==a?null:a),_=v.b,v=new P,d.set(f,_),p=0,g=4)}break;case 9:y=i=Zi.doParse(e,t,i,d),p=1;break;case 10:if(97<=w&&w<=122||65<=w&&w<=90||48<=w&&w<=57||58==w||46==w||95==w||45==w)break;if(y==i)throw Ci.thrown(new Ji("Expected node name",e,i));var T=I.substr(e,y,i-y);if(null==s||0!=s.nodeType)throw Ci.thrown(new Ji("Unexpected </"+T+">, tag is not open",e,i));if(s.nodeType!=R.Element)throw Ci.thrown("Bad node type, expected Element but found "+(null==s.nodeType?"null":D.toString(s.nodeType)));if(T!=s.nodeName){if(s.nodeType!=R.Element)throw Ci.thrown("Bad node type, expected Element but found "+(null==s.nodeType?"null":D.toString(s.nodeType)));throw Ci.thrown(new Ji("Expected </"+s.nodeName+">",e,i))}p=0,g=12;continue;case 11:if(62!=w)throw Ci.thrown(new Ji("Expected >",e,i));p=1;break;case 12:if(62==w)return 0==m&&s.addChild(R.createPCData("")),i;throw Ci.thrown(new Ji("Expected >",e,i));case 13:60==w?(o=i-y,v.b+=I.substr(e,y,null==o?null:o),h=R.createPCData(v.b),v=new P,s.addChild(h),++m,p=0,g=2):38==w&&(l=i-y,v.b+=I.substr(e,y,null==l?null:l),p=18,S=13,y=i+1);break;case 14:63==w&&62==e.charCodeAt(i+1)&&(c=I.substr(e,y+1,++i-y-2),s.addChild(R.createProcessingInstruction(c)),++m,p=1);break;case 15:45==w&&45==e.charCodeAt(i+1)&&62==e.charCodeAt(i+2)&&(s.addChild(R.createComment(I.substr(e,y,i-y))),++m,i+=2,p=1);break;case 16:91==w?++E:93==w?--E:62==w&&0==E&&(s.addChild(R.createDocType(I.substr(e,y,i-y))),++m,p=1);break;case 17:93==w&&93==e.charCodeAt(i+1)&&62==e.charCodeAt(i+2)&&(u=R.createCData(I.substr(e,y,i-y)),s.addChild(u),++m,i+=2,p=1);break;case 18:if(59==w){var k=I.substr(e,y,i-y);if(35==k.charCodeAt(0)){var C=120==k.charCodeAt(1)?U.parseInt("0"+I.substr(k,1,k.length-1)):U.parseInt(I.substr(k,1,k.length-1));v.b+=String.fromCodePoint(C)}else if(Object.prototype.hasOwnProperty.call(Zi.escapes.h,k))v.b+=U.string(Zi.escapes.h[k]);else{if(t)throw Ci.thrown(new Ji("Undefined entity: "+k,e,i));v.b+=U.string("&"+k+";")}y=i+1,p=S}else if(!(97<=w&&w<=122||65<=w&&w<=90||48<=w&&w<=57||58==w||46==w||95==w||45==w)&&35!=w){if(t)throw Ci.thrown(new Ji("Invalid character in entity: "+String.fromCodePoint(w),e,i));v.b+=String.fromCodePoint(38);var A=i-y;v.b+=I.substr(e,y,null==A?null:A),y=--i+1,p=S}}w=e.charCodeAt(++i)}if(1==p&&(y=i,p=13),13==p){if(0!=s.nodeType)return i==y&&0!=m||(b=i-y,v.b+=I.substr(e,y,null==b?null:b),s.addChild(R.createPCData(v.b)),++m),i;if(s.nodeType!=R.Element)throw Ci.thrown("Bad node type, expected Element but found "+(null==s.nodeType?"null":D.toString(s.nodeType)));throw Ci.thrown(new Ji("Unclosed node <"+s.nodeName+">",e,i))}if(t||18!=p||13!=S)throw Ci.thrown(new Ji("Unexpected end",e,i));v.b+=String.fromCodePoint(38);b=i-y;return v.b+=I.substr(e,y,null==b?null:b),s.addChild(R.createPCData(v.b)),++m,i};var qi=function(e){this.output=new P,this.pretty=e};(t["haxe.xml.Printer"]=qi).__name__="haxe.xml.Printer",qi.print=function(e,t){null==t&&(t=!1);var i=new qi(t);return i.writeNode(e,""),i.output.b},qi.prototype={writeNode:function(e,t){switch(e.nodeType){case 0:if(this.output.b+=U.string(t+"<"),e.nodeType!=R.Element)throw Ci.thrown("Bad node type, expected Element but found "+(null==e.nodeType?"null":D.toString(e.nodeType)));this.output.b+=U.string(e.nodeName);for(var i=e.attributes();i.hasNext();){var s=i.next();this.output.b+=U.string(" "+s+'="');var n=c.htmlEscape(e.get(s),!0);this.output.b+=U.string(n),this.output.b+='"'}if(this.hasChildren(e)){if(this.output.b+=">",this.pretty&&(this.output.b+="\n"),e.nodeType!=R.Document&&e.nodeType!=R.Element)throw Ci.thrown("Bad node type, expected Element or Document but found "+(null==e.nodeType?"null":D.toString(e.nodeType)));for(var r=0,a=e.children;r<a.length;){var _=a[r++];this.writeNode(_,this.pretty?t+"\t":t)}if(this.output.b+=U.string(t+"</"),e.nodeType!=R.Element)throw Ci.thrown("Bad node type, expected Element but found "+(null==e.nodeType?"null":D.toString(e.nodeType)));this.output.b+=U.string(e.nodeName),this.output.b+=">",this.pretty&&(this.output.b+="\n")}else this.output.b+="/>",this.pretty&&(this.output.b+="\n");break;case 1:if(e.nodeType==R.Document||e.nodeType==R.Element)throw Ci.thrown("Bad node type, unexpected "+(null==e.nodeType?"null":D.toString(e.nodeType)));var o=e.nodeValue;0!=o.length&&(n=t+c.htmlEscape(o),this.output.b+=U.string(n),this.pretty&&(this.output.b+="\n"));break;case 2:if(this.output.b+=U.string(t+"<![CDATA["),e.nodeType==R.Document||e.nodeType==R.Element)throw Ci.thrown("Bad node type, unexpected "+(null==e.nodeType?"null":D.toString(e.nodeType)));this.output.b+=U.string(e.nodeValue),this.output.b+="]]>",this.pretty&&(this.output.b+="\n");break;case 3:if(e.nodeType==R.Document||e.nodeType==R.Element)throw Ci.thrown("Bad node type, unexpected "+(null==e.nodeType?"null":D.toString(e.nodeType)));var h=e.nodeValue,l=new RegExp("[\n\r\t]+","g".split("u").join(""));h="\x3c!--"+(h=h.replace(l,""))+"--\x3e",this.output.b+=null==t?"null":""+t;n=c.trim(h);this.output.b+=U.string(n),this.pretty&&(this.output.b+="\n");break;case 4:if(e.nodeType==R.Document||e.nodeType==R.Element)throw Ci.thrown("Bad node type, unexpected "+(null==e.nodeType?"null":D.toString(e.nodeType)));this.output.b+=U.string("<!DOCTYPE "+e.nodeValue+">"),this.pretty&&(this.output.b+="\n");break;case 5:if(e.nodeType==R.Document||e.nodeType==R.Element)throw Ci.thrown("Bad node type, unexpected "+(null==e.nodeType?"null":D.toString(e.nodeType)));this.output.b+=U.string("<?"+e.nodeValue+"?>"),this.pretty&&(this.output.b+="\n");break;case 6:if(e.nodeType!=R.Document&&e.nodeType!=R.Element)throw Ci.thrown("Bad node type, expected Element or Document but found "+(null==e.nodeType?"null":D.toString(e.nodeType)));for(r=0,a=e.children;r<a.length;){_=a[r++];this.writeNode(_,t)}}},hasChildren:function(e){if(e.nodeType!=R.Document&&e.nodeType!=R.Element)throw Ci.thrown("Bad node type, expected Element or Document but found "+(null==e.nodeType?"null":D.toString(e.nodeType)));for(var t=0,i=e.children;t<i.length;){var s=i[t++];switch(s.nodeType){case 0:case 1:return!0;case 2:case 3:if(s.nodeType==R.Document||s.nodeType==R.Element)throw Ci.thrown("Bad node type, unexpected "+(null==s.nodeType?"null":D.toString(s.nodeType)));if(0!=c.ltrim(s.nodeValue).length)return!0}}return!1},__class__:qi};var $i=function(){};(t["js.Boot"]=$i).__name__="js.Boot",$i.getClass=function(e){if(null==e)return null;if(e instanceof Array)return Array;var t=e.__class__;if(null!=t)return t;var i=$i.__nativeClassName(e);return null!=i?$i.__resolveNativeClass(i):null},$i.__string_rec=function(n,r){if(null==n)return"null";if(5<=r.length)return"<...>";var e,t=typeof n;switch("function"==t&&(n.__name__||n.__ename__)&&(t="object"),t){case"function":return"<function>";case"object":if(n.__enum__){var i=b[n.__enum__],s=i.__constructs__[n._hx_index],a=i[s];return a.__params__?(r+="\t",s+"("+function(){for(var e=[],t=0,i=a.__params__;t<i.length;){var s=i[t];t+=1,e.push($i.__string_rec(n[s],r))}return e}().join(",")+")"):s}if(n instanceof Array){var _="[";r+="\t";for(var o=0,h=n.length;o<h;){var l=o++;_+=(0<l?",":"")+$i.__string_rec(n[l],r)}return _+="]"}try{e=n.toString}catch(o){return"???"}if(null!=e&&e!=Object.toString&&"function"==typeof e){var c=n.toString();if("[object Object]"!=c)return c}_="{\n";r+="\t";var u=null!=n.hasOwnProperty,d=null;for(d in n)u&&!n.hasOwnProperty(d)||"prototype"!=d&&"__class__"!=d&&"__super__"!=d&&"__interfaces__"!=d&&"__properties__"!=d&&(2!=_.length&&(_+=", \n"),_+=r+d+" : "+$i.__string_rec(n[d],r));return _+="\n"+(r=r.substring(1))+"}";case"string":return n;default:return String(n)}},$i.__interfLoop=function(e,t){if(null==e)return!1;if(e==t)return!0;var i=e.__interfaces__;if(null!=i)for(var s=0,n=i.length;s<n;){var r=i[s++];if(r==t||$i.__interfLoop(r,t))return!0}return $i.__interfLoop(e.__super__,t)},$i.__instanceof=function(e,t){if(null==t)return!1;switch(t){case Array:return e instanceof Array;case xs:return"boolean"==typeof e;case vs:return null!=e;case Ss:return"number"==typeof e;case ws:return"number"==typeof e&&(0|e)===e;case String:return"string"==typeof e;default:if(null==e)return!1;if("function"==typeof t){if($i.__downcastCheck(e,t))return!0}else if("object"==typeof t&&$i.__isNativeObj(t)&&e instanceof t)return!0;return t==bs&&null!=e.__name__?!0:t==Ts&&null!=e.__ename__||null!=e.__enum__&&b[e.__enum__]==t}},$i.__downcastCheck=function(e,t){return e instanceof t||!!t.__isInterface__&&$i.__interfLoop($i.getClass(e),t)},$i.__implements=function(e,t){return $i.__interfLoop($i.getClass(e),t)},$i.__cast=function(e,t){if(null==e||$i.__instanceof(e,t))return e;throw Ci.thrown("Cannot cast "+U.string(e)+" to "+U.string(t))},$i.__nativeClassName=function(e){var t=$i.__toStr.call(e).slice(8,-1);return"Object"==t||"Function"==t||"Math"==t||"JSON"==t?null:t},$i.__isNativeObj=function(e){return null!=$i.__nativeClassName(e)},$i.__resolveNativeClass=function(e){return p[e]};var es=function(){};(t["js.Browser"]=es).__name__="js.Browser",es.getLocalStorage=function(){try{var e,t=window.localStorage;return t.getItem(""),0==t.length&&(e="_hx_"+Math.random(),t.setItem(e,e),t.removeItem(e)),t}catch(e){return null}},es.getSessionStorage=function(){try{var e,t=window.sessionStorage;return t.getItem(""),0==t.length&&(e="_hx_"+Math.random(),t.setItem(e,e),t.removeItem(e)),t}catch(e){return null}},es.createXMLHttpRequest=function(){if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)return new ActiveXObject("Microsoft.XMLHTTP");throw Ci.thrown("Unable to create XMLHttpRequest object.")};var ts=function(){};(t["js.Cookie"]=ts).__name__="js.Cookie",ts.set=function(e,t,i,s,n){var r=e+"="+encodeURIComponent(t);null!=i&&(r+=";expires="+new Date((new Date).getTime()+1e3*i).toGMTString()),null!=s&&(r+=";path="+s),null!=n&&(r+=";domain="+n),window.document.cookie=r},ts.all=function(){for(var e=new zi,t=window.document.cookie.split(";"),i=0;i<t.length;){var s=t[i];++i;var n,r=(s=c.ltrim(s)).split("=");r.length<2||(n=decodeURIComponent(r[1].split("+").join(" ")),e.h[r[0]]=n)}return e},ts.get=function(e){return ts.all().h[e]},ts.exists=function(e){var t=ts.all();return Object.prototype.hasOwnProperty.call(t.h,e)},ts.remove=function(e,t,i){ts.set(e,"",-10,t,i)};function is(){}var ss=b["tweezer.EEase"]={__ename__:"tweezer.EEase",__constructs__:["EASE_IN","EASE_IN_OUT","EASE_OUT","EASE_OUT_IN"],EASE_IN:{_hx_index:0,__enum__:"tweezer.EEase",toString:i},EASE_IN_OUT:{_hx_index:1,__enum__:"tweezer.EEase",toString:i},EASE_OUT:{_hx_index:2,__enum__:"tweezer.EEase",toString:i},EASE_OUT_IN:{_hx_index:3,__enum__:"tweezer.EEase",toString:i}},ns=b["tweezer.ETween"]={__ename__:"tweezer.ETween",__constructs__:["BACK","BOUNCE","CIRCULAR","CUBIC","ELASTIC","EXPONENTIAL","LINEAR","QUADRATIC","QUARTIC","QUINTIC","SINE"],BACK:((l=function(e){return{_hx_index:0,p_overshoot:e,__enum__:"tweezer.ETween",toString:i}}).__params__=["p_overshoot"],l),BOUNCE:{_hx_index:1,__enum__:"tweezer.ETween",toString:i},CIRCULAR:{_hx_index:2,__enum__:"tweezer.ETween",toString:i},CUBIC:{_hx_index:3,__enum__:"tweezer.ETween",toString:i},ELASTIC:((l=function(e,t){return{_hx_index:4,p_period:e,p_amplitude:t,__enum__:"tweezer.ETween",toString:i}}).__params__=["p_period","p_amplitude"],l),EXPONENTIAL:{_hx_index:5,__enum__:"tweezer.ETween",toString:i},LINEAR:{_hx_index:6,__enum__:"tweezer.ETween",toString:i},QUADRATIC:{_hx_index:7,__enum__:"tweezer.ETween",toString:i},QUARTIC:{_hx_index:8,__enum__:"tweezer.ETween",toString:i},QUINTIC:{_hx_index:9,__enum__:"tweezer.ETween",toString:i},SINE:{_hx_index:10,__enum__:"tweezer.ETween",toString:i}};(t["tweezer.TweenFactory"]=is).__name__="tweezer.TweenFactory",is.createTweenFunction=function(t,i,s,e,n){switch(null==e&&(e=ss.EASE_IN),null==n&&(n=ns.LINEAR),n._hx_index){case 0:var r=n.p_overshoot;switch(null==r&&(r=1.70158),e._hx_index){case 0:return function(e){return as.easeIn(e,t,i,s,r)};case 1:return function(e){return as.easeInOut(e,t,i,s,r)};case 2:return function(e){return as.easeOut(e,t,i,s,r)};case 3:return function(e){return as.easeOutIn(e,t,i,s,r)}}break;case 1:switch(e._hx_index){case 0:return function(e){return _s.easeIn(e,t,i,s)};case 1:return function(e){return _s.easeInOut(e,t,i,s)};case 2:return function(e){return _s.easeOut(e,t,i,s)};case 3:return function(e){return _s.easeOutIn(e,t,i,s)}}break;case 2:switch(e._hx_index){case 0:return function(e){return os.easeIn(e,t,i,s)};case 1:return function(e){return os.easeInOut(e,t,i,s)};case 2:return function(e){return os.easeOut(e,t,i,s)};case 3:return function(e){return os.easeOutIn(e,t,i,s)}}break;case 3:switch(e._hx_index){case 0:return function(e){return hs.easeIn(e,t,i,s)};case 1:return function(e){return hs.easeInOut(e,t,i,s)};case 2:return function(e){return hs.easeOut(e,t,i,s)};case 3:return function(e){return hs.easeOutIn(e,t,i,s)}}break;case 4:var a=n.p_amplitude,_=n.p_period;switch(null==_&&(_=.3*s*(e==ss.EASE_IN_OUT?1.5:1)),null==a&&(a=0),e._hx_index){case 0:return function(e){return ls.easeIn(e,t,i,s,_,a)};case 1:return function(e){return ls.easeInOut(e,t,i,s,_,a)};case 2:return function(e){return ls.easeOut(e,t,i,s,_,a)};case 3:return function(e){return ls.easeOutIn(e,t,i,s,_,a)}}break;case 5:switch(e._hx_index){case 0:return function(e){return cs.easeIn(e,t,i,s)};case 1:return function(e){return cs.easeInOut(e,t,i,s)};case 2:return function(e){return cs.easeOut(e,t,i,s)};case 3:return function(e){return cs.easeOutIn(e,t,i,s)}}break;case 6:return function(e){return us.ease(e,t,i,s)};case 7:switch(e._hx_index){case 0:return function(e){return ds.easeIn(e,t,i,s)};case 1:return function(e){return ds.easeInOut(e,t,i,s)};case 2:return function(e){return ds.easeOut(e,t,i,s)};case 3:return function(e){return ds.easeOutIn(e,t,i,s)}}break;case 8:switch(e._hx_index){case 0:return function(e){return ps.easeIn(e,t,i,s)};case 1:return function(e){return ps.easeInOut(e,t,i,s)};case 2:return function(e){return ps.easeOut(e,t,i,s)};case 3:return function(e){return ps.easeOutIn(e,t,i,s)}}break;case 9:switch(e._hx_index){case 0:return function(e){return gs.easeIn(e,t,i,s)};case 1:return function(e){return gs.easeInOut(e,t,i,s)};case 2:return function(e){return gs.easeOut(e,t,i,s)};case 3:return function(e){return gs.easeOutIn(e,t,i,s)}}break;case 10:switch(e._hx_index){case 0:return function(e){return fs.easeIn(e,t,i,s)};case 1:return function(e){return fs.easeInOut(e,t,i,s)};case 2:return function(e){return fs.easeOut(e,t,i,s)};case 3:return function(e){return fs.easeOutIn(e,t,i,s)}}}};var rs=function(e,t,i,s,n,r,a,_,o,h,l){null==a&&(a=0),null==r&&(r=1e3),null==n&&(n=0),this._updateCallback=t,this._startValue=i,this._endValue=s,this._startDelay=n,this._duration=r,this._endDelay=a,this._easeType=_,this._tweenType=o,this._completeCallback=h,this._isSnap=l,m.call(this,e),this._updater(),this._updates=0};(t["tweezer.Tweezer"]=rs).__name__="tweezer.Tweezer",rs.__super__=m,rs.prototype=e(m.prototype,{_init:function(){m.prototype._init.call(this),this._tweenFunction=is.createTweenFunction(this._startValue,this._endValue-this._startValue,this._duration,this._easeType,this._tweenType)},_updater:function(e){var t;null==e&&(e=0),m.prototype._updater.call(this,e),null!=this._updateCallback&&(t=this._tweenFunction(Math.min(Math.max(0,this._age-this._startDelay),this._duration)),this._updateCallback(this._isSnap?Math.round(t):t)),this._age>=this._startDelay+this._duration+this._endDelay&&(null!=this._completeCallback&&this._completeCallback(),this.isDisposed||(this.isDisposed=!0,this.set_isActive(!1),this._disposer()))},__class__:rs});var as=function(){};(t["tweezer.tweens.Back"]=as).__name__="tweezer.tweens.Back",as.easeIn=function(e,t,i,s,n){return i*(e/=s)*e*((n+1)*e-n)+t},as.easeOut=function(e,t,i,s,n){return i*((e=e/s-1)*e*((n+1)*e+n)+1)+t},as.easeInOut=function(e,t,i,s,n){return(e/=s/2)<1?i/2*(e*e*((1+(n*=1.525))*e-n))+t:i/2*((e-=2)*e*((1+(n*=1.525))*e+n)+2)+t},as.easeOutIn=function(e,t,i,s,n){return e<s/2?as.easeOut(2*e,t,i/2,s,n):as.easeIn(2*e-s,t+i/2,i/2,s,n)};var _s=function(){};(t["tweezer.tweens.Bounce"]=_s).__name__="tweezer.tweens.Bounce",_s.easeIn=function(e,t,i,s){return i-_s.easeOut(s-e,0,i,s)+t},_s.easeOut=function(e,t,i,s){return(e/=s)<.36363636363636365?i*(7.5625*e*e)+t:e<.7272727272727273?i*(7.5625*(e-=.5454545454545454)*e+.75)+t:e<.9090909090909091?i*(7.5625*(e-=.8181818181818182)*e+.9375)+t:i*(7.5625*(e-=.9545454545454546)*e+.984375)+t},_s.easeInOut=function(e,t,i,s){return e<s/2?.5*_s.easeIn(2*e,0,i,s)+t:.5*_s.easeOut(2*e-s,0,i,s)+.5*i+t},_s.easeOutIn=function(e,t,i,s){return e<s/2?_s.easeOut(2*e,t,i/2,s):_s.easeIn(2*e-s,t+i/2,i/2,s)};var os=function(){};(t["tweezer.tweens.Circular"]=os).__name__="tweezer.tweens.Circular",os.easeIn=function(e,t,i,s){return-i*(Math.sqrt(1-(e/=s)*e)-1)+t},os.easeOut=function(e,t,i,s){return e=e/s-1,i*Math.sqrt(1-e*e)+t},os.easeInOut=function(e,t,i,s){return(e/=s/2)<1?-i/2*(Math.sqrt(1-e*e)-1)+t:i/2*(Math.sqrt(1-(e-=2)*e)+1)+t},os.easeOutIn=function(e,t,i,s){return e<s/2?os.easeOut(2*e,t,i/2,s):os.easeIn(2*e-s,t+i/2,i/2,s)};var hs=function(){};(t["tweezer.tweens.Cubic"]=hs).__name__="tweezer.tweens.Cubic",hs.easeIn=function(e,t,i,s){return i*(e/=s)*e*e+t},hs.easeOut=function(e,t,i,s){return i*((e=e/s-1)*e*e+1)+t},hs.easeInOut=function(e,t,i,s){return(e/=s/2)<1?i/2*e*e*e+t:i/2*((e-=2)*e*e+2)+t},hs.easeOutIn=function(e,t,i,s){return e<s/2?hs.easeOut(2*e,t,i/2,s):hs.easeIn(2*e-s,t+i/2,i/2,s)};var ls=function(){};(t["tweezer.tweens.Elastic"]=ls).__name__="tweezer.tweens.Elastic",ls.easeIn=function(e,t,i,s,n,r){if(0==e)return t;if(1==(e/=s))return t+i;var a=0==r||r<Math.abs(i)?(r=i,n/4):n/(2*Math.PI)*Math.asin(i/r);return-(r*Math.pow(2,10*--e)*Math.sin((e*s-a)*(2*Math.PI)/n))+t},ls.easeOut=function(e,t,i,s,n,r){if(0==e)return t;if(1==(e/=s))return t+i;var a=0==r||r<Math.abs(i)?(r=i,n/4):n/(2*Math.PI)*Math.asin(i/r);return r*Math.pow(2,-10*e)*Math.sin((e*s-a)*(2*Math.PI)/n)+i+t},ls.easeInOut=function(e,t,i,s,n,r){if(0==e)return t;if(2==(e/=s/2))return t+i;var a=0==r||r<Math.abs(i)?(r=i,n/4):n/(2*Math.PI)*Math.asin(i/r);return e<1?r*Math.pow(2,10*--e)*Math.sin((e*s-a)*(2*Math.PI)/n)*-.5+t:r*Math.pow(2,-10*--e)*Math.sin((e*s-a)*(2*Math.PI)/n)*.5+i+t},ls.easeOutIn=function(e,t,i,s,n,r){return e<s/2?ls.easeOut(2*e,t,i/2,s,n,r):ls.easeIn(2*e-s,t+i/2,i/2,s,n,r)};var cs=function(){};(t["tweezer.tweens.Exponential"]=cs).__name__="tweezer.tweens.Exponential",cs.easeIn=function(e,t,i,s){return 0==e?t:i*Math.pow(2,10*(e/s-1))+t-.001*i},cs.easeOut=function(e,t,i,s){return e==s?t+i:1.001*i*(1-Math.pow(2,-10*e/s))+t},cs.easeInOut=function(e,t,i,s){return 0==e?t:e==s?t+i:(e/=s/2)<1?i/2*Math.pow(2,10*(e-1))+t-5e-4*i:i/2*1.0005*(2-Math.pow(2,-10*--e))+t},cs.easeOutIn=function(e,t,i,s){return e<s/2?cs.easeOut(2*e,t,i/2,s):cs.easeIn(2*e-s,t+i/2,i/2,s)};var us=function(){};(t["tweezer.tweens.Linear"]=us).__name__="tweezer.tweens.Linear",us.ease=function(e,t,i,s){return i*e/s+t};var ds=function(){};(t["tweezer.tweens.Quadratic"]=ds).__name__="tweezer.tweens.Quadratic",ds.easeIn=function(e,t,i,s){return i*(e/=s)*e+t},ds.easeOut=function(e,t,i,s){return-i*(e/=s)*(e-2)+t},ds.easeInOut=function(e,t,i,s){return(e/=s/2)<1?i/2*e*e+t:-i/2*(--e*(e-2)-1)+t},ds.easeOutIn=function(e,t,i,s){return e<s/2?ds.easeOut(2*e,t,i/2,s):ds.easeIn(2*e-s,t+i/2,i/2,s)};var ps=function(){};(t["tweezer.tweens.Quartic"]=ps).__name__="tweezer.tweens.Quartic",ps.easeIn=function(e,t,i,s){return i*(e/=s)*e*e*e+t},ps.easeOut=function(e,t,i,s){return-i*((e=e/s-1)*e*e*e-1)+t},ps.easeInOut=function(e,t,i,s){return(e/=s/2)<1?i/2*e*e*e*e+t:-i/2*((e-=2)*e*e*e-2)+t},ps.easeOutIn=function(e,t,i,s){return e<s/2?ps.easeOut(2*e,t,i/2,s):ps.easeIn(2*e-s,t+i/2,i/2,s)};var gs=function(){};(t["tweezer.tweens.Quintic"]=gs).__name__="tweezer.tweens.Quintic",gs.easeIn=function(e,t,i,s){return i*(e/=s)*e*e*e*e+t},gs.easeOut=function(e,t,i,s){return i*((e=e/s-1)*e*e*e*e+1)+t},gs.easeInOut=function(e,t,i,s){return(e/=s/2)<1?i/2*e*e*e*e*e+t:i/2*((e-=2)*e*e*e*e+2)+t},gs.easeOutIn=function(e,t,i,s){return e<s/2?gs.easeOut(2*e,t,i/2,s):gs.easeIn(2*e-s,t+i/2,i/2,s)};var fs=function(){};function ys(e){return e instanceof Array?new Qi(e):e.iterator()}function ms(e,t){return null==t?null:(null==t.__id__&&(t.__id__=p.$haxeUID++),null==e.hx__closures__?e.hx__closures__={}:i=e.hx__closures__[t.__id__],null==i&&(i=t.bind(e),e.hx__closures__[t.__id__]=i),i);var i}(t["tweezer.tweens.Sine"]=fs).__name__="tweezer.tweens.Sine",fs.easeIn=function(e,t,i,s){return-i*Math.cos(e/s*(Math.PI/2))+i+t},fs.easeOut=function(e,t,i,s){return i*Math.sin(e/s*(Math.PI/2))+t},fs.easeInOut=function(e,t,i,s){return-i/2*(Math.cos(Math.PI*e/s)-1)+t},fs.easeOutIn=function(e,t,i,s){return e<s/2?fs.easeOut(2*e,t,i/2,s):fs.easeIn(2*e-s,t+i/2,i/2,s)},p.$haxeUID|=0,"undefined"!=typeof performance&&"function"==typeof performance.now&&(I.now=performance.now.bind(performance)),t.Math=Math,null==String.fromCodePoint&&(String.fromCodePoint=function(e){return e<65536?String.fromCharCode(e):String.fromCharCode(55232+(e>>10))+String.fromCharCode(56320+(1023&e))}),String.prototype.__class__=t.String=String,String.__name__="String",t.Array=Array,Array.__name__="Array",Date.prototype.__class__=t.Date=Date,Date.__name__="Date";var Es,ws={},vs={},Ss=Number,xs=Boolean,bs={},Ts={};Ii.content=[{name:"revision",data:"NDcNCjIwMjAvMTEvMTggMTQ6NTM6NTkNCg"},{name:"config",data:"PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjxkYXRhPg0KCTxzZXR0aW5ncz4NCgkJPGFzc2V0cz4NCgkJCTxwYWNrYWdlcyBkZWZhdWx0PSJhc3NldHMiIGF1ZGlvPSJhc3NldHMuYXVkaW8iIC8+DQoJCTwvYXNzZXRzPg0KCQk8Zm9udCBuYW1lPSJleG8yLWV4dHJhYm9sZGl0YWxpYy13ZWJmb250IiAvPg0KCQk8YXNjaWlBcnQ+DQogICBfX19fX18gICBfX18gICBfXyAgIF9fX18gIF9fICBfX18gIF9fIF9fX19fX19fXyAgX19fXyANCiAgLyBfXy8gLyAgLyBfIHwgLyAvICAvIF9fIFwvICB8LyAgLyAvIC8vIC8gX18vIF8gXC8gX18gXA0KIF9cIFwvIC9fXy8gX18gfC8gL19fLyAvXy8gLyAvfF8vIC8gLyBfICAvIF8vLyAsIF8vIC9fLyAvDQovX19fL19fX18vXy8gfF8vX19fXy9cX19fXy9fLyAgL18vIC9fLy9fL19fXy9fL3xffFxfX19fLyANCg0KCQk8L2FzY2lpQXJ0Pg0KCQk8dXJscz4NCgkJCTx3ZWJzaXRlPmh0dHBzOi8vYjEwYi5jb208L3dlYnNpdGU+DQoJCQk8YXV0aG9yPmh0dHBzOi8vYjEwYi5jb208L2F1dGhvcj4NCgkJPC91cmxzPg0KCQk8Z29vZ2xlQW5hbHl0aWNzIGlkPSJVQS0yMjQwNjMzNy0yOSIgZW5hYmxlZD0iZmFsc2UiIC8+DQoJCTxhdWRpb0hvbGREZWxheT41MDAwPC9hdWRpb0hvbGREZWxheT4NCgkJPGRpc2FibGVFeWVDYW5keT5mYWxzZTwvZGlzYWJsZUV5ZUNhbmR5Pg0KCQk8ZGlzYWJsZURldmljZU1vdGlvbj5mYWxzZTwvZGlzYWJsZURldmljZU1vdGlvbj4NCgkJPG9yaWVudGF0aW9uQXBwcm94aW1hdGlvbj5mYWxzZTwvb3JpZW50YXRpb25BcHByb3hpbWF0aW9uPg0KCTwvc2V0dGluZ3M+DQoJPGd1aT4NCgkJPGF1ZGlvSG9sZE1lc3NhZ2U+UFJFU1MgVE8gQ09OVElOVUU8L2F1ZGlvSG9sZE1lc3NhZ2U+DQoJCTxidXR0b25zPg0KCQkJPHdlYnNpdGU+TW9yZSBnYW1lczwvd2Vic2l0ZT4NCgkJCTxpbnN0cnVjdGlvbnM+SG93IHRvIHBsYXk8L2luc3RydWN0aW9ucz4NCgkJCTxwbGF5PlBsYXkgbm93PC9wbGF5Pg0KCQkJPGF2YXRhcj5DaGFuZ2UgaGVybzwvYXZhdGFyPg0KCQkJPGNvbnRpbnVlPkNvbnRpbnVlPC9jb250aW51ZT4NCgkJCTxyZXNldD5SZXNldCBIZXJvPC9yZXNldD4NCgkJCTxidXk+QnV5PC9idXk+DQoJCQk8dW5wYXVzZT5SZXN1bWU8L3VucGF1c2U+DQoJCQk8YXVkaW9Pbj5Tb3VuZCBPbjwvYXVkaW9Pbj4NCgkJCTxhdWRpb09mZj5Tb3VuZCBPZmY8L2F1ZGlvT2ZmPg0KCQkJPGZ1bGxTY3JlZW5Pbj5GdWxsIHNjcmVlbjwvZnVsbFNjcmVlbk9uPg0KCQkJPGZ1bGxTY3JlZW5PZmY+RXhpdCBmdWxsIHNjcmVlbjwvZnVsbFNjcmVlbk9mZj4NCgkJCTxiYWNrPk1haW4gbWVudTwvYmFjaz4NCgkJCTx0ZXN0TW9kZT4NCgkJCQk8ZmluaXNoPkZpbmlzaDwvZmluaXNoPg0KCQkJCTxza2lwPlNraXA8L3NraXA+DQoJCQkJPGJyb256ZT5Ccm9uemU8L2Jyb256ZT4NCgkJCQk8c2lsdmVyPlNpbHZlcjwvc2lsdmVyPg0KCQkJCTxnb2xkPkdvbGQ8L2dvbGQ+DQoJCQk8L3Rlc3RNb2RlPg0KCQkJPGF2YXRhcnM+DQoJCQkJPHVuaXRBPk1lbjwvdW5pdEE+DQoJCQkJPHVuaXRCPldvbWVuPC91bml0Qj4NCgkJCTwvYXZhdGFycz4NCgkJCTxsZXZlbHM+DQoJCQkJPGxldmVsMT5CZWdpbm5lcjwvbGV2ZWwxPg0KCQkJCTxsZXZlbDI+Tm9ybWFsPC9sZXZlbDI+DQoJCQkJPGxldmVsMz5FeHBlcnQ8L2xldmVsMz4NCgkJCTwvbGV2ZWxzPg0KCQk8L2J1dHRvbnM+DQoJCTx1cGdyYWRlcz4NCgkJCTxzcGVlZD5TcGVlZDwvc3BlZWQ+DQoJCQk8c3RlZXJpbmc+RWRnaW5nPC9zdGVlcmluZz4NCgkJCTxhY2NlbGVyYXRpb24+QWdpbGl0eTwvYWNjZWxlcmF0aW9uPg0KCQkJPGJvb3N0PkJvb3N0PC9ib29zdD4NCgkJPC91cGdyYWRlcz4NCgkJPG1lZGFscz4NCgkJCTxub25lPlJlc3BlY3Q8L25vbmU+DQoJCQk8YnJvbnplPkJyb256ZTwvYnJvbnplPg0KCQkJPHNpbHZlcj5TaWx2ZXI8L3NpbHZlcj4NCgkJCTxnb2xkPkdvbGQ8L2dvbGQ+DQoJCTwvbWVkYWxzPg0KCQk8bGV2ZWxzPg0KCQkJPGxldmVsMT5MZXZlbCAxPC9sZXZlbDE+DQoJCQk8bGV2ZWwyPkxldmVsIDI8L2xldmVsMj4NCgkJCTxsZXZlbDM+TGV2ZWwgMzwvbGV2ZWwzPg0KCQk8L2xldmVscz4NCgkJPHVuaXRzPg0KCQkJPHVuaXRBIHRpdGxlPSJNZW4iIHN1YnRpdGxlPSJUZWFtIiAvPg0KCQkJPHVuaXRCIHRpdGxlPSJXb21lbiIgc3VidGl0bGU9IlRlYW0iIC8+DQoJCTwvdW5pdHM+DQoJCTxzY2VuZXM+DQoJCQk8bWVudT4NCgkJCQk8dGl0bGU+U2xhbG9tIEhlcm88L3RpdGxlPg0KCQkJCTxzdWJ0aXRsZT5XaW50ZXIgU3BvcnRzPC9zdWJ0aXRsZT4NCgkJCTwvbWVudT4NCgkJCTxpbnN0cnVjdGlvbnM+DQoJCQkJPHRpdGxlPkhvdyB0byBwbGF5PC90aXRsZT4NCgkJCQk8bWVzc2FnZT48IVtDREFUQVtDaG9vc2UgeW91ciBoZXJvIGFuZCBjb21wZXRlIGFjcm9zcyAzIGNvdXJzZXMgaW4gdGhlIFNsYWxvbSBldmVudC48YnIvPjxici8+U3RlZXIgYmV0d2VlbiB0aGUgc2xhbG9tIGdhdGVzIGFuZCBjb2xsZWN0IGJvb3N0cyB0byBpbXByb3ZlIHlvdXIgdGltZXMuPGJyLz48YnIvPldpbGwgeW91IHdpbiBhIEdvbGQgTWVkYWw/XV0+PC9tZXNzYWdlPg0KCQkJPC9pbnN0cnVjdGlvbnM+DQoJCQk8YXZhdGFyPg0KCQkJCTx0aXRsZT5TZWxlY3QgaGVybzwvdGl0bGU+DQoJCQk8L2F2YXRhcj4NCgkJCTxzZWxlY3RMZXZlbD4NCgkJCQk8dGl0bGU+U2VsZWN0IFNsYWxvbSBldmVudDwvdGl0bGU+DQoJCQkJPG1lc3NhZ2VOZXc+UGxheSB0byB3aW4gYSBtZWRhbDwvbWVzc2FnZU5ldz4NCgkJCQk8bWVzc2FnZUxvY2tlZD5QbGF5IF9fUFJFVklPVVNfTEVWRUxfXyB0byB1bmxvY2s8L21lc3NhZ2VMb2NrZWQ+DQoJCQkJPG5ldz5OZXc8L25ldz4NCgkJCQk8bG9ja2VkPkxvY2tlZDwvbG9ja2VkPg0KCQkJPC9zZWxlY3RMZXZlbD4NCgkJCTxnYW1lPg0KCQkJCTxodWQ+DQoJCQkJCTx0YXJnZXRzPlRpbWUgdG8gYmVhdDwvdGFyZ2V0cz4NCgkJCQkJPHRpbWVyPkN1cnJlbnQgdGltZTwvdGltZXI+DQoJCQkJCTxzcGVlZG8+S20vaDwvc3BlZWRvPg0KCQkJCQk8Y29pbnM+Q29pbnM8L2NvaW5zPg0KCQkJCTwvaHVkPg0KCQkJPC9nYW1lPg0KCQkJPHJlc3VsdHM+DQoJCQkJPHRpdGxlPlJlc3VsdHM8L3RpdGxlPg0KCQkJCTxtZXNzYWdlPllvdSB3b248L21lc3NhZ2U+DQoJCQk8L3Jlc3VsdHM+DQoJCQk8c2hvcD4NCgkJCQk8dGl0bGU+VHJhaW4geW91ciBoZXJvPC90aXRsZT4NCgkJCQk8bWF4ZWQ+TWF4ZWQ8L21heGVkPg0KCQkJPC9zaG9wPg0KCQk8L3NjZW5lcz4NCgk8L2d1aT4NCjwvZGF0YT4NCg"}],ji.count=0,$i.__toStr={}.toString,R.Element=0,R.PCData=1,R.CData=2,R.Comment=3,R.DocType=4,R.ProcessingInstruction=5,R.Document=6,Ui.USE_CACHE=!1,Ui.USE_ENUM_INDEX=!1,Ui.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:",Di.DEFAULT_RESOLVER=new Ri,Di.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:",Li.CHARS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Li.BYTES=Mi.ofString(Li.CHARS),Zi.escapes=((Es=new zi).h.lt="<",Es.h.gt=">",Es.h.amp="&",Es.h.quot='"',Es.h.apos="'",Es),pt.main()}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);